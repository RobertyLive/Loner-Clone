,createdLocally:e.created_locally,createdBy:e.created_by,createdContext:e.created_context,modifiedDate:e.modified_date,modifiedLocally:e.modified_locally,modifiedBy:e.modified_by,modifiedContext:e.modified_context,description:e.description,descriptionModifiedDate:e.description_modified_date,descriptionModifiedLocally:e.description_modified_locally,descriptionModifiedBy:e.description_modified_by,descriptionModifiedContext:e.description_modified_context,removedDate:e.removed_date,removedLocally:e.removed_locally,removedBy:e.removed_by,removedContext:e.removed_context,representations:null===(a=e.representations)||void 0===a?void 0:a.map(g),groups:null===(n=e.groups)||void 0===n?void 0:n.map(p),roles:e.roles,customData:e.custom_data,elementRef:e.element_ref}}function d(e){var t,a;return{id:e.id,name:e.name,is_auto_named:e.isAutoNamed,auto_name:e.autoName,type:e.type,source_ref:e.sourceRef,description:e.description,tags:e.tags,dependency_ids:e.dependencyIds,localized_names:e.localizedNames,created_date:e.createdDate,modified_date:e.modifiedDate,representations:null===(t=e.representations)||void 0===t?void 0:t.map(e=>function e(t,a=!1){var n;return{id:t.id,type:t.type,relationship:a?void 0:t.relationship,is_full_size:!1,is_external_link:!1,source:t.source,children:null===(n=t.children)||void 0===n?void 0:n.map(t=>e(t,!0)),custom_data:t.customData}}(e,!1)),groups:null===(a=e.groups)||void 0===a?void 0:a.map(m),roles:e.roles,custom_data:e.customData}}function u(e){return{id:e.id,classifier:e.classifier,name:e.name,order:e.order,parentId:e.parent_id,localizedNames:e.localized_names,createdDate:e.created_date,createdBy:e.created_by,createdContext:e.created_context,createdLocally:e.created_locally,modifiedDate:e.modified_date,modifiedBy:e.modified_by,modifiedContext:e.modified_context,modifiedLocally:e.modified_locally,sourceRef:e.source_ref,customData:e.custom_data}}function h(e){return{id:e.id,classifier:e.classifier,name:e.name,order:e.order,parent_id:e.parentId,localized_names:e.localizedNames,created_date:e.createdDate,modified_date:e.modifiedDate,source_ref:e.sourceRef,custom_data:e.customData}}function p(e){return{id:e.id,classifier:e.classifier,order:e.order}}function m(e){return{id:e.id,classifier:e.classifier,order:e.order}}function g(e){var t;return{id:e.id,type:e.type,relationship:e.relationship,isFullSize:e.is_full_size,isExternalLink:e.is_external_link,isPreferredThumbnail:e.is_preferred_thumbnail,customData:e.custom_data,path:e.path,width:e.width,height:e.height,contentLength:e.content_length,url:e.url,children:null===(t=e.children)||void 0===t?void 0:t.map(g)}}function f(e){return{name:e.name,id:e.id,owner:{type:e.ownerType,id:e.ownerId},ownerName:e.ownerName,isWritable:e.permissions.includes("write")}}function v(e){return{name:e.name,id:e.id,owner:{type:e.storageAssignee.type,id:e.storageAssignee.id},ownerName:e.storageAssignee.displayName,isWritable:!0}}function y(e,t){if(e=(e||"0").toString().replace(/(\.0)*$/,"").replace(/[^.0-9]+/gim,"."),t=(t||"0").toString().replace(/(\.0)*$/,"").replace(/[^.0-9]+/gim,"."),(isNaN(parseInt(e,10))||parseInt(e,10)>250)&&(e="0"),(isNaN(parseInt(t,10))||parseInt(t,10)>250)&&(t="0"),e===t)return 0;const a=e.split("."),n=t.split(".");let i;for(let e=0;e<a.length&&e<n.length;e++){if(i=parseInt(a[e],10)-parseInt(n[e],10),isNaN(i))return isNaN(parseInt(a[e],10))?1:-1;if(i>0)return-1;if(i<0)return 1}return i=a.length-n.length,i>0?-1:i<0?1:0}var b=a("K1h8"),E=a("k/Li"),_=a("D3dN"),w=a("El4k"),I=a("P+lh"),x=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};const S=["updateLibrary","createElement","updateElement","removeElement","restoreElement","deleteElement","createGroup","updateGroup","removeGroup"];function O(e,t){return Object.assign(Object.assign({},e),{data:t,originalAction:e})}const C={updateLibrary:(e,t)=>O(e,l(t)),createElement:(e,t)=>O(e,c(t)),updateElement:(e,t)=>O(e,c(t)),restoreElement:(e,t)=>O(e,c(t)),removeElement:e=>e,deleteElement:e=>e,createGroup:(e,t)=>O(e,u(t)),updateGroup:(e,t)=>O(e,u(t)),removeGroup:e=>e};class P extends E.a{constructor(){super(...arguments),this._actionMappers={updateLibrary:e=>{return{method:"PUT",path:"",body:(t=e.data,{id:t.id,name:t.name,ownership:t.ownership,default:t.default,localized_names:t.localizedNames,toolkit_id:t.toolkitId,document_id:t.documentId,document_type:t.documentType,groups:null===(a=t.groups)||void 0===a?void 0:a.map(h),collaboration:t.collaboration,details:{num_elements:0,num_documentation_elements:0,num_archived_elements:0},team_id:null===(n=t.team)||void 0===n?void 0:n.id,roles:t.roles,custom_data:t.customData})};var t,a,n},createElement:e=>({method:"POST",path:"elements",body:d(e.data)}),updateElement:e=>({method:"PUT",path:"elements/"+Object(w.b)(e.path),body:d(e.data)}),removeElement:e=>({method:"DELETE",path:"elements/"+Object(w.b)(e.path)}),restoreElement:e=>({method:"POST",path:`removed_elements/${e.data.id}/restore`}),deleteElement:e=>({method:"DELETE",path:`elements/${Object(w.b)(e.path)}?permanent=true`}),createGroup:e=>({method:"POST",path:"groups",body:h(e.data)}),updateGroup:e=>({method:"PUT",path:"groups/"+Object(w.c)(e.path),body:h(e.data)}),removeGroup:e=>{var t;return{method:"DELETE",path:`groups/${Object(w.c)(e.path)}${(null===(t=e.flags)||void 0===t?void 0:t.includeElements)?"?include_contents=true":""}`}}},this._actions=[]}async execute(){const e=this._actions.map(e=>this._actionMappers[e.name](e)),t=Object(_.c)(e),a=await this._driver.fetch("/libraries/"+this._library.id,{method:"PATCH",headers:{"If-Match":this._library.etag},body:JSON.stringify(t)}),i=await a.json();if(!Array.isArray(i)||i.length!==this._actions.length)throw new n.b("INVALID_RESPONSE","Malformed batch response.",this._library.id);let r=this._actions.map((e,t)=>C[e.name](e,i[t]));return r=Object(I.c)(r),{actions:r,etag:a.headers.get("ETag")}}supportsAction(e){return function(e){return S.includes(e.name)}(e)}}x([E.b],P.prototype,"execute",null);var N=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};class A extends E.a{supportsAction(e){return"updateElementContent"===e.name}addAction(e){return(!this._actions[0]||this._actions[0].path===e.path)&&super.addAction(e)}async execute(){const e=this._actions[this._actions.length-1],t=await this._updateElementContent(Object(w.b)(e.path),e.data),a=c(await t.json());return{actions:this._actions.map((e,t)=>t!==this._actions.length-1?Object.assign(Object.assign({},e),{type:"no-op",originalAction:e}):Object.assign(Object.assign({},e),{data:a,originalAction:e})),etag:t.headers.get("ETag")}}_updateElementContent(e,t){const a=Object.assign(Object.assign({},t),{representations:Object(_.b)(Object(I.a)(t.representations))});return this._driver.fetch(`/libraries/${this._library.id}/elements/${e}`,{method:"PUT",headers:{"If-Match":this._library.etag},body:JSON.stringify(d(a))})}}N([E.b],A.prototype,"execute",null);var T=a("rKIJ");class M extends T.a{constructor(){super(...arguments),this._actionMappers={createLibrary:e=>this._createLibraryActionMap(e),copyLibrary:e=>this._createLibraryActionMap(e),removeLibrary:async e=>(o.getInstance(this._library.id).abort(),await this._removeLibrary(),e),unfollowLibrary:async e=>(await this._removeLibrary("unfollow"),e),leaveLibrary:async e=>(await this._removeLibrary("leave"),e),moveLibrary:async e=>{const t=await this._moveLibrary();return Object.assign(Object.assign({},e),{data:t,originalAction:e})}}}supportsAction(e){return["createLibrary","removeLibrary","unfollowLibrary","leaveLibrary","copyLibrary","moveLibrary"].includes(e.name)}async _createLibraryActionMap(e){const t=await this._createLibrary(e);return Object.assign(Object.assign({},e),{type:"update",data:t,originalAction:e})}_createLibrary(e){const{data:t={},flags:a={}}=e;return new Promise((e,n)=>{var i,r;const o=this._driver.fetch("/libraries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,team_id:null===(i=t.team)||void 0===i?void 0:i.id,roles:t.roles,team_permission_inheritance:a.permissionInheritance,source:null===(r=a.source)||void 0===r?void 0:r.id})}),c=new s.a(this._driver,o);c.on("change",(t,a)=>{if(t){c.error&&n(c.error);const t=a?l(a):void 0;e(t)}})})}_removeLibrary(e="remove"){return this._driver.fetch(`/libraries/${this._library.id}?action=${e}`,{method:"DELETE"})}_moveLibrary(){return this._driver.moveLibrary(this._library.id,this.action.data.team.id)}}var L=a("Q5Fl");class R extends L.a{constructor(){super(...arguments),this._actionMappers={uploadComponent:async e=>{const t=await this._driver.stageRepresentationForCommit(e.library,e.data.file,e.data.type);return Object.assign(Object.assign({},e),{data:{path:t},originalAction:e})}}}supportsAction(e){return"uploadComponent"===e.name}}var D=a("ttwd"),z=a("NHlq");class k extends z.a{async _doMoveCopyRequest(e,t,a,n){const i=this._library.id,r=a.id,s=await this._driver.fetch(`/libraries/${r}/elements`,{method:"POST",headers:{"If-Match":a.etag},body:JSON.stringify({[e?"self":"source"]:{id:i,elements:n,etag:this._library.etag}})});return{elements:(await s.json()).elements.map(c),etag:s.headers.get("ETag"),sourceEtag:s.headers.get("Source-ETag")}}}var j=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};class B extends E.a{get action(){return this._actions[0]}supportsAction(e){return["moveGroup","copyGroup","dependent"].includes(e.name)}addAction(e){if(!this.supportsAction(e))return!1;return this._actions[this._actions.length-1]||"dependent"===e.name?"dependent"===e.name&&super.addAction(e):super.addAction(e)}async execute(){var e,t;const a="moveGroup"===this.action.name,n=this._library.id,i=null===(e=this.action.link)||void 0===e?void 0:e.library,r=null==i?void 0:i.id,s=Object(w.c)(this.action.path),o=await this._driver.fetch(`/libraries/${r}/groups`,{method:"POST",headers:{"If-Match":null==i?void 0:i.etag},body:JSON.stringify({[a?"self":"source"]:{id:n,group_id:s,include_contents:null===(t=this.action.flags)||void 0===t?void 0:t.includeElements,etag:this._library.etag}})}),l=await o.json();let c,d;return i===this._library?(c=[],d=this._actions.map(e=>"dependent"!==e.name?e:Object.assign(Object.assign({},e),{data:l,originalAction:e}))):(d=this._actions,c=this._actions.map(e=>Object.assign(Object.assign({},e.link),{data:l,originalAction:e.link}))),{actions:d,etag:o.headers.get("Source-ETag"),linkedActions:c}}}j([E.b],B.prototype,"execute",null);var V=a("KysP"),F=(a("OG+L"),a("GN7m"),a("x1i3")),H=a("lWS7"),U=a("fiWp"),G=a.n(U);class W extends G.a{constructor(e){super(),this._listenedEvents=new Set,this._errorCount=0,this._eventSource=new EventSource(e),this._eventSource.onopen=()=>{this._errorCount=0},this._eventSource.onerror=e=>{this._errorCount+=1,this._errorCount>=3&&(this.close(),this.emit("error",e))}}on(e,t){return super.on(e,t),this._listenedEvents.has(e)||(this._listenedEvents.add(e),this._eventSource.addEventListener(e,t=>{H.a.log("[NOTIFICATIONS] Received event: "+e);try{this.emit(e,JSON.parse(t.data))}catch(e){t.data?this.emit("error",new n.b("INVALID_JSON","Received invalid JSON")):this.emit("error",new n.b("INVALID_RESPONSE","Received invalid response (no data)"))}})),this}close(){this.removeAllListeners(),this._eventSource.close()}}class q extends G.a{constructor(e){super();const t=e.replace(/http(s?):\/\//,"ws$1://");this._ws=new WebSocket(t),this._ws.addEventListener("message",e=>{try{const{type:t,message:a}=JSON.parse(e.data);H.a.log("[NOTIFICATIONS] Received event: "+t),this.emit(t,a)}catch(e){this.emit("error",new n.b("INVALID_JSON","Received invalid JSON"))}}),this._ws.addEventListener("error",e=>{this.close(),this.emit("error",e)})}get isOpen(){return this._ws.readyState===this._ws.OPEN}close(){this.isOpen&&(this.removeAllListeners(),this._ws.close())}}var $,K,J,X=a("f3NI"),Y=a.n(X);class Q extends G.a{constructor(e){super();const t=e.replace(/http(s?):\/\//,"ws$1://");this._ws=new Y.a(t),this._ws.addEventListener("message",e=>{try{const{type:t,message:a}=JSON.parse(e.data);H.a.log("[NOTIFICATIONS] Received event: "+t),this.emit(t,a)}catch(e){this.emit("error",new n.b("INVALID_JSON","Received invalid JSON"))}}),this._ws.addEventListener("error",e=>{this.close(),this.emit("error",e)})}get isOpen(){return this._ws.readyState===this._ws.OPEN}close(){this.isOpen&&(this.removeAllListeners(),this._ws.close())}}var Z="undefined"==typeof window?Q:(null===(J=null===(K=null===($=null===window||void 0===window?void 0:window.navigator)||void 0===$?void 0:$.userAgent)||void 0===K?void 0:K.startsWith)||void 0===J?void 0:J.call(K,"Adobe UXP Runtime"))?q:W,ee=a("jVml"),te=a("/Iim"),ae=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a},ne=function(e){return this instanceof ne?(this.v=e,this):new ne(e)},ie=function(e,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=a.apply(e,t||[]),r=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(a,n){r.push([e,t,a,n])>1||o(e,t)}))})}function o(e,t){try{(a=i[e](t)).value instanceof ne?Promise.resolve(a.value.v).then(l,c):d(r[0][2],a)}catch(e){d(r[0][3],e)}var a}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),r.shift(),r.length&&o(r[0][0],r[0][1])}},re=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,a=e[Symbol.asyncIterator];return a?a.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=e[a]&&function(t){return new Promise((function(n,i){(function(e,t,a,n){Promise.resolve(n).then((function(t){e({value:t,done:a})}),t)})(n,i,(t=e[a](t)).done,t.value)}))}}},se=function(e){var t,a;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(a=!a)?{value:ne(e[n](t)),done:"return"===n}:i?i(t):t}:i}};const oe={field:"modifiedDate",direction:"descending"},le={reconnectOnErrors:[401,403],reconnectOnNoResponse:!0