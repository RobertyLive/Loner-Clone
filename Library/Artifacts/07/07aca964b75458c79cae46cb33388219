e.mode=t.mode,"bitmap"===e.mode&&"transparent"===e.fill&&e.updateFill(e.displayBackgroundValues[0],e.defaultBackground);const r=e.displayColorProfileLists;r.length&&!r.filter(t=>t.filter(t=>t.value?t.value===e.profile:t===e.profile).length).length&&e.updateColorProfile(r[0][0].value?r[0][0].value:r[0][0])}})).views(e=>({get displayColorModes(){return e.hasArtboards?e.colorModes.filter(e=>"RGB"===e.mode):e.colorModes},get displayMaxDocWidth(){if(!e.units)return e.maxDocWidth;const t=Object(h.r)(e.maxDocWidth,h.q[h.p.PIXELS],h.q[e.units],e);return Object(m.d)(t,p.d[e.units])},get displayMaxDocHeight(){if(!e.units)return e.maxDocHeight;const t=Object(h.r)(e.maxDocHeight,h.q[h.p.PIXELS],h.q[e.units],e);return Object(m.d)(t,p.d[e.units])},get displayMinDocWidth(){if(!e.units)return e.minDocWidth;const t=Object(h.r)(e.minDocWidth,h.q[h.p.PIXELS],h.q[e.units],e);return Object(m.a)(t,p.d[e.units])},get displayMinDocHeight(){if(!e.units)return e.minDocHeight;const t=Object(h.r)(e.minDocHeight,h.q[h.p.PIXELS],h.q[e.units],e);return Object(m.a)(t,p.d[e.units])},get displayWidth(){const t=void 0!==e.width?e.width:NaN;return e.units?Object(m.f)(t,p.d[e.units]):t},get displayHeight(){const t=void 0!==e.height?e.height:NaN;return e.units?Object(m.f)(t,p.d[e.units]):t}})).actions(e=>({afterCreate:Object(d.c)((function*(){e.defaultBackgroundRgb||(e.defaultBackgroundRgb=yield Object(_.c)(Object(u.D)(e.defaultBackground))),e.updateFill(e.fill,e.defaultBackground)})),updateDimensionUnit(t){e.units&&(e.width=Object(h.r)(e.width||e.minDocWidth,h.q[e.units],h.q[t],e),e.height=Object(h.r)(e.height||e.minDocHeight,h.q[e.units],h.q[t],e),e.units=t,e.width=Math.min(Math.max(e.width,e.displayMinDocWidth),e.displayMaxDocWidth),e.height=Math.min(Math.max(e.height,e.displayMinDocHeight),e.displayMaxDocHeight),this.updateArtboards(e.hasArtboards))},updateNumericValue(t,a){const n=void 0===a?NaN:a;e[t]="string"==typeof n?parseFloat(n):n},updateWidth(t){this.updateNumericValue("width",t),this.updateArtboards(e.hasArtboards)},updateHeight(t){this.updateNumericValue("height",t),this.updateArtboards(e.hasArtboards)},updateResolution(t){this.updateNumericValue("resolution",t),this.updateArtboards(e.hasArtboards)},toggleOrientation(t){if(t!==e.orientation){const t=e.width;e.width=e.height,e.height=t,this.updateArtboards(e.hasArtboards)}},updateArtboards(t){if(t&&e.units){e.artboards=Object(d.b)([{bottom:Object(h.r)(e.height||e.minDocHeight,h.q[e.units],h.q[h.p.PIXELS],e),left:0,right:Object(h.r)(e.width||e.minDocWidth,h.q[e.units],h.q[h.p.PIXELS],e),top:0}]);const t=e.displayColorModes;t.length&&!t.filter(t=>t.mode===e.mode).length&&e.updateColorMode(t[0])}else e.artboards=Object(d.b)([])},setLiveCoediting(t){e.coeditingEnabled=t},updateResolutionUnit(t){e.resolutionUnits&&(e.resolution=Object(h.r)(e.resolution,h.q[t],h.q[e.resolutionUnits],e)),e.resolutionUnits=t},updateEncoding(t){e.depth=t},updateAspectRatio(t){e.scale=parseFloat(t)}})).views(e=>({get docStep(){return e.units?h.n[e.units]:1},get slowStepMultiplier(){return e.units?h.l[e.units]:1},get fastStepMultiplier(){return e.units?h.m[e.units]:1},get displayMaxResolution(){if(!e.resolutionUnits||!e.units||h.q[e.units]===h.q[h.p.PIXELS])return e.maxResolution;const t=Object(h.r)(e.width||e.minDocWidth,h.q[e.units],h.q[e.resolutionUnits],e),a=Object(h.r)(e.height||e.minDocHeight,h.q[e.units],h.q[e.resolutionUnits],e),n=e.maxDocWidth/t,i=e.maxDocHeight/a,r=Object(h.r)(e.maxResolution,h.q[h.p.INCHES],h.q[e.resolutionUnits],e),s=Math.min(n,i,r);return Object(m.d)(s,p.d.resolution)},get displayMinResolution(){if(!e.resolutionUnits||!e.units||h.q[e.units]===h.q[h.p.PIXELS])return e.minResolution;const t=Object(h.r)(e.width||e.minDocWidth,h.q[e.units],h.q[e.resolutionUnits],e),a=Object(h.r)(e.height||e.minDocHeight,h.q[e.units],h.q[e.resolutionUnits],e),n=e.minDocWidth/t,i=e.minDocHeight/a,r=Object(h.r)(e.minResolution,h.q[h.p.INCHES],h.q[e.resolutionUnits],e),s=Math.max(n,i,r);return Object(m.a)(s,p.d.resolution)},get displayResolution(){return Math.min(this.displayMaxResolution,Object(m.f)(e.resolution,p.d.resolution))},get orientation(){if(void 0!==e.height&&void 0!==e.width)return e.height>=e.width?E.c.PORTRAIT:E.c.LANDSCAPE},get displayColorMode(){return e.mode},get displayColorDepth(){return e.depth},get defaultCustomColor(){return e.customRgbColor||e.defaultBackground||Object(_.d)("white")},get displayCustomColorRgbString(){const t="custom"===e.displayBackground?e.customRgbColor:e.displayCustomColor;return t&&Object(_.g)(Object(_.e)(Object(u.D)(t)))}}));var x=d.g.model("SideDimensionsModel",{top:d.g.optional(d.g.number,0),bottom:d.g.optional(d.g.number,0),left:d.g.optional(d.g.number,0),right:d.g.optional(d.g.number,0)}).views(e=>({get asArray(){return[e.left,e.top,e.right,e.bottom]}})).actions(e=>({updateValues(t){[e.left,e.top,e.right,e.bottom]=t}})),S=a("jEX6"),O=a("cIFk"),C=a("tIky");const P=d.g.model({tipDocumentPresetCard:d.g.string,tipDocPreset:d.g.string,tipSavePreset:d.g.string,tipDeletePreset:d.g.string,tipLandscape:d.g.string,tipPotrait:d.g.string,tipColumns:d.g.string,tipColNum:d.g.string,tipColGutter:d.g.string,tipMargin:d.g.string,tipBleed:d.g.string,tipSlug:d.g.string,tipChainValues:d.g.string,bindingText:d.g.string,layoutGridBtnText:d.g.string,marginBtnText:d.g.string,tipLeftToRight:d.g.string,tipRightToLeft:d.g.string,tipPrimaryTextFrame:d.g.string,previewText:d.g.string});var N=d.g.snapshotProcessor(P,{preProcessor(e){const t=e?JSON.parse(JSON.stringify(e)):e;return t&&t.bindingText&&(t.bindingText=t.bindingText.replace(/\s/g,"").replace(":","")),t}}),A=a("b6PM"),T=a("nrFN");const M=d.g.model("InDesignPresetModel",{...E.b,unitInfo:d.g.maybe(S.a),pointsPerInch:d.g.optional(d.g.number,72),picasPerInch:d.g.optional(d.g.number,6),units:d.g.optional(d.g.string,"inchesUnit"),docSizeBoundMax:d.g.optional(d.g.number,1e4),docSizeBoundMin:d.g.optional(d.g.number,1),bTall:d.g.optional(d.g.boolean,!1),numPagesBoundMin:d.g.maybe(d.g.number),numPagesBoundMax:d.g.maybe(d.g.number),startPageBoundMin:d.g.maybe(d.g.number),startPageBoundMax:d.g.maybe(d.g.number),start_page_num:d.g.maybe(d.g.number),num_pages:d.g.maybe(d.g.number),facing_pages:d.g.optional(d.g.boolean,!1),pages_per_spread:d.g.optional(d.g.number,1),auto_text_frame:d.g.optional(d.g.boolean,!1),colNumBoundMin:d.g.maybe(d.g.number),colNumBoundMax:d.g.maybe(d.g.number),columns:d.g.maybe(d.g.number),column_orientation:d.g.maybe(d.g.number),colGutterBoundMin:d.g.maybe(d.g.number),colGutterBoundMax:d.g.maybe(d.g.number),gutter:d.g.maybe(d.g.number),hideDltBtn:d.g.maybe(d.g.boolean),intent:d.g.maybe(d.g.string),isPreset:d.g.maybe(d.g.boolean),restart_page_num:d.g.maybe(d.g.boolean),spreadScale:d.g.maybe(d.g.array(d.g.number)),colorMode:d.g.optional(d.g.string,""),page_binding:d.g.maybe(d.g.number),minColumnWidth:d.g.maybe(d.g.number),template_category:d.g.maybe(d.g.enumeration(Object.values(O.default))),thumbnail_url:d.g.maybe(d.g.string),kind:w.a.PRESET,decimalPoint:d.g.optional(d.g.maybe(d.g.string),"."),mime_type:d.g.optional(d.g.string,"image/indesign"),uniform_bleed:d.g.maybe(d.g.boolean),bleedBoundMin:d.g.optional(d.g.number,0),bleedBoundMax:d.g.number,bleed_offset:d.g.optional(x,{}),uniform_margins:d.g.maybe(d.g.boolean),marginBoundMin:d.g.optional(d.g.number,0),marginBoundMax:d.g.number,margins:d.g.optional(x,{}),uniform_slug:d.g.maybe(d.g.boolean),slugBoundMin:d.g.optional(d.g.number,0),slugBoundMax:d.g.number,slug_offset:d.g.optional(x,{}),id:d.g.optional(d.g.string,""),previews:d.g.maybe(d.g.array(C.a)),price_prompt:d.g.optional(d.g.string,""),tip:d.g.optional(d.g.string,""),title:d.g.optional(d.g.string,""),dialogToolTips:d.g.maybe(N),previewModeEnabled:d.g.optional(d.g.boolean,!1),jp_doc_type:d.g.maybe(d.g.string),jpLastDocType:d.g.maybe(d.g.string),originalPreset:d.g.optional(d.g.string,"")}).volatile(e=>({host:l.a.INDESIGN})).views(E.d).views(e=>({get bleedValues(){return e.bleed_offset.asArray},get slugValues(){return e.slug_offset.asArray},get lockBleed(){return e.uniform_bleed},get lockSlug(){return e.uniform_slug},get marginsValues(){return e.margins.asArray},get lockMargins(){return e.uniform_margins},get facingPages(){return e.facing_pages},get pageBinding(){return void 0!==e.page_binding&&e.page_binding.toString()},get autoTextFrame(){return e.auto_text_frame},get jpDocType(){return e.jp_doc_type},get docSizeMin(){return e.units?Object(h.r)(e.docSizeBoundMin,h.q.pixelsUnit,h.q[e.units],e):e.docSizeBoundMin},get displayMaxDocWidth(){return e.units?Object(h.r)(e.docSizeBoundMax,h.q.pixelsUnit,h.q[e.units],e):e.docSizeBoundMax},get displayMaxDocHeight(){return e.units?Object(h.r)(e.docSizeBoundMax,h.q.pixelsUnit,h.q[e.units],e):e.docSizeBoundMax},get displayMinDocWidth(){return Math.min(this.docSizeMin+e.margins.left+e.margins.right,this.displayMaxDocWidth)},get displayMinDocHeight(){return Math.min(this.docSizeMin+e.margins.top+e.margins.bottom,this.displayMaxDocHeight)}})).actions(e=>({updatePreviewModeEnabled(t){e.previewModeEnabled=t},updateNumericValue(t,a){const n=void 0===a?NaN:a;e[t]="string"==typeof n?parseFloat(n):n},updateWidth(e){this.updateNumericValue("width",e)},updateHeight(e){this.updateNumericValue("height",e)},updateBleedValues(t){e.bleed_offset.updateValues(t)},updateSlugValues(t){e.slug_offset.updateValues(t)},updateBleedLock(t){e.uniform_bleed=t},updateSlugLock(t){e.uniform_slug=t},updateMarginsValues(t){e.margins.updateValues(t)},updateMarginsLock(t){e.uniform_margins=t},updateFacingPages(t){e.facing_pages=t,e.pages_per_spread=t?2:1},updatePageBinding(t){e.page_binding=parseInt(t)},updateAutoTextFrame(t){e.auto_text_frame=t},updateJpDocType(t){e.jp_doc_type=t},updateNumPages(t){t=e.numPagesBoundMin&&e.numPagesBoundMax&&Object(m.b)(t,e.numPagesBoundMin,e.numPagesBoundMax),e.num_pages=t},updateStartPageNum(t){t=e.startPageBoundMin&&e.startPageBoundMax&&Object(m.b)(t,e.startPageBoundMin,e.startPageBoundMax),e.start_page_num=t},updateColumns(t){t=e.colNumBoundMin&&e.colNumBoundMax&&Object(m.b)(t,e.colNumBoundMin,e.colNumBoundMax),e.columns=t},updateGutter(t){e.gutter=t},toggleOrientation(t){if(t!==e.orientation){const a=e.width;e.width=e.height,e.height=a,e.bTall=t===E.c.PORTRAIT}}})).views(e=>({get startPageNum(){return e.start_page_num||e.startPageBoundMin},get pageCount(){return e.num_pages||e.numPagesBoundMin}})).views(e=>({get docStep(){return e.units?h.k[e.units]:1},get slowStepMultiplier(){return e.units?h.i[e.units]:1},get fastStepMultiplier(){return e.units?h.j[e.units]:1},get minBleed(){return e.units?Object(h.r)(e.bleedBoundMin,h.q.pixelsUnit,h.q[e.units],e):e.bleedBoundMin},get maxBleed(){return e.units?Object(h.r)(e.bleedBoundMax,h.q.pixelsUnit,h.q[e.units],e):e.bleedBoundMax},get minMargins(){return e.units?Object(h.r)(e.marginBoundMin,h.q.pixelsUnit,h.q[e.units],e):e.marginBoundMin},get maxMargins(){return e.units?Object(h.r)(e.marginBoundMax,h.q.pixelsUnit,h.q[e.units],e):e.marginBoundMax},get minSlug(){return e.units?Object(h.r)(e.slugBoundMin,h.q.pixelsUnit,h.q[e.units],e):e.slugBoundMin},get maxSlug(){return e.units?Object(h.r)(e.slugBoundMax,h.q.pixelsUnit,h.q[e.units],e):e.slugBoundMax},get minColGutter(){return e.units?Object(h.r)(e.colGutterBoundMin||0,h.q.pixelsUnit,h.q[e.units],e):e.colGutterBoundMin||0},get orientation(){if(void 0!==e.height&&void 0!==e.width)return e.height>=e.width?E.c.PORTRAIT:E.c.LANDSCAPE}})).actions(e=>({updateDimensionUnit(t){if(!e.units)return;e.width=Object(h.r)(e.width||e.docSizeBoundMin,h.q[e.units],h.q[t],e),e.height=Object(h.r)(e.height||e.docSizeBoundMin,h.q[e.units],h.q[t],e);const a=e.units;e.units=t,e.updateMarginsValues(e.margins.asArray.map(n=>{const i=Object(h.r)(n||0,h.q[a],h.q[t],e);return Math.min(Math.max(i,e.minMargins),e.maxMargins)})),e.width=Math.min(Math.max(e.width,e.displayMinDocWidth),e.displayMaxDocWidth),e.height=Math.min(Math.max(e.height,e.displayMinDocHeight),e.displayMaxDocHeight),e.updateBleedValues(e.bleed_offset.asArray.map(n=>{const i=Object(h.r)(n||0,h.q[a],h.q[t],e);return Math.min(Math.max(i,e.minBleed),e.maxBleed)})),e.updateSlugValues(e.slug_offset.asArray.map(n=>{const i=Object(h.r)(n||0,h.q[a],h.q[t],e);return Math.min(Math.max(i,e.minSlug),e.maxSlug)})),e.gutter=Object(h.r)(e.gutter||e.colGutterBoundMin||0,h.q[a],h.q[t],e)}})).views(e=>({get isModified(){return!Object(A.i)(JSON.parse(e.originalPreset),Object(d.e)(e))}})),L=["units","unitInfo","pointsPerInch","docSizeBoundMax","docSizeBoundMin","numPagesBoundMin","numPagesBoundMax","startPageBoundMin","startPageBoundMax","colNumBoundMin","colNumBoundMax","colGutterBoundMin","colGutterBoundMax","minColumnWidth","defaultDocumentName","unitList","bleedBoundMin","bleedBoundMax","marginBoundMin","marginBoundMax","slugBoundMin","slugBoundMax","decimalPoint","dialogToolTips","previewModeEnabled","jpLastDocType"],R=["previewModeEnabled","auto_text_frame","bTall","bleed_offset","colorMode","column_orientation","columns","description","facing_pages","gutter","height","hideDltBtn","id","intent","isPreset","lastUsedTime","margins","mime_type","num_pages","page_binding","pages_per_spread","previews","price_prompt","resolution","restart_page_num","size","slug_offset","spreadScale","start_page_num","template_category","thumbnail_url","tip","title","uniform_bleed","uniform_margins","uniform_slug","units","width","jp_doc_type","actionTrigger"];var D=d.g.snapshotProcessor(M,{preProcessor(e){const{fnftSettings:t,...a}=e,{template_category:n,title:i,mode:r,width:s,height:o,start_page_num:l,num_pages:c,columns:d,gutter:u,resolution:p,lastUsedTime:m,previewModeEnabled:g}=a;let f;t&&(f=L.reduce((a,n)=>(e[n]||void 0===t[n]||(a[n]=t[n]),a),{})),f&&void 0!==f.minColumnWidth&&(f.minColumnWidth=Number.parseFloat(f.minColumnWidth));const v={...a,width:Number.parseFloat(s),height:Number.parseFloat(o),resolution:Number.parseFloat(p),lastUsedTime:Number.parseFloat(m),start_page_num:Object(A.c)([l,f&&f.startPageBoundMin]),num_pages:Object(A.c)([c,f&&f.numPagesBoundMin]),columns:Object(A.c)([d,f&&f.colNumBoundMin]),gutter:Object(A.c)([u,f&&f.colGutterBoundMin]),previewModeEnabled:g||f&&f.previewModeEnabled,template_category:n,category:n,name:i,mode:r,initialColorModeValue:r,...f};if(!e.units)return v;const y=h.q[h.p.POINTS];["width","height","gutter"].forEach(t=>{v[t]&&(v[t]=Object(h.r)(v[t],y,h.q[e.units],e))});return["bleed_offset","margins","slug_offset"].forEach(t=>{const a={};v[t]&&(a.top=Object(h.r)(v[t].top,y,h.q[e.units],e),a.bottom=Object(h.r)(v[t].bottom,y,h.q[e.units],e),a.left=Object(h.r)(v[t].left,y,h.q[e.units],e),a.right=Object(h.r)(v[t].right,y,h.q[e.units],e),v[t]=a)}),v.originalPreset=JSON.stringify(Object(A.j)(v,T.a)),v},postProcessor(e){const t={};R.reduce((t,a)=>(t[a]=e[a],t),t);const a=h.q[h.p.POINTS];["width","height","gutter"].forEach(n=>{t[n]&&(t[n]=Object(h.r)(t[n],h.q[e.units],a,e))});return["bleed_offset","margins","slug_offset"].forEach(n=>{const i={};t[n]&&(i.top=Object(h.r)(t[n].top,h.q[e.units],a,e),i.bottom=Object(h.r)(t[n].bottom,h.q[e.units],a),i.left=Object(h.r)(t[n].left,h.q[e.units],a),i.right=Object(h.r)(t[n].right,h.q[e.units],a),t[n]=i)}),t.isModified=!Object(A.i)(JSON.parse(e.originalPreset),e),t}});class z{static getPresetsCategories(e,t,a){return z._controller&&z._controller.getPresetsCategories(e,t,a)||{}}static getModelType(){const e=Object(r.d)();return e===l.a.ILLUSTRATOR?c.d:e===l.a.INDESIGN?D:I}static isPresetNameInvalid(e,t){return z._controller&&z._controller.isPresetNameInvalid(e,t)}static generateNewPresetName(e,t){return z._controller&&z._controller.generateNewPresetName(e,t)}static createPresetModel(e,t){const a=z.getModelType();try{const n=z._controller&&z._controller.updatePreset(JSON.parse(JSON.stringify(e)),t);return n&&a.create(n)}catch(e){z._logger.error("Could not create preset model",e)}}static updatePreset(e,t,a){return z._controller&&z._controller.updatePreset(e,t,a)}static mostRecentlyUsedComparator(e,t){return z._controller&&z._controller.mostRecentlyUsedComparator(e,t)}}z._logger=i.a.get("PresetsController"),z._controller=s.a.get(o.a.PresetsControllerInterface)},"+cQd":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return c}));const n=e=>"RGB"===e.mode,i=e=>n(e)&&(!e.profileName||"sRGB IEC61966-2.1"===e.profileName),r=(e,t,a)=>{let n=(Math.round(e)<<16|Math.round(t)<<8|Math.round(a)).toString(16);for(;n.length<6;)n="0"+n;return("#"+n).toUpperCase()},s=(e,t,a)=>{const n=`application/vnd.adobe.${t}+json`;for(let i=0;i<e.representations.length;i++){const r=e.representations[i];if(r.type===n){const e=r.getValue(t,"data");if(e&&(!a||a(e)))return e}}},o=e=>t=>{const a=s(t,e);if(a){const e=a.adbeFont&&a.adbeFont.style.toLowerCase();return!e||e.includes("normal")||e.includes("regular")?a.fontFamily:`${a.fontFamily} ${a.adbeFont.style}`}},l={"application/vnd.adobe.element.color+dcx":e=>(e=>{const t=Array.isArray(e)?e.find(i)||e.find(n):e;return t&&t.value?r(t.value.r,t.value.g,t.value.b):""})(s(e,"color",i)||s(e,"color",n)),"application/vnd.adobe.element.characterstyle+dcx":o("characterstyle"),"application/vnd.adobe.element.paragraphstyle+dcx":o("paragraphstyle"),"application/vnd.adobe.element.font+dcx":e=>{const t=s(e,"font");return(null==t?void 0:t.name)||""}},c=e=>{const t=l[e.type];return t?t(e):""}},"+qR3":function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return u}));var n=a("EcEN"),i=a("jVml");const r=i.q+"-[a-f0-9]{8}-(?:[a-f0-9]{4}-){3}[a-f0-9]{12}",s=new RegExp(`^${r}$`),o=new RegExp(`(${r})`),l=()=>`${i.q}-${Object(n.v4)()}`,c=e=>s.test(e),d=e=>{const[t]=o.exec(e)||[];return t},u=e=>Object.assign({ownership:"private",groups:[],elements:[],documentationElements:[],removedElements:[],areElementsLoaded:!0,isLibraryLoaded:!0,isWritable:!0,isParentWritable:!0,details:{elementCount:0,documentationElementCount:0,removedElementCount:0}},e)},"/Iim":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return r}));var n=a("1BVQ");function i(e){return"updateRequired"in e}class r{constructor(e,t,a=8e3){this.vulcanInterface=e,this.VulcanMessage=t,this._timeout=a}_generateListener(e,t){const a=n=>{clearTimeout(this._timeoutId),this.removeListener(a,t),e(n)};return a}async _connectionInfoHandler(e){if(!e)throw new n.b("REQUEST_FAILED","No Vulcan response received");try{const t=JSON.parse(this.getPayload(e)),a={apiVersion:t.apiVersion,apiMinVersion:t.apiMinVersion,apiMaxVersion:t.apiMaxVersion};if(t.updateRequired)return Object.assign(Object.assign({},a),{updateRequired:t.updateRequired});if(t.serviceToken&&t.serviceHostname)return Object.assign(Object.assign({},a),{token:t.serviceToken,hostname:t.serviceHostname});throw new n.b("INVALID_RESPONSE","Incorrect data was returned via Vulcan")}catch(e){throw new n.b("INVALID_RESPONSE","Incorrect data was returned via Vulcan",void 0,e)}}_launchProcessHandler(e){if(!e)throw new n.b("REQUEST_FAILED","No Vulcan response received");return this._requestConnectionInfo()}_launchProcess(){return new Promise(async e=>{const t=this._generateListener(t=>e(this._launchProcessHandler(t)),this.getMessageType("INITIALIZE"));this._timeoutId=setTimeout(t,this._timeout),this.sendMessage(t,this.getMessageType("INITIALIZE")),this.launchApp(t)})}_requestConnectionInfo(){return new Promise(e=>{const t=this._generateListener(t=>e(this._connectionInfoHandler(t)));this._timeoutId=setTimeout(t,this._timeout),this.sendMessage(t)})}async connect(){return this._requestConnectionInfo().catch(async e=>{if(!await this.isAppRunning().catch(()=>!1))return this._launchProcess();throw e})}getMessageType(e){return this.messageTypes[e]}}},"/Z0y":function(e,t,a){"use strict";a.d(t,"a",(function(){return qt}));var n=a("XAHj");a("GN7m");var i={staging:{hostname:"ccx-melville-stage.adobe.io",invitation_hostname:"invitations-stage.adobe.io",teams_hostname:"ccprojects-stage.adobe.io",platform_hostname:"platform-cs-stage.adobe.io"},production:{hostname:"libraries.adobe.io",invitation_hostname:"invitations.adobe.io",teams_hostname:"ccprojects.adobe.io",platform_hostname:"platform-cs.adobe.io"}},r=(a("fEyC"),a("Gd8k"),a("swlI")),s=a("Ass+"),o=a("rKIJ"),l=a("brHe"),c=a("ttwd");function d(e){return Symbol.for(e)}var u=new function e(t){var a=this;a._currentContext=t?new Map(t):new Map,a.getValue=function(e){return a._currentContext.get(e)},a.setValue=function(t,n){var i=new e(a._currentContext);return i._currentContext.set(t,n),i},a.deleteValue=function(t){var n=new e(a._currentContext);return n._currentContext.delete(t),n}},h=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,i,r=a.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(a=r.return)&&a.call(r)}finally{if(i)throw i.error}}return s},p=function(e,t,a){if(a||2===arguments.length)for(var n,i=0,r=t.length;i<r;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},m=function(){function e(){}return e.prototype.active=function(){return u},e.prototype.with=function(e,t,a){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];return t.call.apply(t,p([a],h(n),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),g=a("zh6c"),f=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var v=function(e){var t=new Set([e]),a=new Set,n=e.match(f);if(!n)return function(){return!1};var i=+n[1],r=+n[2],s=+n[3];if(null!=n[4])return function(t){return t===e};function o(e){return a.add(e),!1}function l(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(a.has(e))return!1;var n=e.match(f);if(!n)return o(e);var c=+n[1],d=+n[2],u=+n[3];return null!=n[4]||i!==c?o(e):0===i?r===d&&s<=u?l(e):o(e):r<=d?l(e):o(e)}}("1.7.0"),y="1.7.0".split(".")[0],b=Symbol.for("opentelemetry.js.api."+y),E=g.a;function _(e,t,a,n){var i;void 0===n&&(n=!1);var r=E[b]=null!==(i=E[b])&&void 0!==i?i:{version:"1.7.0"};if(!n&&r[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return a.error(s.stack||s.message),!1}if("1.7.0"!==r.version){s=new Error("@opentelemetry/api: Registration of version v"+r.version+" for "+e+" does not match previously registered API v1.7.0");return a.error(s.stack||s.message),!1}return r[e]=t,a.debug("@opentelemetry/api: Registered a global for "+e+" v1.7.0."),!0}function w(e){var t,a,n=null===(t=E[b])||void 0===t?void 0:t.version;if(n&&v(n))return null===(a=E[b])||void 0===a?void 0:a[e]}function I(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v1.7.0.");var a=E[b];a&&delete a[e]}var x,S=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,i,r=a.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(a=r.return)&&a.call(r)}finally{if(i)throw i.error}}return s},O=function(e,t,a){if(a||2===arguments.length)for(var n,i=0,r=t.length;i<r;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},C=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return P("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return P("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return P("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return P("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return P("verbose",this._namespace,e)},e}();function P(e,t,a){var n=w("diag");if(n)return a.unshift(t),n[e].apply(n,O([],S(a),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(x||(x={}));var N,A=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,i,r=a.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(a=r.return)&&a.call(r)}finally{if(i)throw i.error}}return s},T=function(e,t,a){if(a||2===arguments.length)for(var n,i=0,r=t.length;i<r;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},M=function(){function e(){function e(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=w("diag");if(n)return n[e].apply(n,T([],A(t),!1))}}var t=this;t.setLogger=function(e,a){var n,i,r;if(void 0===a&&(a={logLevel:x.INFO}),e===t){var s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(n=s.stack)&&void 0!==n?n:s.message),!1}"number"==typeof a&&(a={logLevel:a});var o=w("diag"),l=function(e,t){function a(a,n){var i=t[a];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<x.NONE?e=x.NONE:e>x.ALL&&(e=x.ALL),t=t||{},{error:a("error",x.ERROR),warn:a("warn",x.WARN),info:a("info",x.INFO),debug:a("debug",x.DEBUG),verbose:a("verbose",x.VERBOSE)}}(null!==(i=a.logLevel)&&void 0!==i?i:x.INFO,e);if(o&&!a.suppressOverrideMessage){var c=null!==(r=(new Error).stack)&&void 0!==r?r:"<failed to generate stacktrace>";o.warn("Current logger will be overwritten from "+c),l.warn("Current logger will overwrite one already registered from "+c)}return _("diag",l,t,!0)},t.disable=function(){I("diag",t)},t.createComponentLogger=function(e){return new C(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),L=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,i,r=a.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(a=r.return)&&a.call(r)}finally{if(i)throw i.error}}return s},R=function(e,t,a){if(a||2===arguments.length)for(var n,i=0,r=t.length;i<r;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},D=new m,z=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return _("context",e,M.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,a){for(var n,i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];return(n=this._getContextManager()).with.apply(n,R([e,t,a],L(i),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return w("context")||D},e.prototype.disable=function(){this._getContextManager().disable(),I("context",M.instance())},e}(),k=z.getInstance(),j=M.instance(),B=(N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),V=function(){function e(){}return e.prototype.createHistogram=function(e,t){return Y},e.prototype.createCounter=function(e,t){return X},e.prototype.createUpDownCounter=function(e,t){return Q},e.prototype.createObservableGauge=function(e,t){return ee},e.prototype.createObservableCounter=function(e,t){return Z},e.prototype.createObservableUpDownCounter=function(e,t){return te},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),F=function(){},H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.add=function(e,t){},t}(F),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.add=function(e,t){},t}(F),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.record=function(e,t){},t}(F),W=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t}(W),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t}(W),K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t}(W),J=new V,X=new H,Y=new G,Q=new U,Z=new q,ee=new $,te=new K;var ae=new(function(){function e(){}return e.prototype.getMeter=function(e,t,a){return J},e}()),ne=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return _("metrics",e,M.instance())},e.prototype.getMeterProvider=function(){return w("metrics")||ae},e.prototype.getMeter=function(e,t,a){return this.getMeterProvider().getMeter(e,t,a)},e.prototype.disable=function(){I("metrics",M.instance())},e}().getInstance(),ie=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),re={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},se={set:function(e,t,a){null!=e&&(e[t]=a)}},oe=d("OpenTelemetry Baggage Key");function le(e){return e.getValue(oe)||void 0}function ce(){return le(z.getInstance().active())}function de(e,t){return e.setValue(oe,t)}function ue(e){return e.deleteValue(oe)}var he=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,i,r=a.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(a=r.return)&&a.call(r)}finally{if(i)throw i.error}}return s},pe=function(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],n=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},me=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){var t=he(e,2);return[t[0],t[1]]}))},e.prototype.setEntry=function(t,a){var n=new e(this._entries);return n._entries.set(t,a),n},e.prototype.removeEntry=function(t){var a=new e(this._entries);return a._entries.delete(t),a},e.prototype.removeEntries=function(){for(var t,a,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=new e(this._entries);try{for(var s=pe(n),o=s.next();!o.done;o=s.next()){var l=o.value;r._entries.delete(l)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(t)throw t.error}}return r},e.prototype.clear=function(){return new e},e}();Symbol("BaggageEntryMetadata"),M.instance();function ge(e){return void 0===e&&(e={}),new me(new Map(Object.entries(e)))}var fe,ve=new ie,ye=function(){function e(){this.createBaggage=ge,this.getBaggage=le,this.getActiveBaggage=ce,this.setBaggage=de,this.deleteBaggage=ue}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return _("propagation",e,M.instance())},e.prototype.inject=function(e,t,a){return void 0===a&&(a=se),this._getGlobalPropagator().inject(e,t,a)},e.prototype.extract=function(e,t,a){return void 0===a&&(a=re),this._getGlobalPropagator().extract(e,t,a)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){I("propagation",M.instance())},e.prototype._getGlobalPropagator=function(){return w("propagation")||ve},e}().getInstance();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(fe||(fe={}));var be={traceId:"00000000000000000000000000000000",spanId:"0000000000000000",traceFlags:fe.NONE},Ee=function(){function e(e){void 0===e&&(e=be),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),_e=d("OpenTelemetry Context Key SPAN");function we(e){return e.getValue(_e)||void 0}function Ie(){return we(z.getInstance().active())}function xe(e,t){return e.setValue(_e,t)}function Se(e){return e.deleteValue(_e)}function Oe(e,t){return xe(e,new Ee(t))}function Ce(e){var t;return null===(t=we(e))||void 0===t?void 0:t.spanContext()}var Pe=/^([0-9a-f]{32})$/i,Ne=/^[0-9a-f]{16}$/i;function Ae(e){return a=e.traceId,Pe.test(a)&&"00000000000000000000000000000000"!==a&&(t=e.spanId,Ne.test(t)&&"0000000000000000"!==t);var t,a}function Te(e){return new Ee(e)}var Me=z.getInstance(),Le=function(){function e(){}return e.prototype.startSpan=function(e,t,a){if(void 0===a&&(a=Me.active()),Boolean(null==t?void 0:t.root))return new Ee;var n,i=a&&Ce(a);return"object"==typeof(n=i)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&Ae(i)?new Ee(i):new Ee},e.prototype.startActiveSpan=function(e,t,a,n){var i,r,s;if(!(arguments.length<2)){2===arguments.length?s=t:3===arguments.length?(i=t,s=a):(i=t,r=a,s=n);var o=null!=r?r:Me.active(),l=this.startSpan(e,i,o),c=xe(o,l);return Me.with(c,s,void 0,l)}},e}();var Re=new Le,De=function(){function e(e,t,a,n){this._provider=e,this.name=t,this.version=a,this.options=n}return e.prototype.startSpan=function(e,t,a){return this._getTracer().startSpan(e,t,a)},e.prototype.startActiveSpan=function(e,t,a,n){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Re},e}(),ze=new(function(){function e(){}return e.prototype.getTracer=function(e,t,a){return new Le},e}()),ke=function(){function e(){}return e.prototype.getTracer=function(e,t,a){var n;return null!==(n=this.getDelegateTracer(e,t,a))&&void 0!==n?n:new De(this,e,t,a)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:ze},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,a){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t,a)},e}(),je={context:k,diag:j,metrics:ne,propagation:ye,trace:function(){function e(){this._proxyTracerProvider=new ke,this.wrapSpanContext=Te,this.isSpanContextValid=Ae,this.deleteSpan=Se,this.getSpan=we,this.getActiveSpan=Ie,this.getSpanContext=Ce,this.setSpan=xe,this.setSpanContext=Oe}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=_("trace",this._proxyTracerProvider,M.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return w("trace")||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){I("trace",M.instance()),this._proxyTracerProvider=new ke},e}().getInstance()};function Be(e){return(t,a,n)=>{const i=n.value;return n.value=function(...t){const a=je.trace.getTracer("cclibraries-jsapi"),n=je.context.active();return a.startActiveSpan(e,{},n,e=>{const a=i.apply(this,t);return Promise.resolve(a).then(()=>{e.end()}).catch(()=>{e.end()}),a})},n}}var Ve=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};const Fe={read:"team_view",all:"team_edit"},He=["createLibrary","removeLibrary","unfollowLibrary","leaveLibrary","copyLibrary","moveLibrary"];class Ue extends o.a{constructor(){super(...arguments),this._actionMappers={createLibrary:e=>this._createLibraryActionMap(e),copyLibrary:e=>this._createLibraryActionMap(e),removeLibrary:async e=>(await this._removeLibrary(),e),unfollowLibrary:async e=>(await this._unfollowLibrary(),e),leaveLibrary:async e=>(await this._leaveLibrary(),e),moveLibrary:async e=>{const t=await this._moveLibrary();return Object.assign(Object.assign({},e),{data:t,originalAction:e})}},this._createLibraryActionMap=async e=>{const t=await this._createLibrary(e);return Object.assign(Object.assign({},e),{type:"update",data:t,originalAction:e})}}supportsAction(e){return He.includes(e.name)}_createLibrary(e){return new Promise((t,a)=>{var i,r;const{name:s,team:o,roles:c}=null!==(i=e.data)&&void 0!==i?i:{},{permissionInheritance:d,source:u,includeAppMetadata:h}=null!==(r=e.flags)&&void 0!==r?r:{},p={name:s,roles:c,source:null==u?void 0:u.assetId,parent_assetId:null==o?void 0:o.id,access:Fe[d]||void 0,includeResources:h?[{relType:"http://ns.adobe.com/adobecloud/rel/metadata/application"},{relType:"http://ns.adobe.com/adobecloud/rel/primary"}]:void 0},m=this._driver.fetch("/api/v1/libraries?invocation_mode=async",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),g=new n.a(this._driver,m);g.on("change",(e,n)=>{if(e)if(g.error)a(g.error);else if(n){const e=Object(l.h)(n);e.isWritable=!0,e.isParentWritable=!0,t(e)}else t(void 0)})})}_removeLibrary(){return this._driver.fetch("/api/v1/libraries/"+this._library.assetId,{method:"DELETE"})}_unfollowLibrary(){var e;return this._driver.fetch("/api/v1/libraries/bookmarks/"+(null===(e=this._library.bookmark)||void 0===e?void 0:e.id),{method:"DELETE"})}async _leaveLibrary(){var e,t;const a=null===(e=this._driver.config.user)||void 0===e?void 0:e.id,n=await this._driver.fetch(`https://${this._driver.driverConfig.invitation_hostname}/api/v4/share/${this._library.assetId}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({collaborators:[{action:"remove",id:a}]})});if(null===(t=(await n.json()).collaborators)||void 0===t?void 0:t.find(e=>e.statusCode>300))throw Object(c.b)(n);return this._unfollowLibrary()}_moveLibrary(){return this._driver.moveLibrary(this._library.assetId,this.action.data.team.id,this.action.data.owner)}}Ve([Be("cclibraries-cloudDriver-createLibrary")],Ue.prototype,"_createLibrary",null);var Ge=a("NHlq");class We extends Ge.a{async _doMoveCopyRequest(e,t,a,n){const i=this._library.assetId,r=a.assetId,s=await this._driver.fetch(`/api/v1/libraries/${r}/elements`,{method:"POST",headers:{"Content-Type":"application/json","If-Match":a.etag},body:JSON.stringify({[e?"self":"source"]:{id:i,elements:n,"if-match":this._library.etag}})});return{elements:(await s.json()).elements.map(l.f),etag:s.headers.get("etag"),sourceEtag:s.headers.get("x-source-etag")}}}var qe=a("k/Li"),$e=a("El4k"),Ke=a("P+lh"),Je=a("D3dN"),Xe=a("1BVQ"),Ye=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};const Qe=["updateLibrary","createElement","updateElement","removeElement","restoreElement","deleteElement","createGroup","removeGroup"];function Ze(e,t){return Object.assign(Object.assign({},e),{data:t,originalAction:e})}const et={updateLibrary:(e,t)=>Ze(e,Object(Je.a)(Object(l.h)(t,!1,!1),["documentId","documentType","roles"])),createElement:(e,t)=>Ze(e,Object(l.f)(t.elements[0])),updateElement:(e,t)=>Ze(e,Object(l.f)(t.elements[0])),restoreElement:e=>e,removeElement:e=>e,deleteElement:e=>e,createGroup:(e,t)=>Ze(e,Object(l.g)(t)),removeGroup:e=>e};class tt extends qe.a{constructor(){super(...arguments),this._baseLibraryOperationPath="/api/v1/libraries/"+this._library.assetId,this._actionMappers={updateLibrary:e=>({method:"PUT",path:"metadata",body:Object(l.e)(e.data)}),createElement:e=>({method:"POST",path:"elements",body:Object(l.c)(e.data,this._driver.getClientInfo())}),updateElement:e=>({method:"PUT",path:"elements/metadata",body:{elements:[Object(l.b)(Object.assign({id:Object($e.b)(e.path)},e.data))]}}),removeElement:e=>({method:"DELETE",path:"elements/"+Object($e.b)(e.path)}),restoreElement:e=>({method:"POST",path:"archive",body:{elementIds:[""+e.data.id]}}),deleteElement:e=>({method:"DELETE",path:"elements/"+Object($e.b)(e.path),query_params:{permanent:"true"}}),createGroup:e=>({method:"POST",path:"groups",body:Object(l.d)(e.data,this._driver.getClientInfo())}),removeGroup:e=>{var t;return{method:"DELETE",path:"groups/"+Object($e.c)(e.path),query_params:(null===(t=e.flags)||void 0===t?void 0:t.includeElements)?{include_contents:"true"}:void 0}}},this._actions=[]}async execute(){const e=this._actions.map(e=>this._actionMappers[e.name](e)),t=Object(Je.c)(e),a=await this._driver.fetch(this._baseLibraryOperationPath,{method:"PATCH",headers:{"Content-Type":"application/json","If-Match":this._library.etag},body:JSON.stringify({requests:t.map(e=>Object.assign(Object.assign({},e),{path:`${this._baseLibraryOperationPath}/${e.path}`}))})}),{responses:n}=await a.json();if(!Array.isArray(n)||n.length!==this._actions.length)throw new Xe.b("INVALID_RESPONSE","Malformed batch response.",this._library.id);let i=this._actions.map((e,t)=>et[e.name](e,n[t]));return i=Object(Ke.c)(i),{actions:i,etag:a.headers.get("ETag")}}supportsAction(e){return function(e){return Qe.includes(e.name)}(e)}}Ye([qe.b,Be("cclibraries-cloudDriver-batchOperation")],tt.prototype,"execute",null);var at=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};class nt extends qe.a{supportsAction(e){return"updateElementContent"===e.name}addAction(e){return(!this._actions[0]||this._actions[0].path===e.path)&&super.addAction(e)}async execute(){const e=this._actions[this._actions.length-1],t=await this._updateElementContent(Object($e.b)(e.path),e.data),a=await t.json(),n=Object(l.f)(a.elements[0]);return{actions:this._actions.map((e,t)=>t!==this._actions.length-1?Object.assign(Object.assign({},e),{type:"no-op",originalAction:e}):Object.assign(Object.assign({},e),{data:n,originalAction:e})),etag:t.headers.get("ETag")}}_updateElementContent(e,t){return Object(Je.b)(t.representations),this._driver.fetch(`/api/v1/libraries/${this._library.assetId}/elements/${e}/representations`,{method:"PUT",headers:{"If-Match":this._library.etag,"Content-Type":"application/json"},body:JSON.stringify(Object(l.c)(t,this._driver.getClientInfo()))})}}at([qe.b,Be("cclibraries-cloudDriver-updateElementContent")],nt.prototype,"execute",null);var it=a("Q5Fl");class rt extends it.a{constructor(){super(...arguments),this._actionMappers={uploadComponent:async e=>{const t=JSON.parse(await this._driver.stageRepresentationForCommit(e.library,e.data.file,e.data.type));return Object.assign(Object.assign({},e),{data:t,originalAction:e})}}}supportsAction(e){return"uploadComponent"===e.name}}var st=a("LuvD");function ot(e){const t=e.match(/^<(.*)>;/);if(!t)return;const a={href:t[1]},n=e.matchAll(/\s([\w:]*)="([^"]*)"[;,]?/g);for(const e of n){const t=e[1],n=e[2];a[t]=lt(n)}return a}function lt(e){if("true"===e||"false"===e)return"true"===e;const t=+e;return!isNaN(t)?t:e}var ct=a("A8Ak"),dt=a("KysP"),ut=(a("OG+L"),a("jVml")),ht=a("cr+I"),pt=a("m4Z2"),mt=a("K1h8"),gt=a("lWS7"),ft=a("aCH8"),vt=a.n(ft),yt=a("FpIF"),bt=a("qPad"),Et=a.n(bt),_t=a("EcEN"),wt=function(e){return this instanceof wt?(this.v=e,this):new wt(e)},It=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,a=e[Symbol.asyncIterator];return a?a.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=e[a]&&function(t){return new Promise((function(n,i){(function(e,t,a,n){Promise.resolve(n).then((function(t){e({value:t,done:a})}),t)})(n,i,(t=e[a](t)).done,t.value)}))}}},xt=function(e){var t,a;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(a=!a)?{value:wt(e[n](t)),done:"return"===n}:i?i(t):t}:i}},St=function(e,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=a.apply(e,t||[]),r=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(a,n){r.push([e,t,a,n])>1||o(e,t)}))})}function o(e,t){try{(a=i[e](t)).value instanceof wt?Promise.resolve(a.value.v).then(l,c):d(r[0][2],a)}catch(e){d(r[0][3],e)}var a}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),r.shift(),r.length&&o(r[0][0],r[0][1])}};const Ot={field:"modifiedDate",direction:"descending"},Ct={modifiedDate:"modified_date",name:"name"};class Pt{constructor(e){this._driver=e}routePublicLibraryRequestIfNeeded(e,t,a,...n){return"public"===e.ownership?t(e.data.publicLinkId,this.getLibraryParams(e),...n):a(e.assetId,...n)}getLibraryParams(e){return{modifiedDate:e.modified,areElementsLoaded:e.areElementsLoaded,elements:e.data.elements}}getLibraryByPublicLinkId(e,t,a={}){var n,i;return St(this,arguments,(function*(){try{const n=yield wt(this._getLibrary(e));if((null==t?void 0:t.areElementsLoaded)&&(n.elements=t.elements),yield yield wt(n),(null==t?void 0:t.areElementsLoaded)&&t.modifiedDate===n.modifiedDate)return yield wt(void 0);yield wt(yield*xt(It(this._getAllElements(e,Object.assign({},a.elementParams)))))}catch(e){if(!(null===(i=null===(n=a.elementParams)||void 0===n?void 0:n.abortController)||void 0===i?void 0:i.signal.aborted))throw e}}))}getElementsByPublicLinkId(e,t,a=Ot,n=100,i){return St(this,arguments,(function*(){const t=`${"descending"===a.direction?"-":""}${Ct[a.field]}`,r={limit:n,orderBy:t,selector:["default","representations","details"]};yield wt(yield*xt(It(this.fetchAllPages(`/api/v1/public/libraries/${e}/elements?${Object(ht.stringify)(r,{arrayFormat:"comma"})}`,e=>e.elements.map(l.f),i))))}))}getRemovedElementsByPublicLinkId(e,t,a=Ot,n=100,i){return St(this,arguments,(function*(){return yield wt(void 0)}))}getDocumentationElementsByPublicLinkId(e,t,a=Ot,n=100,i){return St(this,arguments,(function*(){return yield wt(void 0)}))}getElement(e,t,a){return this.fetch(`/api/v1/public/libraries/${e}/elements/${a}?selector=default,representations,details,tags`).then(e=>e.json()).then(e=>Object(l.f)(e))}_getLibrary(e){return this.fetch(`/api/v1/public/libraries/${e}?selector=default,rendition_grid,details`).then(e=>e.json()).then(e=>Object(l.h)(e,!0))}_getAllElements(e,t){var a,n,i;return St(this,arguments,(function*(){var r,s,o,l;const c=[["elements","getElementsByPublicLinkId"],["documentationElements","getDocumentationElementsByPublicLinkId"],["removedElements","getRemovedElementsByPublicLinkId"]],d={};for(const[m,g]of c)if(null===(a=null==t?void 0:t.types)||void 0===a?void 0:a.includes(m))try{for(var u,h=!0,p=(s=void 0,It(this[g](e,void 0,null==t?void 0:t.sort,void 0,null===(n=null==t?void 0:t.abortController)||void 0===n?void 0:n.signal)));!(r=(u=yield wt(p.next())).done);){l=u.value,h=!1;try{const e=l;d[m]=d[m]||[],null===(i=d[m])||void 0===i||i.push(...e),(null==t?void 0:t.loadProgressively)&&(yield yield wt({[m]:d[m]}))}finally{h=!0}}}catch(e){s={error:e}}finally{try{h||r||!(o=p.return)||(yield wt(o.call(p)))}finally{if(s)throw s.error}}yield yield wt(Object.assign({areElementsLoaded:!0},t.loadProgressively?{}:d))}))}fetchAllPages(e,t,a){var n,i;return St(this,arguments,(function*(){let r,s=e;for(;s;){const e=yield wt(this.fetch(s,{signal:a}).then(e=>e.json()));yield yield wt(t(e)),null!=r||(r=e.total_count);const o=null===(i=null===(n=e._links)||void 0===n?void 0:n.page)||void 0===i?void 0:i.href,l=e._page,c=o&&Et()(o),d=parseInt(l.start)+l.count;if(!c||!l||d>r)return yield wt(void 0);s=c.fill({orderBy:l.orderBy,start:""+d,limit:""+l.count,selector:"default,representations,details"})}}))}fetch(e,t){var a,n;return(null===(a=this._driver.config.user)||void 0===a?void 0:a.id)&&((t=t||{}).headers=t.headers||{},t.headers["x-gw-ims-user-id"]=null===(n=this._driver.config.user)||void 0===n?void 0:n.id),this._driver.fetch(e,t)}}var Nt=a("sGTX"),At=a("loW4");class Tt extends At.a{constructor(e){super(),this._driver=e,this._onChangeCallback=e=>{var t;null===(t=this._changeCallback)||void 0===t||t.call(this,e)}}connect(){var e;this._librariesToMonitor=this._driver.createAssetLinkList(),null===(e=this._librariesToMonitor)||void 0===e||e.on("notified",this._onChangeCallback)}disconnect(){var e,t;this._changeCallback=void 0,null===(e=this._librariesToMonitor)||void 0===e||e.clear(),null===(t=this._librariesToMonitor)||void 0===t||t.off("notified",this._onChangeCallback),this._librariesToMonitor=void 0}get isConnected(){return!!this._librariesToMonitor}async setWatchedLibraries(e,t){if(!this._librariesToMonitor)return;const a=this._librariesToMonitor,n=new Set(e.map(e=>e.assetId));a.monitoredAssetIDs.forEach(e=>!n.has(e)&&a.removeAssetID(e)),n.forEach(e=>e&&a.addAssetID(e)),this._changeCallback=t}async addWatchedLibrary(e){var t;e.assetId&&(null===(t=this._librariesToMonitor)||void 0===t||t.addAssetID(e.assetId))}removeWatchedLibrary(e){var t;e.assetId&&(null===(t=this._librariesToMonitor)||void 0===t||t.removeAssetID(e.assetId))}async addLibrariesSyncGroupListener(e){var t;if(this._syncGroupListener||!e)return;this._syncGroupListener={notify:e};const a=await(null===(t=this._driver.sam)||void 0===t?void 0:t.hostAssetContext.getAssetWithRepoPath(ut.u));a?(this._syncGroupListener.asset=a,a.on("change",e)):delete this._syncGroupListener}removeLibrariesSyncGroupListener(){if(this._syncGroupListener){const{asset:e,notify:t}=this._syncGroupListener;null==e||e.off("change",t),delete this._syncGroupListener}}}var Mt=a("sfL4");class Lt{constructor(){this._data=new Map}get length(){return this._data.size}key(e){return Array.from(this._data.keys())[e]}getItem(e){return this._data.get(e)}setItem(e,t){this._data.set(e,t)}removeItem(e){this._data.delete(e)}clear(){this._data.clear()}}class Rt{constructor(e,t){this._settings=new Map,this._storageKey=e,this._storage=null!=t?t:"undefined"!=typeof window?window.localStorage:new Lt,this._load()}entries(){return this._settings.entries()}setItem(e,t){this._settings.set(e,t),this._save()}getItem(e){return this._settings.get(e)}_setItem(e,t){this._storage.setItem(e,t)}_load(){const e=this._storage.getItem(this._storageKey);if(e)try{this._settings=new Map(JSON.parse(e))}catch(e){gt.a.error("Error restoring previous settings."),this._storage.removeItem(this._storageKey)}}_save(){const e=JSON.stringify(Array.from(this._settings.entries()));this._setItem(this._storageKey,e)}}function Dt(e){var t;return{name:e.name,id:e.id,owner:e.storageAssignee,ownerName:null!==(t=e.storageAssignee.displayName)&&void 0!==t?t:"",isWritable:!0}}function zt(e){return{type:e.type,angle:e.angle,stops:e.stops}}var kt=a("w8hQ"),jt=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},Bt=function(e){return this instanceof Bt?(this.v=e,this):new Bt(e)},Vt=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,a=e[Symbol.asyncIterator];return a?a.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=e[a]&&function(t){return new Promise((function(n,i){(function(e,t,a,n){Promise.resolve(n).then((function(t){e({value:t,done:a})}),t)})(n,i,(t=e[a](t)).done,t.value)}))}}},Ft=function(e){var t,a;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(a=!a)?{value:Bt(e[n](t)),done:"return"===n}:i?i(t):t}:i}},Ht=function(e,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=a.apply(e,t||[]),r=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(a,n){r.push([e,t,a,n])>1||o(e,t)}))})}function o(e,t){try{(a=i[e](t)).value instanceof Bt?Promise.resolve(a.value.v).then(l,c):d(r[0][2],a)}catch(e){d(r[0][3],e)}var a}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),r.shift(),r.length&&o(r[0][0],r[0][1])}};const Ut={field:"modifiedDate",direction:"descending"},Gt={modifiedDate:"modified_date",name:"name"},Wt=["off","error","warn","info","debug"];class qt extends r.a{constructor(){super(...arguments),this._fetch=fetch,this._notificationManager=new Tt(this),this._assets=new Map,this._operationTypes=[We,Ue,tt,nt,rt],this._publicExt=new Pt(this)}getLibrary(e,t){return this._publicExt.routePublicLibraryRequestIfNeeded(e,this._publicExt.getLibraryByPublicLinkId.bind(this._publicExt),this.getLibraryByAssetId.bind(this),t)}getElements(e,...t){return this._publicExt.routePublicLibraryRequestIfNeeded(e,this._publicExt.getElementsByPublicLinkId.bind(this._publicExt),this._getElementsByAssetId.bind(this),...t)}getRemovedElements(e,...t){return this._publicExt.routePublicLibraryRequestIfNeeded(e,this._publicExt.getRemovedElementsByPublicLinkId.bind(this._publicExt),this._getRemovedElementsByAssetId.bind(this),...t)}getDocumentationElements(e,...t){return this._publicExt.routePublicLibraryRequestIfNeeded(e,this._publicExt.getDocumentationElementsByPublicLinkId.bind(this._publicExt),this._getDocumentationElementsByAssetId.bind(this),...t)}getElement(e,t){return this._publicExt.routePublicLibraryRequestIfNeeded(e,this._publicExt.getElement.bind(this._publicExt),this._getElement.bind(this),t)}async _handleConnected(e){var t,a,n,i,r,s,o,l;const c=Object(st.b)(e.token);this._localStorage=new Rt(Object(yt.d)(null==c?void 0:c.user,"cloud"),e.localStorage),this._env=e.env,this._token=e.token,this._refreshAccessToken=e.refreshAccessToken,this._clientId=null===(t=null==c?void 0:c.user)||void 0===t?void 0:t.clientId,this._analyticsEnabled=(null===(n=null===(a=e.config)||void 0===a?void 0:a.processInfo)||void 0===n?void 0:n.analyticsEnabled)||!1,this._codeVersion=null===(r=null===(i=e.config)||void 0===i?void 0:i.processInfo)||void 0===r?void 0:r.codeVersion,this._fetch=e.fetch||fetch;try{this._sam=await Object(pt.m)({USER_ID:null===(s=null==c?void 0:c.user)||void 0===s?void 0:s.id,CLIENT_ID:this._clientId,ACCESS_TOKEN:this._token,ENVIRONMENT:"staging"===this._env?pt.f.Stage:pt.f.Production,HOST_PRODUCT_DATA:{PRODUCT_ID:"CCLibraries",PRODUCT_LOCATION:"cc-libraries-js/1.0"},DISABLE_ONS:null!==(o=e.samDisableOns)&&void 0!==o&&o,HIGH_PRIORITY_RAPI_REQUESTS:!0},{persistentCache:e.samPersistentCache,refreshAccessToken:e.refreshAccessToken}),this._sam.on(pt.h,this._samLoggingHandler)}catch(t){throw(e.handleConnectRetries||0)<3&&19===t.code&&(await(null===(l=this._refreshAccessToken)||void 0===l?void 0:l.call(this)),e.handleConnectRetries=(e.handleConnectRetries||0)+1,this._handleConnected(e)),t}this._notificationManager.connect(),await this.getConfiguration()}_handleDisconnected(){var e,t;null===(e=this._sam)||void 0===e||e.off(pt.h,this._samLoggingHandler),null===(t=this._notificationManager)||void 0===t||t.disconnect(),this._assets.clear()}_samLoggingHandler(e){e.logLevel&&gt.a[Wt[e.logLevel]]("[SAM] "+e.message)}async getConfiguration(){const e=this.getLocalSettings(),t=Object(st.b)(this._token);return this._config=new dt.a(Object.assign(Object.assign(Object.assign({},e),t),{environment:this._env,processInfo:{analyticsEnabled:this._analyticsEnabled,codeVersion:this._codeVersion,syncingEnabled:!0}})),this.config}get driverConfig(){return i[this._env]}get sam(){return this._sam}fetchAccessToken(e,t,a,n){return Promise.resolve({access_token:this._token,expires_in:Object(st.a)(this._token)})}async getLibraryById(e){if(!e)return;const{value:t}=await this.getLibraryByAssetId(e).next();return t}getLibraryByAssetId(e,t={}){var a,n;return Ht(this,arguments,(function*(){if(!e)return yield Bt({});let i=t.etag;const r=["default"];if(t.getRenditionGrid&&r.push("rendition_grid"),t.getAppMetadata&&r.push("app_metadata"),!t.elementParams){try{yield yield Bt(this._getLibrary(e,i,r))}catch(e){if(!(e instanceof c.a&&"NOT_MODIFIED"===e.code))throw e}return yield Bt(void 0)}const s=this._getManifest(e,t);if(s.then(()=>{var e;const a=null===(e=t.elementParams)||void 0===e?void 0:e.abortController;a&&(a.abort(),mt.a.give(a,ut.h))}),null===(a=t.elementParams)||void 0===a?void 0:a.loadProgressively)try{try{const t=yield Bt(this._getLibrary(e,i,r));i=t.etag,yield yield Bt(t)}catch(e){if(!(e instanceof c.a&&"NOT_MODIFIED"===e.code&&t.elementParams))throw e}yield Bt(yield*Ft(Vt(this._getAllElements(e,Object.assign(Object.assign({},t.elementParams),{etag:i})))))}catch(e){if(!((null===(n=t.elementParams.abortController)||void 0===n?void 0:n.signal.aborted)||e instanceof c.a&&"NOT_FOUND"===e.code))throw e}yield yield Bt(s)}))}_getLibrary(e,t,a=["default"]){const n={};t&&(n["if-none-match"]=t);const i=new URLSearchParams({selector:a});a.includes("app_metadata")&&i.set("randomizer",Object(_t.v4)());const r=`/api/v1/libraries/${e}?${i.toString()}`;return this.fetch(r,{headers:n}).then(e=>e.json()).then(e=>Object(l.h)(e,this._options.readOnly,null==a?void 0:a.includes("rendition_grid")))}async getAssetWithCloudID(e){var t;const a=this._assets.get(e)||await(null===(t=this._sam)||void 0===t?void 0:t.hostAssetContext.getAssetWithCloudID(e));return this._assets.set(e,a),a}createAssetLinkList(){var e;return null===(e=this._sam)||void 0===e?void 0:e.assetLinkManager.createList()}async _getManifest(e,t){let a;try{a=await this.getAssetWithCloudID(e)}catch(e){throw Object(c.d)(e)}if(!a||(null==a?void 0:a.isDiscarded))throw Object(c.c)(404);try{const e=[a.manifest];t.getAppMetadata&&e.push(a.appMetadata),await Promise.all(e.map(e=>!e.isLoaded&&e.load()));const n=Object(ct.c)(a);return a.manifest.unload(),n}catch(e){throw Object(c.d)(e)}}getLibraries(e,t=!0){return Ht(this,arguments,(function*(){const a={owner:["private","incoming"],selector:t?["rendition_grid"]:["default"]},n={owner:["public"],selector:t?["rendition_grid","details"]:["default","details"]},i=[this.getLibrariesList(e,a),this.getLibrariesList(e,n)];yield Bt(yield*Ft(Vt(Object(Mt.a)(...i))))}))}getLibrariesList(e,t){return Ht(this,arguments,(function*(){yield Bt(yield*Ft(Vt(this.fetchAllPages(this._getLibrariesURL(t),this._getLibrariesResponseMapper(t),e))))}))}getLibrariesPage(e,t){return Ht(this,arguments,(function*(){yield Bt(yield*Ft(Vt(this.fetchOnePage(this._getLibrariesURL(t),this._getLibrariesResponseMapper(t),e,!1))))}))}async getPresignedDownloadUrl(e){const t=await this.fetch(e),a=await t.json();return Object(ct.d)(a)}async loadVersionHistory(e){var t;const a=null===(t=this._sam)||void 0===t?void 0:t.hostAssetContext,n=await a.getAssetWithCloudID(e);let i;return await new Promise((e,t)=>{i=n.versions.getList(pt.d.default,void 0,{loadAllPages:!0}),i.on(pt.l,(function a(){(null==i?void 0:i.status)!==pt.a.Loading&&(null==i||i.off(pt.l,a),(null==i?void 0:i.errors)&&t(),e())}))}),null==i?void 0:i.items.map(t=>Object(ct.f)(e,t))}async loadVersion(e,t){var a;const n=null===(a=this._sam)||void 0===a?void 0:a.hostAssetContext,i=await n.getAssetWithCloudID(e),r=await this.fetch(t),s=await r.json();return Object(ct.c)(i,s)}async getCollaborators(e){var t;const a=null===(t=this._sam)||void 0===t?void 0:t.collaborationContext.getCollaborators(e);let n;return await new Promise((e,t)=>{n=null==a?void 0:a.getList(pt.e.default,void 0,{loadAllPages:!0}),null==n||n.on(pt.l,(function a(){(null==n?void 0:n.status)!==pt.a.Loading&&(null==n||n.off(pt.l,a),(null==n?void 0:n.errors)?t():e())}))}),null==n?void 0:n.items.map(t=>Object(ct.e)(e,t))}followLibrary(e,t){return this.fetch("/api/v1/libraries/bookmarks",{method:"POST",body:JSON.stringify({bookmarks:[{type:"collab",id:t,urn:e}]}),headers:{"content-type":"application/json"}}).then(()=>{})}moveLibrary(e,t,a){return new Promise((i,r)=>{const s={"content-type":"application/json"};a&&(s["x-organization-id"]=a);const o=this.fetch("/api/v1/libraries?"+Object(ht.stringify)({invocation_mode:"async"}),{method:"POST",body:JSON.stringify({self:e,repository:t}),headers:s}),c=new n.a(this,o);c.on("change",(e,t)=>{e&&(c.error?r(c.error):i(Object(Je.a)(Object(l.h)(t))))})})}importLibrary(e){throw new Error("Not implemented")}exportLibrary(e,t){throw new Error("Not implemented")}async abortOperation(e){throw new Error("Not supported in cloud mode.")}setLibraryChangeListener(e,t){this._notificationManager.setWatchedLibraries(e,e=>t(e,"assetId"))}setSyncStateListener(){}removeLibraryChangeListener(){this._notificationManager.disconnect()}removeSyncStateListener(){}removeFontDataChangeListeners(){}addWatchedLibrary(e){this._notificationManager.addWatchedLibrary(e)}removeWatchedLibrary(e){this._notificationManager.removeWatchedLibrary(e),this._assets.delete(e.assetId)}addLibrariesSyncGroupListener(e){this._notificationManager.addLibrariesSyncGroupListener(e)}removeLibrariesSyncGroupListener(){this._notificationManager.removeLibrariesSyncGroupListener()}_getLibrariesURL(e){return"/api/v1/libraries?"+new URLSearchParams(e).toString()}_getLibrariesResponseMapper(e){return t=>void 0===t.libraries?[]:t.libraries.map(t=>{var a,n;return Object(l.h)(t,this._options.readOnly,null===(n=null===(a=null==e?void 0:e.selector)||void 0===a?void 0:a.includes("rendition_grid"))||void 0===n||n)})}_getElement(e,t){return this.fetch(`/api/v1/libraries/${e}/elements/${t}?selector=default,representations,details,tags`).then(e=>e.json()).then(e=>Object(l.f)(e))}_getAllElements(e,t){var a,n;return Ht(this,arguments,(function*(){var i,r,s,o;const l=[["elements","_getElementsByAssetId"],["documentationElements","_getDocumentationElementsByAssetId"],["removedElements","_getRemovedElementsByAssetId"]],c={};for(const[p,m]of l)if(t.types.includes(p))try{for(var d,u=!0,h=(r=void 0,Vt(this[m](e,t.sort,t.etag,void 0,null===(a=t.abortController)||void 0===a?void 0:a.signal)));!(i=(d=yield Bt(h.next())).done);){o=d.value,u=!1;try{const e=o;c[p]=c[p]||[],null===(n=c[p])||void 0===n||n.push(...e),t.loadProgressively&&(yield yield Bt({[p]:c[p]}))}finally{u=!0}}}catch(e){r={error:e}}finally{try{u||i||!(s=h.return)||(yield Bt(s.call(h)))}finally{if(r)throw r.error}}yield yield Bt(Object.assign({areElementsLoaded:!0},t.loadProgressively?{}:c))}))}_getElementsByAssetId(e,t=Ut,a,n=100,i){return Ht(this,arguments,(function*(){yield Bt(yield*Ft(Vt(this._getElementsOfTypeByAssetId("elements",e,t,a,n,i))))}))}_getRemovedElementsByAssetId(e,t=Ut,a,n=100,i){return Ht(this,arguments,(function*(){yield Bt(yield*Ft(Vt(this._getElementsOfTypeByAssetId("archive",e,t,a,n,i))))}))}_getDocumentationElementsByAssetId(e,t=Ut,a,n=100,i){return Ht(this,arguments,(function*(){yield yield Bt(Promise.resolve([]))}))}_getElementsOfTypeByAssetId(e,t,a=Ut,n,i=100,r){return Ht(this,arguments,(function*(){const s=`${"descending"===a.direction?"-":""}${Gt[a.field]}`,o={limit:i,orderBy:s,selector:["default","representations","details"]};yield Bt(yield*Ft(Vt(this.fetchAllPages(`/api/v1/libraries/${t}/${e}?${Object(ht.stringify)(o,{arrayFormat:"comma"})}`,e=>e.elements.map(e=>{if(!e.manifest_etag&&n===ut.m||e.manifest_etag===n)return Object(l.f)(e);throw new c.a("PRECONDITION_FAILED","An element did not match the provided etag: "+n)}),r))))}))}getSearchResults(e,t,a,n){return Ht(this,arguments,(function*(){return yield Bt(Promise.resolve(void 0))}))}async getTeams(){const e=await this.fetch(`https://${this.driverConfig.teams_hostname}/api/v2/teams`),t=await e.json();return void 0===t.teams?[]:t.teams.filter(e=>"org"===e.repositoryOwner.type).map(l.i)}async getProjects(){if(!this._sam)return[];const e=await this._sam.projectContext.projects().getList(pt.j.default,pt.i.AllProjects,{loadAllPages:!0});var t;return await(t=e,new Promise((e,a)=>{function n(){t.status!==pt.a.Loading&&(t.errors&&a(t.errors),t.off(pt.l,n),e())}t.on(pt.l,n),n()})),e.items.map(Dt)}async getProjectGradient(e){if(!this._sam)return;const t=await this._sam.projectContext.getProjectbyID(e.id);return this._sam.projectContext.getGradient(t.gradientID).then(zt)}getGroups(e){return Ht(this,arguments,(function*(){yield yield Bt(Promise.resolve(void 0))}))}getRenditionUrl(e,t){let a;try{const n=Object(Nt.c)(e,t);if(!n)return"";a=new URL(n)}catch(e){return gt.a.log(String(e)),""}return a.searchParams.set("api_key",this._clientId),a.searchParams.set("user_token",this._token),a.toString()}getAuthenticatedThumbnailURL(e,t){return Promise.resolve(this.getRenditionUrl(e,t))}getRenditionPath(e,t,a){return Promise.resolve("")}getRendition(e,t){return this.fetch(Object(Nt.c)(e,t))}async getRepresentationContent(e){let t;if(e.contentLength<ut.t)t=e.data.url;else{const a=await this.getPresignedDownloadUrl(e.data.blockDownloadUrl);t=a&&a.url,t||(t=e.data.url)}return this.fetch(t)}async setLocalSetting(e,t){var a;t=JSON.stringify(t),null===(a=this._localStorage)||void 0===a||a.setItem(e,t)}getLocalSetting(e){var t;const a=null===(t=this._localStorage)||void 0===t?void 0:t.getItem(e);return a&&JSON.parse(a)}getInstalledVersion(e){throw new Error("Not supported in cloud mode.")}setFontDataChangeListener(e){}moveUrlQueryParamsToHeaders(e){const[t,a]=e.split("?"),n=new URLSearchParams(a),i={};for(const e of ut.f){const t=n.get(e);t&&(i[e]=t,n.delete(e))}return[`${t}${[...n].length>0?"?":""}${n}`,i]}async sendAction(e){throw new Xe.b("NOT_SUPPORTED","Application actions are not supported in a cloud environment",e.item.id)}async openInCCD(e){throw new Error("Not supported in cloud mode.")}async fetch(e,t,a={}){var n,i,r;!function(e,t){var a;null===(a=je.trace.getActiveSpan())||void 0===a||a.setAttribute(e,t||"")}("path",e),(t=t||{}).headers=t.headers||{},t.headers["x-api-key"]=this._clientId,!1!==a.includeAuthHeader&&(t.headers.Authorization="Bearer "+this._token);const{url:s,headers:o}=Object(st.c)(e);e=s,t.headers=Object.assign(Object.assign({},o),t.headers),t.signal=t.signal?Object(mt.b)(t.signal,null===(n=this._abortController)||void 0===n?void 0:n.signal):null===(i=this._abortController)||void 0===i?void 0:i.signal,e.startsWith("/")&&(e=`https://${this.driverConfig.hostname}${e}`);const l=Date.now(),d=await this._fetch(e,t).catch(e=>{if(e.name===ut.a)return new Response("{}");throw gt.a.info(`Error - ${e} (${Date.now()-l}ms)`),e}),u=d.headers.get("X-Request-Id")||"no requestId";if(gt.a.info(`[${u}] ${t.method||"GET"} ${e} ${d.status} (${Date.now()-l}ms)`),d.status>=300){throw"UNAUTHORIZED"===Object(c.b)(d).code&&(null===(r=this._refreshAccessToken)||void 0===r||r.call(this)),await this._getFetchError(d)}return d}async _getFetchError(e){if(403===e.status)try{const t=await e.json();if("string"==typeof t.type&&"quota"===t.type.toLowerCase())return new Xe.b("EXCEEDS_QUOTA",t.problem_type_message||"Storage quota exceeded")}catch(e){}return Object(c.b)(e)}fetchAllPages(e,t,a,n=!0){var i,r;return Ht(this,arguments,(function*(){let s=e;for(;s;){let e;n&&([s,e]=this.moveUrlQueryParamsToHeaders(s));const o=yield Bt(this.fetch(s,{signal:a,headers:e}).then(e=>e.json()));yield yield Bt(t(o)),s=null===(r=null===(i=o._links)||void 0===i?void 0:i.next)||void 0===r?void 0:r.href}}))}fetchOnePage(e,t,a,n=!0){return Ht(this,arguments,(function*(){let i;n&&([e,i]=this.moveUrlQueryParamsToHeaders(e));const r=yield Bt(this.fetch(e,{signal:a,headers:i}).then(e=>e.json()));yield yield Bt(t(r))}))}async copyFile(e,t,a){throw new Error("Not supported in cloud mode.")}async getFileSize(e){throw new Error("Not supported in cloud mode.")}getRenditionGrid(e){throw new Error("Not supported in cloud mode.")}async stageRepresentationForCommit(e,t,a){const n=a||t.type,i=await this._fetchLibraryLinks(e),r=i[ct.a.COMPONENT],s=i[ct.a.BLOCK_INIT],o=(null==s?void 0:s["repo:maxSingleTransferSize"])||ut.t;if(!r)throw new Xe.b("NOT_ALLOWED","Library is missing component upload link",e.id);const l=Object(_t.v4)(),c=Et()(r.href).fill({component_id:l}),d=await Object(kt.c)(t,n),u={id:l,storage_href:c,asset_id:e.assetId,type:n,content_length:t.size,name:t.name,width:null==d?void 0:d.width,height:null==d?void 0:d.height};if(t.size>o&&s){const e=await this._initializeBlockUpload(s,l,t,n);await this._transferBlocks(e,t);const a=await this._finalizeBlockUpload(e);return Object.assign(u,a),JSON.stringify(u)}const h=await this.fetch(c,{method:"PUT",headers:{"Content-Type":n},body:await t.arrayBuffer()});return Object.assign(u,{etag:h.headers.get("etag"),md5:h.headers.get("content-md5"),version:h.headers.get("revision")}),JSON.stringify(u)}async _fetchLibraryLinks(e){if(!e.assetId)throw new Xe.b("NOT_SUPPORTED","Library does not have an assetId",e.id);const t=await this.fetch("https://"+this.driverConfig.platform_hostname),a=(await t.json())._links[ct.a.RESOLVE],n=Et()(a.href).fill({id:e.assetId}),i=(await this.fetch(n,{method:"HEAD"})).headers.get("link");return i?function(e){const t={};do{const a=e.indexOf("<");if(-1===a)break;let n=e.indexOf("<",a+1);-1===n&&(n=e.length);const i=ot(e.substring(a,n));i&&(t[i.rel]=i),e=e.substring(n)}while(e.length>0);return t}(i):{}}async _initializeBlockUpload(e,t,a,n){const i={"repo:size":a.size,"repo:blocksize":e["repo:maxSingleTransferSize"]||ut.t,"repo:reltype":ct.a.COMPONENT,component_id:t,"dc:format":n},r=await this.fetch(e.href,{method:"POST",headers:{"Content-Type":"application/vnd.adobecloud.bulk-transfer+json"},body:JSON.stringify(i)});return await r.json()}async _transferBlocks(e,t){const a=e["repo:blocksize"],n=e._links[ct.a.BLOCK_TRANSFER];let i=0;const r=[];for(let e=0;i<=t.size;e+=1){const s=Math.min(i+a,t.size);r.push(this.fetch(n[e].href,{method:"PUT",headers:{"Content-Length":String(s-i)},body:t.slice(i,s),duplex:"half"},{includeAuthHeader:!1})),i+=a}return await Promise.all(r)}async _finalizeBlockUpload(e){const t=e._links[ct.a.BLOCK_FINALIZE];let a=t.href;if(t.templated){a=Et()(t.href).fill({})}const i=this.fetch(a,{method:"POST",headers:{"Content-Type":"application/vnd.adobecloud.bulk-transfer+json"},body:JSON.stringify(e)}),r=await i;return r.status===ut.d.ACCEPTED?new Promise((e,t)=>{const a=new n.a(this,i);a.on("change",(n,i,r)=>{n&&(a.error?t(a.error):e({etag:r.get("etag"),md5:r.get("content-md5"),version:r.get("version")}))})}):{etag:r.headers.get("etag"),md5:r.headers.get("content-md5"),version:r.headers.get("version")}}getLocalDriver(){return new s.a(()=>this._requestProcessToUploadData(Object(_t.v4)(),Date.now()))}async _requestProcessToUploadData(e,t){var a;if(Date.now()-t>ut.s)throw gt.a.log("Timed out and no response received from process and/or server"),new Error("Unable to get process connection info (timed out)");const n=`https://${e}.${vt()(null===(a=this.config.user)||void 0===a?void 0:a.id)}.adobelocalhost.com`,i=[];for(let e=ut.v[0];e<=ut.v[1];e+=1)i.push(`${n}:${e}`);this.resetAbortController(),await Promise.allSettled(i.map(e=>fetch(e)));try{const[t]=await Promise.all([this._fetchProcessConnectInfo(e).catch(()=>{}),Object(yt.f)(ut.r)]);if(!t)throw new c.a("MALFORMED_RESPONSE","Invalid response retrieving process connection data for uuid: "+e);return t}catch(a){return gt.a.error(String(a)),this._requestProcessToUploadData(e,t)}}async _fetchProcessConnectInfo(e){const t=`https://${this.driverConfig.hostname}/api/v1/client-tokens/${e}`,a=await this.fetch(t).then(e=>e.json(),e=>gt.a.error(e)),{restApiToken:n,restApiPort:i}=JSON.parse(a.token);if(!n||!i)throw new c.a("MALFORMED_RESPONSE","Response did not include necessary process connection data");return{hostname:"http://127.0.0.1:"+i,token:n}}getClientInfo(){var e;return{deviceId:`${this._clientId}-${null===(e=this.config.user)||void 0===e?void 0:e.id}`,device:"undefined"!=typeof window?window.navigator.userAgent:"node-js",app:this._clientId}}async getTempDir(e){throw new Error("Not supported in cloud mode.")}ignoreLocalSyncEvents(){return!1}}jt([Be("cclibraries-cloudDriver-getLibraryById")],qt.prototype,"getLibraryById",null),jt([Be("cclibraries-cloudDriver-getAllElements")],qt.prototype,"_getAllElements",null),jt([Be("cclibraries-cloudDriver-getElementsOfTypeByAssetId")],qt.prototype,"_getElementsOfTypeByAssetId",null),jt([Be("cclibraries-cloudDriver-getTeams")],qt.prototype,"getTeams",null),jt([Be("cclibraries-cloudDriver-getProjects")],qt.prototype,"getProjects",null),jt([Be("cclibraries-cloudDriver-getProjectGradient")],qt.prototype,"getProjectGradient",null),jt([Be("cclibraries-cloudDriver-getRendition")],qt.prototype,"getRendition",null),jt([Be("cclibraries-cloudDriver-fetch")],qt.prototype,"fetch",null),jt([Be("cclibraries-cloudDriver-stageRepresentationForCommit")],qt.prototype,"stageRepresentationForCommit",null)},"0B1G":function(e,t,a){"use strict";var n;!function(e){e.TEMPLATE="template",e.PRESET="preset"}(n||(n={})),t.a=n},"0Y3k":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("loW4"),i=a("RKfy"),r=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};class s extends n.a{constructor(){super(...arguments),this._map=new Map}set(e,t){this._map.set(e,t),this.emit("change")}delete(e){this._map.delete(e),this.emit("change")}clear(){this._map.clear(),this.emit("change")}entries(){return this._map.entries()}get(e){return this._map.get(e)}}r([Object(i.a)("change")],s.prototype,"entries",null),r([Object(i.a)("change")],s.prototype,"get",null)},"0gSV":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("GXnB"),i=a("Ztfv");t.tagged=function(e,t){return function(a,r,s){var o=new n.Metadata(e,t);"number"==typeof s?i.tagParameter(a,r,s,o):i.tagProperty(a,r,o)}}},"0mF0":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"g",(function(){return d})),a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return h})),a.d(t,"e",(function(){return p})),a.d(t,"b",(function(){return m})),a.d(t,"f",(function(){return g}));var n=a("Zghy");const i={red:0,green:0,blue:0,alpha:0,type:"RGBColor"},r={red:0,green:0,blue:0,type:"RGBColor"},s={red:255,green:255,blue:255,type:"RGBColor"},o={WHITE:"white",BLACK:"black",TRANSPARENT:"transparent",CUSTOM:"custom"},l="cmyk",c="rgb";function d(e){if(e&&"RGBColor"===e.type){const{red:t=0,green:a=0,blue:n=0,alpha:i}=e;return void 0===i?`rgb(${Math.round(t)}, ${Math.round(a)}, ${Math.round(n)})`:`rgba(${Math.round(t)}, ${Math.round(a)}, ${Math.round(n)}, ${i})`}return"rgba(0, 0, 0, 0)"}async function u(e){if(e&&e.type){let t;switch(e.type){case"RGBColor":t=e;break;case"RGBFloatColor":t=function(e){const{red:t=0,green:a=0,blue:n=0}=e;return{type:"RGBColor",red:Math.round(255*t),green:Math.round(255*a),blue:Math.round(255*n)}}(e);break;default:t=await n.a.convertColorToRGB(e)}return t}return null}function h(e,t){switch(e){case"background":return void 0!==t?t:s;case"black":return r;case"transparent":return i;default:return s}}function p(e){return e&&void 0!==e.grain&&(e.green=void 0!==e.green?e.green:e.grain,delete e.grain),e}const m=e=>{if("string"==typeof e)return e===o.TRANSPARENT?o.WHITE:e;const t=e.colorSpace===l?function({c:e,m:t,y:a,k:n}){const i=e=>Math.round(255*(1-e/100)*(1-n/100));return{colorSpace:"rgb",r:i(e),g:i(t),b:i(a)}}(e):e;return`rgb(${t.r}, ${t.g}, ${t.b})`};const g=e=>{if("string"==typeof e)return e;switch(e.colorSpace){case c:return function(e){const{r:t,g:a,b:n}=e;return 255===t&&255===a&&255===n?o.WHITE:0===t&&0===a&&0===n?o.BLACK:e}(e);case l:return function(e){const{c:t,m:a,y:n,k:i}=e;return 0===t&&0===a&&0===n&&0===i?o.WHITE:0===t&&0===a&&0===n&&100===i?o.BLACK:e}(e);default:return e}}},"1BVQ":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));var n=a("qD8u");const i=["OPERATION_CANCELLED","EXCEEDS_MAX_LIBRARY_SIZE","THUMBNAIL_NOT_AVAILABLE","RENDITION_NOT_AVAILABLE","URL_VALIDATION_FAILED","CORRUPTED_LIBRARY","TRANSFER_ABORTED","TRANSFER_ERROR","NETWORK_ERROR","EXCEEDS_QUOTA","EXCEEDS_COMPONENT_LIMIT","RETRYABLE_SERVER_ERROR","LOGGED_OUT","FILE_TOO_LARGE","INVALID_DATA","FS_ERROR","OUT_OF_SPACE","ACCESS_DENIED","NOT_ALLOWED","DELETED_LOCALLY","REQUIRES_FILESYSTEM","NOT_SUPPORTED","NOT_IMPLEMENTED","INVALID_PARAMETER","READ_ONLY","CONNECTION_FAILED","REQUEST_FAILED","INVALID_RESPONSE","INVALID_JSON"];class r extends n.a{constructor(e,t,a,n){(function(e){const t=e;return!!t.code&&!!t.message})(e)&&(t=e.message,a=e.libraryId,n=e.underlyingError,e=e.code),super(`[${e}] ${t}`),this.code=e,this.libraryId=a,this.underlyingError=n}}},"2Sv4":function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return n}));const n=()=>e}).call(this,a("tQvA").default)},"2oBy":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("/Z0y"),i=a("Ass+"),r=(a("fEyC"),a("sfL4"));function s(e,t){e.forEach(e=>{e.assetId&&t.includes(e.assetId)&&(e.locallyManaged=!0)})}a("Gd8k"),a("GN7m");var o=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,a=e[Symbol.asyncIterator];return a?a.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=e[a]&&function(t){return new Promise((function(n,i){(function(e,t,a,n){Promise.resolve(n).then((function(t){e({value:t,done:a})}),t)})(n,i,(t=e[a](t)).done,t.value)}))}}},l=function(e){return this instanceof l?(this.v=e,this):new l(e)},c=function(e,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=a.apply(e,t||[]),r=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(a,n){r.push([e,t,a,n])>1||o(e,t)}))})}function o(e,t){try{(a=i[e](t)).value instanceof l?Promise.resolve(a.value.v).then(c,d):u(r[0][2],a)}catch(e){u(r[0][3],e)}var a}function c(e){o("next",e)}function d(e){o("throw",e)}function u(e,t){e(t),r.shift(),r.length&&o(r[0][0],r[0][1])}};class d extends n.a{constructor(e,t){super(t),this._localConnector=e,this._cloudConnector=t,this._handleLibraryMutation=e=>{e&&this.emit("localChange",e)},this._localDriver=new i.a(e,{optimistic:!0,handleLibraryMutation:this._handleLibraryMutation})}connect(){return Promise.all([this.localDriver.connect(),super.connect()]).then(()=>{})}get localDriver(){return this._localDriver}call(e,t,...a){return e.locallyManaged?this._localDriver[t](...a):super[t](...a)}_handleDisconnected(){super._handleDisconnected(),this.localDriver.isConnected&&this.localDriver.disconnect()}setLibraryChangeListener(e,t){super.setLibraryChangeListener(e.filter(e=>!e.locallyManaged),t)}setFontDataChangeListener(e){this.localDriver.setFontDataChangeListener(e)}removeFontDataChangeListeners(){this.localDriver.removeFontDataChangeListeners()}async getLocalLibraries(){var e,t,a,n;const i=[];try{for(var r,s=!0,l=o(this.localDriver.getLibraries());!(e=(r=await l.next()).done);){n=r.value,s=!1;try{const e=n;i.push(...e.map(e=>e.assetId).filter(Boolean))}finally{s=!0}}}catch(e){t={error:e}}finally{try{s||e||!(a=l.return)||await a.call(l)}finally{if(t)throw t.error}}return i}getLibraries(e,t=!0){const a=Object.create(null,{getLibraries:{get:()=>super.getLibraries}});return c(this,arguments,(function*(){const n=a.getLibraries.call(this,e,t),[i,r]=yield l(Promise.all([this.getLocalLibraries(),n.next()]));s(r.value,i),yield yield l(r.value);let o=r.done;for(;!o;){const e=yield l(n.next());e.value&&(s(e.value,i),yield yield l(e.value)),o=e.done}}))}getLibrary(e,t){const a=this.localDriver.getLibrary(e,t);return e.locallyManaged?a:(void 0!==(null==t?void 0:t.optimisticFetch)&&!0!==t.optimisticFetch||Object(r.b)(a),super.getLibrary(e,t))}getElements(e,t,a,n,i){return this.call(e,"getElements",t,a,n,i)}getElement(e,t){return this.call(e,"getElement",e,t)}async getLibraryById(e,t){return await this._localDriver._getLibraryById(e,t).next()||_super.getLibraryById.call(this,e)}getRenditionUrl(e,t){return this.call(e.library,"getRenditionUrl",e,t)}getRendition(e,t){return this.call(e.library,"getRendition",e,t)}getRepresentationContent(e){return this.call(e.library,"getRepresentationContent",e)}getOperationTypes(e){return e.locallyManaged?this._localDriver.getOperationTypes(e):super.getOperationTypes(e)}operationFactory(e,t,a){return new e(a.locallyManaged?this._localDriver:this,a)}ignoreLocalSyncEvents(){return this.localDriver.isConnected?this.localDriver.ignoreLocalSyncEvents():super.ignoreLocalSyncEvents()}}},"3iLV":function(e,t,a){"use strict";var n=a("99Ma"),i=a("BPvV"),r=a("io8T"),s=a("abot"),o=a("0B1G");var l=n.g.model({progress:n.g.maybe(n.g.number),downloadStatus:n.g.maybe(n.g.late(()=>n.g.enumeration(Object.values(r.a)))),downloadStatusMessage:n.g.maybe(n.g.string)}).actions(e=>({updateStatus(t){e.progress=t.progress,e.downloadStatus=t.downloadStatus,e.downloadStatusMessage=t.downloadStatusMessage}})).views(e=>({equals:t=>!!t&&(e.progress===t.progress&&e.downloadStatus===t.downloadStatus&&e.downloadStatusMessage===t.downloadStatusMessage)})),c=a("CQbc"),d=a("tIky");const u=n.g.model("TemplateModel",{...c.b,contributor_name:n.g.optional(n.g.string,"",[null,void 0]),contributor_url:n.g.optional(n.g.string,"",[null,void 0]),downloadStatus:n.g.optional(n.g.late(()=>l),()=>l.create({})),elementRef:n.g.maybe(n.g.string),id:n.g.maybe(n.g.union(n.g.number,n.g.string)),is_free:n.g.maybe(n.g.boolean),kind:o.a.TEMPLATE,licenseStatus:n.g.maybe(n.g.late(()=>n.g.enumeration(Object.values(s.a)))),licensedTime:n.g.maybe(n.g.number),marketing_text:n.g.maybeNull(n.g.string),mime_type:n.g.maybeNull(n.g.string),previews:n.g.maybe(n.g.array(d.a)),price_prompt:n.g.maybe(n.g.union(n.g.number,n.g.string)),template_category:n.g.optional(n.g.array(n.g.string),[]),thumbnail_height:n.g.maybe(n.g.number),thumbnail_url:n.g.maybe(n.g.string),thumbnail_width:n.g.maybe(n.g.number),tip:n.g.optional(n.g.string,"",[null,void 0]),title:n.g.maybe(n.g.string),url:n.g.maybe(n.g.string),libraryId:n.g.maybe(n.g.union(n.g.string,n.g.number)),created:n.g.maybe(n.g.number),modified:n.g.maybe(n.g.number)}).views(c.d).views(e=>({get isTooLarge(){return!!e.size&&e.size/1048576>100},get isLicensed(){return void 0!==e.licensedTime&&Number.isInteger(e.licensedTime)&&e.licensedTime>0},get isDownloading(){return e.downloadStatus.downloadStatus===r.a.DOWNLOADING||e.licenseStatus===s.a.REQUESTED},get downloadedSize(){return e.size&&e.downloadStatus.progress&&e.downloadStatus.progress>0?e.downloadStatus.progress*e.size/100:0}})).actions(e=>({addTemplateCategory:t=>-1===e.template_category.indexOf(t)&&(e.template_category.push(t),!0),updateStatus(t){void 0!==t.licenseStatus?e.licenseStatus=t.licenseStatus:(e.licensedTime=t.licensedTime,e.lastUsedTime=t.lastUsedTime,e.downloadStatus.updateStatus(t),e.url=t.path||e.url,e.elementRef=t.elementRef||e.elementRef,e.licenseStatus=s.a.LICENSED)}})),h=n.g.snapshotProcessor(u,{preProcessor(e){let{resolution:t,template_category:a,is_free:n,price_prompt:r,...s}=e;return t="string"==typeof t?Number(t):null===t?void 0:t,a=null==a?void 0:a.filter(e=>e),!n||0!==r&&"0"!==r||(r=i.a.formatMessage("free_stock_template")),{resolution:t,template_category:a,is_free:n,price_prompt:r,...s}}});t.a=h},"3mQf":function(e,t,a){"use strict";a.d(t,"d",(function(){return d})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return p}));a("fEyC");var n=a("ekou"),i=a("hWy1"),r=a("P+lh"),s=a("Pj6y"),o=a("El4k"),l=a("+qR3");const c=[{test:e=>Object(i.a)(e)&&["moveGroup","copyGroup"].includes(e.name),handler:function(e,t){var a;const n=[],i=Object(o.c)(t.path),r=t.actions.map(e=>"removeElement"===e.name&&e.baseData),s=(null===(a=e.elements)||void 0===a?void 0:a.filter(e=>e.groups.find(e=>e.id===i)))||[],l=s.filter(e=>!r.find(t=>t.id===e.id));for(const e of l)n.push({name:"updateElement",type:"update",path:`$.elements[?(@.id == "${e.id}")]`,data:{groups:e.groups.filter(e=>e.id!==i)}});const c=r.filter(e=>!s.find(t=>t.id===e.id));for(let e=t.actions.length-1;e>=0;e-=1){const a=t.actions[e];c.find(e=>e.id===a.baseData.id)&&t.actions.splice(e,1)}return n.push(t),n}},{test:e=>Object(i.e)(e)&&"updateElementContent"===e.name,handler:function(e,t){const a=s.a.get(e,t.path);if(a&&a.modifiedDate!==t.baseData.modifiedDate&&!Object(n.a)(a.representations,t.baseData.representations,{cyclesFix:!1}).find(e=>"id"!==e.path[1]&&"CREATE"!==e.type&&!(void 0===e.oldValue&&"REMOVE"===e.type)))return[t];if(!a||a.modifiedDate!==t.baseData.modifiedDate)return[{name:"createElement",type:"insert",path:Object(o.a)(t.path),data:Object(r.a)(Object.assign(Object.assign(Object.assign({},t.baseData),t.data),{id:Object(l.b)()}))}];return[t]}},{test:e=>Object(i.e)(e)&&"updateGroup"===e.name,handler:function(e,t){const a=s.a.get(e,t.path);if(!a)return[{name:"createGroup",type:"insert",path:"$.groups",data:Object(r.a)(Object.assign(Object.assign(Object.assign({},t.baseData),t.data),{id:Object(l.b)()}))}];return[Object.assign(Object.assign({},t),{baseData:Object(r.a)(a)})]}},{test:e=>Object(i.e)(e)&&"updateElement"===e.name,handler:function(e,t){const a=s.a.get(e,t.path);if(!a)return[];return[Object.assign(Object.assign({},t),{baseData:Object(r.a)(a)})]}},{test:e=>Object(i.a)(e)&&"removeElement"===e.name,handler:function(e,t){const a=s.a.get(e,t.path),n=t.actions.find(e=>"removeElement"===e.name);if(!a||a.modifiedDate!==(null==n?void 0:n.baseData.modifiedDate))return[];return[t]}},{test:e=>Object(i.d)(e),handler:function(e,t){const a=s.a.get(e,t.path);if(!a||a.modifiedDate!==t.baseData.modifiedDate)return[];return[t]}}];function d(e,t){for(const{test:a,handler:n}of c)if(a(t))return n(e,t);return[t]}function u(e){const t="incoming"===e.ownership&&"org"===e.ownerType;return Boolean("incoming"===e.ownership&&e.team||t)}function h(e){var t;return!!(null===(t=e.roles)||void 0===t?void 0:t.find(e=>"brand"===e.type))}function p(e){var t,a;if(!e)return!1;const n=null===(t=e.roles)||void 0===t?void 0:t.find(e=>"cme"===e.type),i="private"===e.ownership||"outgoing"===e.ownership,r=!!(null===(a=e.bookmark)||void 0===a?void 0:a.id);return!n&&(i||r)}},"406g":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("z4Hk"),i=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new n.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=i},"4cb6":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("xfSm");t.METADATA_KEY=n;var i=a("9Fde");t.Container=i.Container;var r=a("FV85");t.BindingScopeEnum=r.BindingScopeEnum,t.BindingTypeEnum=r.BindingTypeEnum,t.TargetTypeEnum=r.TargetTypeEnum;var s=a("dxzI");t.AsyncContainerModule=s.AsyncContainerModule,t.ContainerModule=s.ContainerModule;var o=a("cZ5Q");t.injectable=o.injectable;var l=a("0gSV");t.tagged=l.tagged;var c=a("ZzCi");t.named=c.named;var d=a("Yk9n");t.inject=d.inject,t.LazyServiceIdentifer=d.LazyServiceIdentifer;var u=a("jYx5");t.optional=u.optional;var h=a("n2J3");t.unmanaged=h.unmanaged;var p=a("jIg/");t.multiInject=p.multiInject;var m=a("oaX6");t.targetName=m.targetName;var g=a("Sk89");t.postConstruct=g.postConstruct;var f=a("wnjb");t.MetadataReader=f.MetadataReader;var v=a("d9O0");t.id=v.id;var y=a("Ztfv");t.decorate=y.decorate;var b=a("RR/i");t.traverseAncerstors=b.traverseAncerstors,t.taggedConstraint=b.taggedConstraint,t.namedConstraint=b.namedConstraint,t.typeConstraint=b.typeConstraint;var E=a("ujMp");t.getServiceIdentifierAsString=E.getServiceIdentifierAsString;var _=a("78VC");t.multiBindToService=_.multiBindToService},"5MlJ":function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"e",(function(){return o})),a.d(t,"g",(function(){return c})),a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"h",(function(){return h})),a.d(t,"d",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"c",(function(){return g}));var n=a("VFTl");const i=()=>window.require&&window.require("os");var r=a("Ai3n");function s(){return navigator.userAgent.indexOf("UXP")>-1}function o(e){return!(!e||!e.initialized||e.UserProfile&&e.UserProfile.userId)}function l(){return-1===navigator.platform.search(/darwin/i)&&"MacIntel"!==navigator.platform&&-1!==navigator.platform.search(/win/i)?"win":"mac"}function c(){return"win"===l()}function d(e){return s()&&e&&!e.startsWith("http")?"file://"+e:e}function u(e){return c()&&e?e.replace(/\\/g,"/"):e}function h(){return s()?i().release():"Unknown"}function p(){const e=s()&&Object(n.a)();return e&&e.host&&e.host.name||"Browser"}function m(e){return e.replace(r.k[l()],"")}function g(){return s()?i().homedir():""}},"6AGu":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("FV85"),i=a("LKzl"),r=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=n.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=n.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=n.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=r},"77JF":function(e,t,a){"use strict";a.r(t),a.d(t,"appRef",(function(){return Fs})),a.d(t,"ResizeType",(function(){return Hs})),a.d(t,"loadDialog",(function(){return qs})),a.d(t,"showNewDocumentDialogImpl",(function(){return $s}));var n=a("q1tI"),i=a.n(n),r=a("i8i4"),s=a.n(r),o=a("99Ma"),l=a("BPvV"),c=a("JRPe"),d=a("dI71");a("17x9");function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function h(e){return"/"===e.charAt(0)}function p(e,t){for(var a=t,n=a+1,i=e.length;n<i;a+=1,n+=1)e[a]=e[n];e.pop()}var m=function(e,t){void 0===t&&(t="");var a,n=e&&e.split("/")||[],i=t&&t.split("/")||[],r=e&&h(e),s=t&&h(t),o=r||s;if(e&&h(e)?i=n:n.length&&(i.pop(),i=i.concat(n)),!i.length)return"/";if(i.length){var l=i[i.length-1];a="."===l||".."===l||""===l}else a=!1;for(var c=0,d=i.length;d>=0;d--){var u=i[d];"."===u?p(i,d):".."===u?(p(i,d),c++):c&&(p(i,d),c--)}if(!o)for(;c--;c)i.unshift("..");!o||""===i[0]||i[0]&&h(i[0])||i.unshift("");var m=i.join("/");return a&&"/"!==m.substr(-1)&&(m+="/"),m};var g=function(e,t){if(!e)throw new Error("Invariant failed")};function f(e){var t=e.pathname,a=e.search,n=e.hash,i=t||"/";return a&&"?"!==a&&(i+="?"===a.charAt(0)?a:"?"+a),n&&"#"!==n&&(i+="#"===n.charAt(0)?n:"#"+n),i}function v(e,t,a,n){var i;"string"==typeof e?(i=function(e){var t=e||"/",a="",n="",i=t.indexOf("#");-1!==i&&(n=t.substr(i),t=t.substr(0,i));var r=t.indexOf("?");return-1!==r&&(a=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===a?"":a,hash:"#"===n?"":n}}(e)).state=t:(void 0===(i=u({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return a&&(i.key=a),n?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=m(i.pathname,n.pathname)):i.pathname=n.pathname:i.pathname||(i.pathname="/"),i}function y(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,a,n,i){if(null!=e){var r="function"==typeof e?e(t,a):e;"string"==typeof r?"function"==typeof n?n(r,i):i(!0):i(!1!==r)}else i(!0)},appendListener:function(e){var a=!0;function n(){a&&e.apply(void 0,arguments)}return t.push(n),function(){a=!1,t=t.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];t.forEach((function(e){return e.apply(void 0,a)}))}}}"undefined"==typeof window||!window.document||window.document.createElement;function b(e,t,a){return Math.min(Math.max(e,t),a)}function E(e){void 0===e&&(e={});var t=e,a=t.getUserConfirmation,n=t.initialEntries,i=void 0===n?["/"]:n,r=t.initialIndex,s=void 0===r?0:r,o=t.keyLength,l=void 0===o?6:o,c=y();function d(e){u(_,e),_.length=_.entries.length,c.notifyListeners(_.location,_.action)}function h(){return Math.random().toString(36).substr(2,l)}var p=b(s,0,i.length-1),m=i.map((function(e){return v(e,void 0,"string"==typeof e?h():e.key||h())})),g=f;function E(e){var t=b(_.index+e,0,_.entries.length-1),n=_.entries[t];c.confirmTransitionTo(n,"POP",a,(function(e){e?d({action:"POP",location:n,index:t}):d()}))}var _={length:m.length,action:"POP",location:m[p],index:p,entries:m,createHref:g,push:function(e,t){var n=v(e,t,h(),_.location);c.confirmTransitionTo(n,"PUSH",a,(function(e){if(e){var t=_.index+1,a=_.entries.slice(0);a.length>t?a.splice(t,a.length-t,n):a.push(n),d({action:"PUSH",location:n,index:t,entries:a})}}))},replace:function(e,t){var n=v(e,t,h(),_.location);c.confirmTransitionTo(n,"REPLACE",a,(function(e){e&&(_.entries[_.index]=n,d({action:"REPLACE",location:n}))}))},go:E,goBack:function(){E(-1)},goForward:function(){E(1)},canGo:function(e){var t=_.index+e;return t>=0&&t<_.entries.length},block:function(e){return void 0===e&&(e=!1),c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return _}var _=a("tEiQ"),w=a("vRGJ"),I=a.n(w);a("TOwV");function x(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}var S=a("2mql"),O=a.n(S),C=function(e){var t=Object(_.a)();return t.displayName=e,t}("Router-History"),P=function(e){var t=Object(_.a)();return t.displayName=e,t}("Router"),N=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={location:t.history.location},a._isMounted=!1,a._pendingLocation=null,t.staticContext||(a.unlisten=t.history.listen((function(e){a._isMounted?a.setState({location:e}):a._pendingLocation=e}))),a}Object(d.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var a=t.prototype;return a.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},a.componentWillUnmount=function(){this.unlisten&&this.unlisten()},a.render=function(){return i.a.createElement(P.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.a.createElement(C.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.a.Component);var A=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).history=E(t.props),t}return Object(d.a)(t,e),t.prototype.render=function(){return i.a.createElement(N,{history:this.history,children:this.props.children})},t}(i.a.Component);i.a.Component;var T={},M=0;function L(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var a=t,n=a.path,i=a.exact,r=void 0!==i&&i,s=a.strict,o=void 0!==s&&s,l=a.sensitive,c=void 0!==l&&l;return[].concat(n).reduce((function(t,a){if(!a&&""!==a)return null;if(t)return t;var n=function(e,t){var a=""+t.end+t.strict+t.sensitive,n=T[a]||(T[a]={});if(n[e])return n[e];var i=[],r={regexp:I()(e,i,t),keys:i};return M<1e4&&(n[e]=r,M++),r}(a,{end:r,strict:o,sensitive:c}),i=n.regexp,s=n.keys,l=i.exec(e);if(!l)return null;var d=l[0],u=l.slice(1),h=e===d;return r&&!h?null:{path:a,url:"/"===a&&""===d?"/":d,isExact:h,params:s.reduce((function(e,t,a){return e[t.name]=u[a],e}),{})}}),null)}var R=function(e){function t(){return e.apply(this,arguments)||this}return Object(d.a)(t,e),t.prototype.render=function(){var e=this;return i.a.createElement(P.Consumer,null,(function(t){t||g(!1);var a=e.props.location||t.location,n=u({},t,{location:a,match:e.props.computedMatch?e.props.computedMatch:e.props.path?L(a.pathname,e.props):t.match}),r=e.props,s=r.children,o=r.component,l=r.render;return Array.isArray(s)&&0===s.length&&(s=null),i.a.createElement(P.Provider,{value:n},n.match?s?"function"==typeof s?s(n):s:o?i.a.createElement(o,n):l?l(n):null:"function"==typeof s?s(n):null)}))},t}(i.a.Component);function D(e){return"/"===e.charAt(0)?e:"/"+e}function z(e,t){if(!e)return t;var a=D(e);return 0!==t.pathname.indexOf(a)?t:u({},t,{pathname:t.pathname.substr(a.length)})}function k(e){return"string"==typeof e?e:f(e)}function j(e){return function(){g(!1)}}function B(){}i.a.Component;i.a.Component;function V(e){var t="withRouter("+(e.displayName||e.name)+")",a=function(t){var a=t.wrappedComponentRef,n=x(t,["wrappedComponentRef"]);return i.a.createElement(P.Consumer,null,(function(t){return t||g(!1),i.a.createElement(e,u({},n,t,{ref:a}))}))};return a.displayName=t,a.WrappedComponent=e,O()(a,e)}i.a.useContext;var F=a("TyAF"),H=a("TSYQ"),U=a.n(H),G=a("GGSb"),W=a.n(G),q=a("9/5/"),$=a.n(q),K=a("bUsb"),J=a.n(K),X=a("Z1zh"),Y=a("Zghy"),Q=a("U05r"),Z=a("cIFk"),ee=a("pUl/"),te=a("Yq8u"),ae=a("2vnA"),ne=a("Cn9g"),ie=a.n(ne),re=a("fjGn"),se=a.n(re),oe=a("IHOr"),le=a.n(oe);class ce extends n.Component{render(){const{className:e,style:t,...a}=this.props;return i.a.createElement("div",Object.assign({style:t,className:U()(e,le.a["cmdn-FlexContainer"])},a))}}var de=a("M+Cl"),ue=a.n(de);class he extends n.Component{render(){const{order:e,flexGrow:t,className:a,flexShrink:n,flexBasis:r,alignSelf:s,...o}=this.props,l=Object.assign({order:e,flexGrow:t,flexShrink:n,flexBasis:r,alignSelf:s},this.props.style||{});return i.a.createElement("div",Object.assign({className:U()(a,ue.a["cmdn-Flex-Item"])},o,{style:{...l}}))}}var pe=he,me=a("5MlJ"),ge=a("ZHX6"),fe=a.n(ge);class ve extends n.Component{render(){const{template:e}=this.props;return e.previews.map(e=>i.a.createElement("img",{key:"template_preview_"+e.url,src:Object(me.b)(e.url),className:fe.a["cmdn-TemplatePreview-image"]}))}}var ye=a("DlQD"),be=a.n(ye),Ee=a("czhh"),_e=a.n(Ee),we=a("VQdv"),Ie=a.n(we),xe=a("L+OI"),Se=a.n(xe),Oe=a("DUuf"),Ce=a.n(Oe),Pe=a("uYrR"),Ne=a.n(Pe),Ae=a("b7KY"),Te=a.n(Ae),Me=a("6up5"),Le=a.n(Me);class Re extends n.Component{render(){return i.a.createElement("div",{id:this.props.id,"aria-labelledby":this.props.labelledBy,role:"region",className:U()({[Le.a["cmdn-Collapsible"]]:!0,[Le.a["is-open"]]:this.props.open})},this.props.children)}}var De=a("hKI/"),ze=a.n(De),ke=a("uXGE"),je=a.n(ke),Be=a("+n3g"),Ve=a.n(Be),Fe=a("Bfm4"),He=a.n(Fe);const Ue=function(e){e.stopPropagation(),e.preventDefault(),e.nativeEvent.stopImmediatePropagation()};class Ge extends n.Component{constructor(e){super(e),this.logPointerUpAnalytics=(e,t)=>{const{onScrubbyValue:a,logScrubbyValueAnalytics:n}=this.props;"function"!=typeof a||Number.isNaN(e)||e===t||null==n||n()},this.onKeyDown=this.onKeyDown.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.throttledPointerMove=ze()(this.throttledPointerMove.bind(this),10),this.state={isMouseDown:!1,startX:NaN,lastX:NaN}}expand(e){this.props.onToggle&&this.props.onToggle(e)}get chevron(){if(this.props.collapsible){const e=this.props.collapsed?je.a:Ve.a;return i.a.createElement(e,{className:He.a["spectrum-PanelTitle-chevron"],size:"S"})}return null}onKeyDown(e){" "===e.key&&(Ue(e),this.expand(!this.props.collapsed))}onPointerUp(e){document.removeEventListener("pointerup",this.onPointerUp),document.removeEventListener("pointermove",this.onPointerMove),"function"==typeof e.currentTarget.releasePointerCapture&&e.currentTarget.releasePointerCapture(e.pointerId),this.logPointerUpAnalytics(this.state.startX,Math.floor(e.pageX)),this.setState({isMouseDown:!1,startX:NaN})}onPointerDown(e){e.preventDefault();const t=Math.floor(e.pageX);this.setState({isMouseDown:!0,startX:t,lastX:t}),document.addEventListener("pointerup",this.onPointerUp),document.addEventListener("pointermove",this.onPointerMove),"function"==typeof e.currentTarget.setPointerCapture&&e.currentTarget.setPointerCapture(e.pointerId)}onPointerMove(e){this.throttledPointerMove(e)}throttledPointerMove(e){const{isMouseDown:t,lastX:a}=this.state,n=Math.floor(e.pageX),i=n-a;if(this.setState({lastX:n}),t&&0!==i){const{onScrubbyValue:t}=this.props;"function"==typeof t&&t(i,e.shiftKey,e.altKey)}}render(){const{id:e,collapsed:t,collapsible:a,contentId:n,className:r,onScrubbyValue:s,disabled:o}=this.props,l=U()(r,He.a["cmdn-PanelTitle"],{[He.a["cmdn-PanelTitle--collapsible"]]:a,[He.a["cmdn-PanelTitle--scrubby"]]:"function"==typeof s,[He.a["cmdn-PanelTitle--disabled"]]:o}),c={};return a&&(c.role="button",c["aria-expanded"]=t,c["aria-controls"]=n),i.a.createElement("div",Object.assign({},c,{onKeyDown:this.onKeyDown,onClick:()=>this.expand(!t),onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onPointerMove:this.onPointerMove,id:e,className:l,tabIndex:a?0:void 0}),this.chevron,this.props.titleTooltip?i.a.createElement(Ne.a,{placement:"left",trigger:"hover",delayShow:800},i.a.createElement("a",{tabIndex:a?0:-1},this.props.title),i.a.createElement(Ce.a,{variant:"inspect"},this.props.titleTooltip)):this.props.title)}}var We=a("W73E"),qe=a.n(We);class $e extends n.Component{constructor(e){super(e);const{headerId:t,contentId:a}=e;this.state={headerId:t||Te()(),contentId:a||Te()()},this.onToggle=this.onToggle.bind(this)}onToggle(e){this.props.onToggle&&this.props.onToggle(),requestAnimationFrame(()=>{if(this.props.collapsible&&e){s.a.findDOMNode(this.collapsibleRef).scrollIntoView()}})}get classes(){return U()(this.props.className,qe.a["cmdn-Panel"])}get title(){return this.props.title?i.a.createElement(Ge,{id:this.state.headerId,className:this.props.titleClassName,contentId:this.state.contentId,collapsible:this.props.collapsible,collapsed:this.props.open,disabled:this.props.disabled,title:this.props.title,onToggle:this.onToggle,onScrubbyValue:this.props.onScrubbyValue,logScrubbyValueAnalytics:this.props.logScrubbyValueAnalytics}):null}get content(){const{children:e}=this.props;return this.props.collapsible?i.a.createElement(Re,{ref:e=>this.collapsibleRef=e,id:this.state.contentId,labelledBy:this.state.headerId,open:this.props.open},e):e}render(){const{className:e,style:t,icon:a,open:n,collapsible:r,title:s,titleClassName:o,onToggle:l,onScrubbyValue:c,headerId:d,logScrubbyValueAnalytics:u,...h}=this.props;return i.a.createElement("div",Object.assign({className:this.classes,style:t},h),this.title,this.content)}}var Ke=a("/MRd"),Je=a.n(Ke);class Xe extends n.Component{onChange(e){const{onChange:t}=this.props;t&&"function"==typeof t&&(e&&e.target?t(e.target.checked):t(e))}render(){const{value:e,id:t,className:a,title:n,checkBoxLabel:r,style:s,titleClassName:o,ariaLabel:l,disabled:c,warningText:d}=this.props;return i.a.createElement($e,{className:a,title:n,titleClassName:o,disabled:c},i.a.createElement("div",{className:U()(Je.a["cmdn-checkboxPanel-checkboxContainer"],c&&Je.a["cmdn-checkboxPanel-disabledCheckbox"])},i.a.createElement(Se.a,{id:t,label:r,style:{marginTop:"9px",marginBottom:"9px",height:"fit-content",width:"fit-content",...s},checked:e,onChange:e=>this.onChange(e),"aria-label":l,disabled:c}),c&&i.a.createElement(Ne.a,{placement:"bottom",trigger:"hover",delayShow:500},i.a.createElement("div",{className:Je.a["cmdn-checkboxPanel-artboardsWarning"]},d),i.a.createElement(Ce.a,{variant:"inspect",className:Je.a["cmdn-checkboxPanel-artboardsTooltip"]},d))))}}var Ye=a("b6PM"),Qe=a("Fyol"),Ze=a.n(Qe);var et;!function(e){e.TOP="-top",e.BOTTOM="-bottom",e.LEFT="-left",e.RIGHT="-right"}(et||(et={}));const tt=(e,t)=>`${e}-header${t}`,at=(e,t)=>""+(e+t),nt={"cmdn-sidebar-BleedPanel":"newdoc_details_label_bleed","cmdn-sidebar-SlugPanel":"newdoc_details_label_slug","cmdn-sidebar-Margins":"newdoc_details_label_Margins"};var it=a("Fids"),rt=a.n(it);class st extends n.Component{constructor(e){super(e),this.continueBtn=i.a.createRef()}componentDidMount(){this.continueBtn.current&&this.continueBtn.current.focus()}onCancel(e){this.props.store.activeModalView=null}componentWillUnmount(){this.props.store.isWarningOverlayVisible=!1}render(){const{warning:e}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:rt.a["cmdn-WarningOverlay-warning"]},e),i.a.createElement("div",null,i.a.createElement(ie.a,{className:rt.a["cmdn-WarningOverlay-button"],onClick:e=>this.onCancel(e),variant:"cta",ref:this.continueBtn},i.a.createElement(c.b,{id:"close"}))))}}var ot=Object(X.c)(st);class lt extends n.Component{onKeyDown(e){switch(e.key){case"Enter":Ue(e)}}get closeButton(){const{closeLabel:e,disableClose:t,onClose:a}=this.props;return i.a.createElement(ie.a,{id:"cmdn-btn-close",key:"cmdn-btn-close",className:Ze.a["cmdn-ActionButtons-closeButton"],disabled:t,variant:"primary",onClick:a},e)}getActionButton(e,t,a){const{disableAction:n,onAction:r}=this.props,s=t?"cmdn-btn-action-secondary":"cmdn-btn-action";return i.a.createElement(ie.a,{id:s,key:s,className:Ze.a["cmdn-ActionButtons-actionButton"],disabled:n,variant:a?"primary":"cta",onClick:()=>r(t)},e)}warningOnClick(e){e.isWarningOverlayVisible=!0;e.activeModalView=(e=>t=>i.a.createElement(e,Object.assign({},t,{warning:this.props.warning})))(ot)}render(){const{shouldReverseButtons:e,warning:t,previewModeEnabled:a,previewLabel:n,previewChangeHandler:r,hasSecondAction:s,actionLabel:o,secondActionLabel:l,highlightSecondAction:c,smallActionFont:d,store:u}=this.props,h=s?[this.closeButton]:[this.closeButton,this.getActionButton(o)],p=i.a.createElement(Ie.a,{id:"cmdn-sidebar-LargeCanvasWarning",variant:"tool",label:"Popover"});return i.a.createElement(ce,{className:U()(Ze.a["cmdn-ActionButtons-Container"],{[Ze.a["cmdn-ActionButtons-Container--withPreview"]]:n})},n&&i.a.createElement(pe,{className:Ze.a["cmdn-ActionButtons-FlexItem-PreviewMode"]},i.a.createElement(Xe,{value:a,onChange:r,checkBoxLabel:n,style:{marginTop:"7px"},ariaLabel:n})),i.a.createElement(pe,{onKeyDown:this.onKeyDown,className:U()({[Ze.a["cmdn-ActionButtons--singleItem"]]:!s,[Ze.a["cmdn-ActionButtons--firstItem"]]:s})},t&&i.a.createElement(ie.a,{variant:"action",icon:p,className:Ze.a["cmdn-ActionButtons-FlexItem-LargeCanvas-warning-wrapper"],onClick:()=>this.warningOnClick(u)}),Object(Ye.l)(e,h)),s&&i.a.createElement(pe,{onKeyDown:this.onKeyDown,className:U()([Ze.a["cmdn-ActionButtons--secondItem"],{[Ze.a["cmdn-ActionButtons--smallFont"]]:d}])},i.a.createElement("div",null,this.getActionButton(o,!1,c)),i.a.createElement("div",null,this.getActionButton(l,!0,!c))))}}var ct=Object(X.c)(lt),dt=a("Z48R"),ut=a.n(dt);class ht extends n.Component{render(){return i.a.createElement(Ge,{className:U()(ut.a["cmdn-PanelGroupTitle"],this.props.titleClassName),title:this.props.title,id:this.props.headerId,titleTooltip:this.props.titleTooltip})}}var pt=a("35Us"),mt=a.n(pt);class gt extends n.Component{get classes(){return U()(mt.a["cmdn-PanelGroup"],this.props.className)}get content(){return this.props.children}get title(){return this.props.title&&i.a.createElement(ht,{title:this.props.title,className:this.props.titleClassName,titleClassName:this.props.titleClassName,headerId:this.props.headerId,titleTooltip:this.props.titleTooltip})}render(){return i.a.createElement("div",{className:this.classes},this.title,this.content)}}class ft extends n.Component{render(){return i.a.createElement(c.b,Object.assign({},this.props),e=>i.a.createElement("span",null,"string"==typeof e?e.toUpperCase():e))}}var vt=a("Fr31");class yt extends n.Component{render(){const{value:e,intl:t}=this.props,{formatNumber:a,formatMessage:n}=t,r=Object(vt.s)(e),s=r.unit===vt.e.B?r.val:Number(r.val.toFixed(1)),o=t.textComponent||i.a.Fragment;return i.a.createElement(o,null,a(s)+n({id:r.unit}))}}var bt=Object(c.f)(yt),Et=a("H2+D"),_t=a("iNS0"),wt=a("ZVWO"),It=a("HfgS"),xt=a.n(It);class St extends n.Component{constructor(e){super(e),this.handleStockLink=this.handleStockLink.bind(this),this.handleContributorLink=this.handleContributorLink.bind(this),this.closePreviewButton=i.a.createRef()}componentDidMount(){"close_preview"===this.previewButtonTitleId&&this.closePreviewButton.current&&this.closePreviewButton.current.focus()}get showAttribution(){const{store:e}=this.props,{activeDocumentTemplate:t}=e;if(t){const e=t;return e.contributor_name&&""!==e.contributor_name&&e.contributor_url&&""!==e.contributor_url}return!1}getAttribution(e){const t=U()(xt.a["cmdn-TemplatePanel-actionLink"],xt.a["cmdn-TemplatePanel-contributorLink"]);return this.showAttribution&&i.a.createElement("div",{id:"cmdn-sidebar-TemplateBackAttribution",className:xt.a["cmdn-TemplatePanel-attribution"]},i.a.createElement(c.b,{id:"by"}),i.a.createElement("a",{className:t,tabIndex:0,onClick:this.handleContributorLink,onKeyDown:this.handleContributorLink},i.a.createElement("span",null,e.contributor_name)))}get previewButtonTitleId(){return this.props.isPreview?"close_preview":"newdoc_button_preview"}get previewButtonId(){return this.props.isPreview?"cmdn-sidebar-ClosePreviewButton":"cmdn-sidebar-SeePreviewButton"}togglePreview(e){this.props.isPreview?this.hidePreview():this.showPreview()}showPreview(){this.props.history.push("/template-preview");const{analytics:e,activeDocumentTemplate:t,activeView:a}=this.props.store;e.logFNFTActionClickedEvent("preview",{...t,activeFilter:a})}hidePreview(){this.props.history.goBack(),this.props.store.forceFocus=!0;const{analytics:e,activeDocumentTemplate:t,activeView:a}=this.props.store;e.logFNFTActionClickedEvent("preview-close",{...t,activeFilter:a})}onClose(e){this.props.store.closeApp(wt.a.CLOSE)}onDownload(e){Object(Et.k)(this.props.store)}onOpen(e){Object(Et.a)(this.props.store)}get actionButton(){const{activeDocumentTemplate:e}=this.props.store,t=e;return t.isLicensed&&!t.isDownloading?{onAction:e=>this.onOpen(e),actionLabel:i.a.createElement(c.b,{id:"open"})}:t.isLicensed&&t.isDownloading?{actionLabel:i.a.createElement(_e.a,{size:"S",variant:"overBackground"})}:{onAction:e=>this.onDownload(e),actionLabel:i.a.createElement(c.b,{id:"download"})}}handleStockLink(e){const{store:t}=this.props,{activeView:a,analytics:n}=t;if(" "===e.key||"click"===e.type){const e={actionURL:_t.b.openStockLicense(n,t.appSettings),activeFilter:a};n.logFNFTActionClickedEvent("stock-sidebar",e)}}handleContributorLink(e){const{store:t}=this.props,{activeView:a,analytics:n,activeDocumentTemplate:i}=t,r=i?i.contributor_url:"";if(" "===e.key||"click"===e.type){const e={actionURL:_t.b.openStockContributorUrl(r,n,t.appSettings),activeFilter:a};n.logFNFTActionClickedEvent("contributor-sidebar",e)}}render(){const{store:e,isPreview:t,id:a}=this.props,{activeDocumentTemplate:n,isWindowsOS:r}=e,{actionButton:s}=this;if(!n)return i.a.createElement(gt,{className:xt.a["cmdn-TemplatePanel-flexContainer"]});const o=n,l=!!o.size,d=o.previews&&o.previews.length>0,u=!o.isLicensed,h=be()(o.description||""),p="string"==typeof o.price_prompt?o.price_prompt.toUpperCase():o.price_prompt,m=U()(xt.a["cmdn-TemplatePanel-actionLink"],xt.a["cmdn-TemplatePanel-stockLink"]);return i.a.createElement(ce,{id:a,className:xt.a["cmdn-TemplatePanel-flexContainer"]},i.a.createElement(pe,{className:xt.a["cmdn-TemplatePanel-templateDetails"]},i.a.createElement(gt,{title:i.a.createElement(ft,{id:"newdoc_details_label_template_title"})},i.a.createElement($e,{className:xt.a["cmdn-TemplatePanel-panelWrapper"]},i.a.createElement("h6",{id:"cmdn-sidebar-TemplateTitle",className:xt.a["cmdn-TemplatePanel-title"]},o.title),this.getAttribution(n),i.a.createElement("div",{id:"cmdn-sidebar-TemplateStockLink",className:xt.a["cmdn-TemplatePanel-stockLink-wrapper"]},i.a.createElement("img",{src:"cmdn-assets/images/products/st_appicon_256.svg",className:xt.a["cmdn-TemplatePanel-stockLink-icon"]}),i.a.createElement("a",{tabIndex:0,className:m,onClick:this.handleStockLink,onKeyDown:this.handleStockLink},i.a.createElement("span",{className:xt.a["cmdn-TemplatePanel-stockLink-label"]},i.a.createElement(c.b,{id:"adobe_stock"})))),i.a.createElement("div",{id:"cmdn-sidebar-TemplateStockContent",className:xt.a["cmdn-TemplatePanel-stockContent"],dangerouslySetInnerHTML:{__html:h}}),u&&i.a.createElement("div",{id:"cmdn-sidebar-TemplateStockPrice",className:U()(xt.a["cmdn-TemplatePanel-stockPrice"],{[xt.a["cmdn-Component-marginBottom"]]:!l})},p),l&&i.a.createElement("div",{id:"cmdn-sidebar-TemplateStockInfo",className:U()(xt.a["cmdn-TemplatePanel-stockInfo"],xt.a["cmdn-Component-marginBottom"])},i.a.createElement(c.b,{id:"listview_size_header"}),i.a.createElement("span",{className:xt.a["cmdn-TemplatePanel-templateSize"]},i.a.createElement(bt,{value:o.size}))),d&&i.a.createElement("div",null,i.a.createElement(ie.a,{onClick:e=>this.togglePreview(e),ref:this.closePreviewButton,id:this.previewButtonId},i.a.createElement(c.b,{id:this.previewButtonTitleId})))))),i.a.createElement(pe,null,i.a.createElement(ct,{actionLabel:s.actionLabel,closeLabel:i.a.createElement(c.b,{id:"close"}),disableClose:!!t,shouldReverseButtons:r,onClose:e=>this.onClose(e),onAction:s.onAction,disableAction:o.isDownloading})))}}const Ot=Object(ae.n)(St,{actionButton:ae.k}),Ct=V(Object(X.c)(Object(c.f)(Object(F.a)(Ot))));var Pt=a("3C4i"),Nt=a("bgk2"),At=a.n(Nt);class Tt extends n.Component{constructor(e){super(e),this.onKeyDownHandler=this.onKeyDownHandler.bind(this),this.onCancel=this.onCancel.bind(this),this.onFocus=this.onFocus.bind(this)}onCancel(){"function"==typeof this.props.onCancel&&this.props.onCancel()}onFocus(e){Object(Pt.trapFocus)(this,e)}onKeyDownHandler(e){"Escape"===e.key?(Ue(e),this.onCancel()):Object(Pt.trapFocus)(this,e)}render(){return i.a.createElement("div",{ref:this._modalRef,className:At.a["cmdn-Modal"],defaultpreventedkeys:["Escape"],onKeyDown:this.onKeyDownHandler,onFocus:this.onFocus,tabIndex:0},this.props.children)}}class Mt extends n.Component{constructor(e){super(e),this.onCancel=this.onCancel.bind(this)}onCancel(){this.props.store.activeModalView=null}render(){const{store:e}=this.props,t=e.activeModalView;return t?i.a.createElement(Tt,{onCancel:this.onCancel},i.a.createElement(t,null)):null}}const Lt=Object(ae.n)(Mt,{}),Rt=Object(X.c)(Object(F.a)(Lt));var Dt=a("H9Wh"),zt=a.n(Dt);class kt extends n.Component{componentDidMount(){const{analytics:e,activeDocumentTemplate:t,activeView:a}=this.props.store;e.logFNFTActionClickedEvent("render-preview",{...t,activeFilter:a})}goBack(e){this.props.history.goBack(),this.props.store.forceFocus=!0;const{analytics:t,activeDocumentTemplate:a,activeView:n}=this.props.store;t.logFNFTActionClickedEvent("preview-back",{...a,activeFilter:n})}render(){const{store:e}=this.props,{activeDocumentTemplate:t,activeModalView:a}=e;if(!t)return null;const n=t,{size:r,downloadStatus:s,downloadedSize:o,isLicensed:l,isDownloading:d}=n,u=(s&&s.downloadStatusMessage,U()(zt.a["cmdn-TemplatePreview-content"],{[zt.a["cmdn-TemplatePreview-content-noScroll"]]:a}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(ce,{id:"cmdn-sidebar-PreviewContainer",className:zt.a["cmdn-TemplatePreview-container"]},i.a.createElement(pe,null,i.a.createElement(ce,{className:zt.a["cmdn-TemplatePreview-header"]},i.a.createElement(pe,{className:zt.a["cmdn-TemplatePreview-buttonContainer"]},i.a.createElement(ie.a,{quiet:!0,variant:"tool",id:"cmdn-sidebar-PreviewBackButton",icon:i.a.createElement(se.a,{size:"L"}),className:zt.a["cmdn-TemplatePreview-button"],onClick:e=>this.goBack(e)},i.a.createElement(c.b,{id:"back"}))))),i.a.createElement(pe,{className:zt.a["cmdn-TemplatePreview-contentWrapper"]},i.a.createElement(ce,{className:zt.a["cmdn-TemplatePreview-contentFlexWrapper"]},i.a.createElement(pe,{className:u},i.a.createElement(ve,{template:n})),i.a.createElement(pe,{className:zt.a["cmdn-TemplatePreview-sidebar"]},i.a.createElement(Ct,{isPreview:!0}))))),i.a.createElement(Rt,null))}}const jt=Object(ae.n)(kt,{}),Bt=V(Object(X.c)(Object(F.a)(jt)));var Vt=a("zcnm"),Ft=a("63WY"),Ht=a.n(Ft),Ut=a("0B1G");function Gt(e,t){return!(!e||!t||void 0===t.identifier||void 0===e[t.identifier])}function Wt(e,t,a){const n=function(e){const t=e.width;return t&&t>1334?243:181}(e),i=t&&t.current;if(i){const e=i.offsetWidth;if(e>0&&n>0)return Math.floor(e/n)}return a}function qt(e,t){if(e){if(e.kind===Ut.a.PRESET)return e.category===t;{if(t===Z.default.TEMPLATES)return!0;const a=e,n=Object(ae.D)(a.template_category);return n instanceof Array&&-1!==n.map(e=>e.toLowerCase()).indexOf(t)}}return!1}var $t=a("5/H/"),Kt=a.n($t),Jt=a("21yx"),Xt=a.n(Jt),Yt=a("CksP"),Qt=a.n(Yt),Zt=a("uT0p"),ea=a.n(Zt);const ta=e=>e+"-title",aa=e=>e+"-cards",na=e=>e+"-expand-button",ia=e=>e+"-view-more-less-button",ra=(e,t)=>`${e}-card-${t}`,sa=(e,t)=>`${e}-cmdn-grid-card-delete-icon-${t}`;var oa=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};let la=class extends n.Component{render(){var e;const{element:t,className:a,largeIcon:n}=this.props,{title:r,price_prompt:s,thumbnail_url:o,size:l,downloadStatus:c,isLicensed:d,isDownloading:u}=t,h=c&&c.downloadStatusMessage,p=[Qt.a["cmdn-TemplateCard"],Qt.a["template-grid-item"],a],m=o&&Object(me.a)(o),g=U()(Qt.a["cmdn-TemplateCard-thumbnail"],{[Qt.a["cmdn-TemplateCard-thumbnail--large"]]:n});return i.a.createElement("div",{className:U()(p)},i.a.createElement("div",{"data-qe-id":"cmdn-grid-card-icon",className:g,style:{backgroundImage:`url("${Object(me.b)(m)}")`}},d&&u&&i.a.createElement("div",{className:Qt.a["cmdn-TemplateCard-layoutContainer"]},!h&&i.a.createElement(_e.a,{"data-qe-id":"cmdn-TemplateCard-DownloadSpinner",size:"M"}),h&&i.a.createElement("div",{className:Qt.a["cmdn-TemplateCard-error"]},h))),i.a.createElement("div",{"data-qe-id":"cmdn-grid-card-info",className:Qt.a["cmdn-TemplateCard-info"],"data-qe-size":l},i.a.createElement("span",{"data-qe-id":"cmdn-grid-card-title",className:U()(ea.a["cmdn-GridCard-title"],ea.a["cmdn-GridCard-truncateText"],Qt.a["cmdn-TemplateCard-title"],d?Qt.a["cmdn-TemplateCard-title-center"]:Qt.a["cmdn-TemplateCard-title-left"])},r),!d&&i.a.createElement("span",{"data-qe-id":"cmdn-grid-card-price",className:Qt.a["cmdn-TemplateCard-price"]},null===(e=null==s?void 0:s.toString())||void 0===e?void 0:e.toUpperCase())),d&&!u&&i.a.createElement("div",{className:Qt.a["cmdn-TemplateCard-licensed"]},i.a.createElement("div",{className:Qt.a["cmdn-TemplateCard-licensedBackground"]}),i.a.createElement(Xt.a,{"data-qe-id":"cmdn-TemplateLicensedCheckmark",className:Qt.a["cmdn-TemplateCard-licensedIcon"]})))}};la=oa([F.a],la);var ca=la,da=a("7D3O"),ua=a.n(da),ha=a("JscO"),pa=a("ovpn"),ma=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};const ga=ha.a.get(pa.a.PresetCardProviderInterface);let fa=class extends n.Component{render(){const{element:e,className:t,largeIcon:a}=this.props,{name:n,description:r}=e,s=[ua.a["cmdn-PresetCard"],t,{[ua.a["cmdn-PresetCard--retro"]]:ga.shouldIncludeRetroStyle()}];return i.a.createElement("div",{className:U()(s)},i.a.createElement("div",{"data-qe-id":"cmdn-grid-card-icon","aria-hidden":"true",className:U()({[ua.a["cmdn-PresetCard-icon--large"]]:a},ua.a["cmdn-PresetCard-icon"])},ga.getCardIcon(e)),i.a.createElement("div",{"data-qe-id":"cmdn-grid-card-title","aria-hidden":"true",className:U()(ea.a["cmdn-GridCard-title"],ea.a["cmdn-GridCard-truncateText"],ua.a["cmdn-PresetCard-Title"])},n),i.a.createElement("div",{"data-qe-id":"cmdn-grid-card-subtitle",className:ua.a["cmdn-PresetCard-subtitle"],"aria-hidden":"true"},r))}};fa=ma([F.a],fa);var va=fa,ya=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},ba=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ea=class extends n.Component{constructor(e){super(e),this.clickCount=0,this.onCardClick=this.onCardClick.bind(this),this.onItemDoubleClick=this.onItemDoubleClick.bind(this),this.onDeleteClick=this.onDeleteClick.bind(this),this.handleDeleteAction=this.handleDeleteAction.bind(this),this.updateSelection=this.updateSelection.bind(this),this.getCardComponent=this.getCardComponent.bind(this)}componentDidMount(){const{element:e,onDocMounted:t}=this.props;t&&t(e)}componentWillUnmount(){const{element:e,onDocUnmounted:t}=this.props;t&&t(e)}onCardClick(){this.updateSelection()}onItemDoubleClick(){this.props.onItemDoubleClick&&this.props.onItemDoubleClick()}onDeleteClick(){this.handleDeleteAction()}handleDeleteAction(){const{element:e,onItemDeleted:t}=this.props;t&&t(e)}updateSelection(){const{element:e,onItemSelected:t}=this.props;t&&t(e)}getCardComponent(e,t){return e===Ut.a.PRESET?i.a.createElement(va,Object.assign({key:e},t)):e===Ut.a.TEMPLATE?i.a.createElement(ca,Object.assign({key:e},t)):void 0}render(){const{element:e={},id:t,isSelected:a,isDeletable:n,className:r,tallCard:s,wideCard:o,boundariesElement:l}=this.props,c=[ea.a["cmdn-GridCard"],r,{[ea.a["is-selected"]]:a,[ea.a["cmdn-GridCard--wide"]]:o,[ea.a["cmdn-GridCard--tall"]]:s,"is-licensed":e.isLicensed}],d=this.getCardComponent(e&&e.kind,{element:e,largeIcon:o&&s}),u=i.a.createElement("div",{className:"cmdn-GridCard-overlay"},a&&n&&i.a.createElement(ie.a,{className:U()(ea.a["cmdn-GridCard-deleteButton"]),variant:"tool",id:this.props.deleteButtonId,icon:i.a.createElement(Kt.a,{size:"S"}),quiet:!0,onClick:this.onDeleteClick}));return i.a.createElement("div",{id:t,className:U()(c),onClick:this.onCardClick,onDoubleClick:this.onItemDoubleClick,tabIndex:a?0:-1,key:e.name,"aria-label":`${e.name} ${e.description}`,"aria-selected":a,role:"button"},d,e.tip?i.a.createElement(Ne.a,{trigger:"hover",placement:"bottom",boundariesElement:()=>l,delayShow:800},u,i.a.createElement(Ce.a,{variant:"inspect"},e.tip)):u)}};Ea=ya([F.a,ba("design:paramtypes",[Object])],Ea);var _a=Ea,wa=a("SoI9"),Ia=a.n(wa),xa=a("V9pm");class Sa extends n.Component{constructor(e){var t,a;super(e),this.gridWrapperRef=i.a.createRef(),this.gridContainerRef=i.a.createRef(),this.oldContainerSize={width:0,height:0},this.positionMap={},this._resetOutOfViewSelected=!1,this.customIdForCollapse=`${this.props.store.activeView}-${this.props.id}`;const n=null===(t=this.props.store.collapsedTabsState)||void 0===t?void 0:t[this.customIdForCollapse];let r=!1;r=Y.a.id===xa.a.ILST&&void 0!==n?null==n||n:!!this.props.collapsible&&(null!==(a=this.props.collapsed)&&void 0!==a&&a),this.state={collapsed:r,collapsible:this.props.collapsible,numCards:0,shouldRecomputeNumCards:!0,cardsOnRow:void 0},this.onNextItem=this.onNextItem.bind(this),this.onPreviousItem=this.onPreviousItem.bind(this),this.onNextRow=this.onNextRow.bind(this),this.onPreviousRow=this.onPreviousRow.bind(this),this.onViewAllToggle=this.onViewAllToggle.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.focusSelectedElement=this.focusSelectedElement.bind(this),this.windowResizeHandler=this.windowResizeHandler.bind(this),this.resizeHandlerRef=$()(this.windowResizeHandler,60),this.handleGridFocus=this.handleGridFocus.bind(this),this.getPosition=this.getPosition.bind(this),this.onViewAllKeyDown=this.onViewAllKeyDown.bind(this)}componentDidMount(){this.initDisplayPositions(),this.recomputeNumCards(!1),window.addEventListener("resize",this.resizeHandlerRef)}componentDidUpdate(e){const t=this.props.elements,a=this.props.selectedItem,n=e.selectedItem,i=this.props.store.activeView;if(t!==e.elements&&this.initDisplayPositions(),a&&n&&(n.kind!==a.kind||i===Z.default.TEMPLATES)&&qt(n,i)&&qt(a,i)&&Gt(this.positionMap,a)&&!Gt(this.positionMap,n)){const e=this.visibleElements,t=this.getPosition(a);this.props.collapsed&&e&&e.length>0&&t>=e.length?this.onItemSelected(e[e.length-1]):this.focusSelectedElement(a)}else this.props.store.forceFocus&&requestAnimationFrame(()=>{this.focusSelectedElement(a)})}initDisplayPositions(){this.props.elements&&(this.positionMap=this.props.elements.reduce((e,t,a)=>(t.identifier&&(e[t.identifier]=a),e),{}))}getPosition(e){return e&&void 0!==e.identifier&&this.positionMap[e.identifier]||0}componentWillUnmount(){window.removeEventListener("resize",this.resizeHandlerRef)}windowResizeHandler(){const e=this.props.containerSize;if((this.oldContainerSize.width!==e.width||this.oldContainerSize.height!==e.height)&&this.gridWrapperRef&&this.gridWrapperRef.current&&this.gridWrapperRef.current.offsetWidth>0){const t=Wt(e,this.gridWrapperRef,this.allElementsCount);this.oldContainerSize.width>0&&this.oldContainerSize.height>0&&(this.props.store.forceFocus=!0,this._resetOutOfViewSelected=!0),this.setState({cardsOnRow:t,shouldRecomputeNumCards:!0}),this.oldContainerSize=e,this.recomputeNumCards(!1)}}onItemSelected(e){Gt(this.positionMap,e)&&(this.props.selectedItem&&this.props.selectedItem.identifier===e.identifier||this.props.onItemSelected&&this.props.onItemSelected(e),this.focusSelectedElement(e))}onItemDoubleClick(e){this.props.onItemDoubleClick&&this.props.onItemDoubleClick(e),this.focusSelectedElement(e)}onItemDeleted(e){this.props.onItemDeleted&&this.props.onItemDeleted(e).then(()=>this.props.selectedItem&&this.focusSelectedElement(this.props.selectedItem))}focusSelectedElement(e){var t,a,n,i,r,s;let{cardsOnRow:o=0,collapsed:l}=this.state;const c=this.visibleElements;if(e&&Gt(this.positionMap,e)&&this.props.store.isDialogVisible){const d=this.gridWrapperRef.current&&this.gridWrapperRef.current.getElementsByClassName(ea.a["cmdn-GridCard"]);if(d){const u=this.getPosition(e);if(u<d.length){if((!l||c.length<=o)&&u<o&&!((e,t)=>{if(!e||!t)return!1;const a=e.getBoundingClientRect(),n=t.getBoundingClientRect();return a.top>=n.top})(null===(t=this.gridContainerRef)||void 0===t?void 0:t.current,this.props.store.boundariesElement)||this.props.store.isDeepLinkTemplate){if(this.props.store.isDeepLinkTemplate&&(o=Wt(this.props.containerSize,this.gridWrapperRef,this.allElementsCount)),this.props.store.isDeepLinkTemplate&&u>=o){const e=null===(i=null===(n=null===(a=this.gridContainerRef)||void 0===a?void 0:a.current)||void 0===n?void 0:n.children[1])||void 0===i?void 0:i.children[u];null==e||e.scrollIntoView()}else null===(s=null===(r=this.gridContainerRef)||void 0===r?void 0:r.current)||void 0===s||s.scrollIntoView();this.props.store.isDeepLinkTemplate=!1}d[u].focus(),this.props.store.forceFocus=!1}}}}recomputeNumCards(e=!1,t=!1){if(e||this.state.shouldRecomputeNumCards){const a=this.numVisibleCards,n=this.props.selectedItem;if(n&&this.getPosition(n)>=a&&Gt(this.positionMap,n)&&this.state.collapsed&&!this._resetOutOfViewSelected)return void this.onViewAllToggle(!0,!1);const i=(this.state.cardsOnRow||1)*(this.props.collapsedRowsNo||1)<this.props.elements.length,r=this.props.collapsible&&(e||(this.state.collapsed?a<this.props.elements.length:i));this._resetOutOfViewSelected=!1,this.setState({numCards:a,shouldRecomputeNumCards:!1,collapsible:r},()=>{const e=this.props.selectedItem;if((!e||this.getPosition(e)>=this.state.numCards)&&Gt(this.positionMap,e))this.onItemSelected(this.visibleElements[0]);else if(t||this.props.forceFocus){if(this.props.forceFocus){const e=document.activeElement;e&&e.classList&&e.classList.contains("spectrum-Tabs-item")&&e.classList.remove("focus-ring")}requestAnimationFrame(()=>this.focusSelectedElement(e))}})}}onNextItem(){var e,t;const{elements:a,selectedItem:n}=this.props;if(a&&n){const i=this.getPosition(n);let r=Math.min(i+1,this.state.numCards-1);if(i===r){if(!this.state.collapsible||!this.state.collapsed)return null===(t=(e=this.props).jumpToNextGrid)||void 0===t?void 0:t.call(e);this.onViewAllToggle(!0),r=i+1}r>=0&&this.onItemSelected(a[r])}}onPreviousItem(){var e,t;const{elements:a,selectedItem:n}=this.props;if(a&&n){const i=this.getPosition(n),r=Math.max(0,i-1);if(i===r)return null===(t=(e=this.props).jumpToPreviousGrid)||void 0===t?void 0:t.call(e);this.onItemSelected(a[r])}}onNextRow(){const e=this.state.cardsOnRow,{elements:t,selectedItem:a}=this.props;if(t&&a&&e){const t=this.allElementsCount;let n=this.getPosition(a)+e;const i=Math.floor((t-1)/e);Math.floor(n/e)<=i?(n=Math.min(n,t-1),this.onItemSelected(this.props.elements[n])):this.props.jumpToNextGrid&&this.props.jumpToNextGrid()}}onPreviousRow(){const e=this.state.cardsOnRow,{elements:t,selectedItem:a}=this.props;if(t&&a&&e){let t=this.getPosition(a)-e;Math.floor(t/e)>=0?(t=Math.max(0,t),this.onItemSelected(this.props.elements[t])):this.props.jumpToPreviousGrid&&this.props.jumpToPreviousGrid()}}onViewAllToggle(e=!1,t=!0){this.props.collapseToggleTop&&(this._resetOutOfViewSelected=!0),this.setState({collapsed:!e&&!this.state.collapsed},()=>{this.recomputeNumCards(!0,!this.props.collapseToggleTop),this.props.store.setCollapsedTabsState(this.customIdForCollapse,this.state.collapsed)}),t&&this.props.store.analytics.logFNFTActionClickedEvent(this.state.collapsed?"preset-viewmore":"preset-viewless",{activeFilter:this.props.store.activeView})}onViewAllKeyDown(e){"Enter"!==e.key&&" "!==e.key||(this.onViewAllToggle(),e.stopPropagation())}get numVisibleCards(){const e=this.allElementsCount;let t=this.state.cardsOnRow;return void 0===t&&(t=Wt(this.props.containerSize,this.gridWrapperRef,e),this.setState({cardsOnRow:t})),this.state.collapsed?Math.min(t*(this.props.collapsedRowsNo||1)||e,e):e}get visibleElements(){const e=this.props.elements,t=this.state.numCards;return e&&this.state.collapsed&&t>=0&&t<=e.length?e.slice(0,t):e}onKeyDown(e){switch(e.key){case"ArrowLeft":this.onPreviousItem();break;case"ArrowRight":this.onNextItem();break;case"ArrowUp":this.onPreviousRow();break;case"ArrowDown":this.state.collapsible&&this.state.collapsed&&this.onViewAllToggle(!0),this.onNextRow();break;case"Enter":{const t=e.target.className||"";if(!(-1!==t.indexOf(ea.a["cmdn-GridCard"])&&-1!==t.indexOf(ea.a["is-selected"])))break;this.props.selectedItem&&this.onItemDoubleClick(this.props.selectedItem);break}case"Delete":case"Backspace":this.props.deletableItems&&this.props.selectedItem&&!this.props.selectedItem.hideDltBtn&&this.onItemDeleted(this.props.selectedItem)}}get allElementsCount(){return this.props.elements&&this.props.elements.length||0}handleGridFocus(e){const t=this.props.elements;this.gridWrapperRef&&this.gridWrapperRef.current&&this.gridWrapperRef.current.classList===e.target.classList&&(Gt(this.positionMap,this.props.selectedItem)?this.focusSelectedElement(this.props.selectedItem):t&&t.length>0&&this.onItemSelected(t[0]))}render(){var e;const{id:t,elements:a,title:n,titleIsAlreadyTranslated:r,selectedItem:s,tallCards:o,deletableItems:l,onlyTitle:d,limit:u,collapseToggleTop:h}=this.props,{collapsible:p,collapsed:m}=this.state,g=u?null===(e=this.visibleElements)||void 0===e?void 0:e.slice(0,u):this.visibleElements,f=p&&m,v=function(e){const t=e.width;return!!(t&&t>1334)}(this.props.containerSize),y=[Ia.a["cmdn-GridView"],{[Ia.a["cmdn-GridView-wide"]]:v,[Ia.a["cmdn-GridView-tallCards"]]:o}],b=Y.a.id===xa.a.ILST?i.a.createElement(c.b,{id:"newdoc_view_all_short"}):i.a.createElement(c.b,{id:"newdoc_view_all"});return i.a.createElement("div",{className:U()(y)},a&&a.length>0&&i.a.createElement("div",{id:t,ref:this.gridContainerRef},i.a.createElement("div",{className:Ia.a["cmdn-GridView-Header"]},d?i.a.createElement("div",{id:ta(t),className:Ia.a["cmdn-GridView-Title"],"data-qe-id":"cmdn-grid-title-only"},r?n:i.a.createElement(c.b,{id:n})):i.a.createElement("div",{id:ta(t),className:Ia.a["cmdn-GridView-Title"]},n?r?i.a.createElement("span",null,n.toUpperCase()):i.a.createElement(ft,{id:n}):i.a.createElement(ft,{id:"newdoc_blank_documents"}),i.a.createElement("div",{"data-qe-id":"cmdn-grid-title-count",className:Ia.a["cmdn-GridView-Count"]},"(",a.length,")")),h&&p&&i.a.createElement("div",{"data-qe-id":"cmdn-view-more-less",tabIndex:0,className:Ia.a["cmdn-GridView-Expander-ViewMore"],onClick:()=>this.onViewAllToggle(),onKeyDown:this.onViewAllKeyDown,id:ia(t)},m?i.a.createElement(c.b,{id:"newdoc_view_more"}):i.a.createElement(c.b,{id:"newdoc_view_less"}))),i.a.createElement("div",{id:aa(t),tabIndex:-1,onKeyDown:this.onKeyDown,ref:this.gridWrapperRef,className:U()(Ia.a["cmdn-GridView-GridWrapper"],{[Ia.a[`cmdn-GridView-GridWrapper-collapsed-${this.props.collapsedRowsNo}-rows`]]:f}),onFocus:this.handleGridFocus},g&&g.map((e,a)=>i.a.createElement(_a,{boundariesElement:this.props.store.boundariesElement,id:ra(t,a),deleteButtonId:sa(t,a),element:e,isDeletable:l&&!e.hideDltBtn,isSelected:e.identifier===(s&&s.identifier),key:e.identifier,onItemDeleted:()=>this.onItemDeleted(e),onItemDoubleClick:()=>this.onItemDoubleClick(e),onItemSelected:()=>this.onItemSelected(e),tallCard:v&&o,wideCard:v}))),p&&m&&!h&&i.a.createElement("div",{className:Ia.a["cmdn-GridView-Expander"]},i.a.createElement(ie.a,{id:na(t),quiet:!0,variant:"secondary",onClick:this.onViewAllToggle,"aria-label":b},b,i.a.createElement(Ht.a,{size:"XS",className:Ia.a["cmdn-GridView-Expander-Icon"]})))))}}var Oa=Object(c.f)(Sa,{withRef:!0}),Ca=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};let Pa=class extends n.Component{componentDidMount(){const{store:e}=this.props;e.activeDocumentTemplate||this.props.store.setDefaultActiveDocumentTemplate()}render(){var e,t,a,n,r;const{store:s,viewId:o}=this.props,l=s.getPresetsByCategoryType(o);let c=s.getTemplatesByCategoryType(o);if(Y.a.isStockCollectionsEnabled){const t=s.templateCollections.find(e=>{var t;return null===(t=e.tabs)||void 0===t?void 0:t.includes(o)});(null===(e=null==t?void 0:t.files)||void 0===e?void 0:e.length)&&(c=c.concat(t.files))}const d=!!(c&&c.length>0),u=Y.a.userQuota>0,h=o===Z.default.RECENT,p=Y.a.id===xa.a.ILST;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Oa,{id:"cmdn-grid-presets",collapsed:!0,collapsible:(!h||p)&&d,collapseToggleTop:null===(t=s.gridViewConfig)||void 0===t?void 0:t.collapseToggleTop,collapsedRowsNo:null===(a=s.gridViewConfig)||void 0===a?void 0:a.collapsedRowsNo,containerSize:s.containerSize,elements:l,onItemDoubleClick:e=>Object(Et.i)(s),onItemSelected:e=>Object(Et.g)(s,e),selectedItem:s.activeDocumentTemplate,jumpToNextGrid:()=>Object(Et.f)(s,o),store:this.props.store,tallCards:!1,title:h?"newdoc_your_recent_items":"newdoc_blank_documents",forceFocus:s.forceFocus}),d&&u&&i.a.createElement(Oa,{id:"cmdn-grid-templates",collapsible:!1,collapseToggleTop:null===(n=s.gridViewConfig)||void 0===n?void 0:n.collapseToggleTop,collapsedRowsNo:null===(r=s.gridViewConfig)||void 0===r?void 0:r.collapsedRowsNo,containerSize:s.containerSize,elements:c,onItemDoubleClick:e=>Object(Et.j)(s,e),onItemSelected:e=>Object(Et.g)(s,e),selectedItem:s.activeDocumentTemplate,jumpToPreviousGrid:()=>Object(Et.d)(s,o),store:this.props.store,tallCards:!0,title:"listview_template_tab_label",forceFocus:s.forceFocus}),i.a.createElement(Rt,null))}};Pa=Ca([F.a],Pa);var Na=Object(c.f)(Pa);const Aa=i.a.createContext(void 0);class Ta extends n.Component{render(){const{children:e,values:t}=this.props;return i.a.createElement(Aa.Provider,{value:t},e)}}var Ma=a("zBY0");class La extends n.Component{render(){const{children:e,featureFlags:t,render:a,renderFallback:n}=this.props;return i.a.createElement(Aa.Consumer,null,i=>Ma.a.hasFeatureFlags(i,t)?e||"function"==typeof a&&a():"function"==typeof n&&n())}}var Ra=a("GfA4"),Da=a.n(Ra),za=a("5RY0"),ka=a.n(za);class ja extends n.Component{constructor(e){super(e),this.state={},this.openPicker=this.openPicker.bind(this),this.onFillChange=this.onFillChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}async openPicker(e){if(this.props.onOpenPicker){const{intl:t,analytics:a}=this.props,{formatMessage:n}=t;a.logPresetDetailsInteraction("background-contents-color-picker");const i=await this.props.onOpenPicker(e||this.props.customColor,n({id:"newdoc_color-picker_context"}));i&&this.onFillChange(i)}}onFillChange(e){"custom"===e?this.openPicker(this.props.defaultValue):"function"==typeof this.props.onFillChange&&this.props.onFillChange(e)}onKeyDown(e){" "===e.key&&this.openPicker()}render(){const{value:e,values:t,intl:a,customColorRgbString:n,analytics:r}=this.props,s=t&&t.map(e=>({label:a.formatMessage({id:"newdoc_details_backgroundcolor_"+e}),value:e}));return i.a.createElement($e,{title:i.a.createElement(c.b,{id:"newdoc_details_label_background"})},i.a.createElement(ce,null,i.a.createElement(pe,{className:ka.a["cmdn-BackgroundContents-color"]},i.a.createElement(Da.a,{id:"cmdn-sidebar-BackgroundContents-dropdown",className:ka.a["cmdn-BackgroundContents-dropdown"],value:e,defaultValue:"white",options:s,onOpen:()=>r.logPresetDetailsInteraction("background-contents-select"),onChange:this.onFillChange,placeholder:a.formatMessage({id:"select_placeholder"}),role:"combobox"})),i.a.createElement(pe,{className:ka.a["cmdn-BackgroundContents-pickerItem"]},i.a.createElement("div",{id:"cmdn-sidebar-BackgroundContents-colorPicker",tabIndex:0,className:ka.a["cmdn-BackgroundContents-colorPicker"],onClick:()=>this.openPicker(),style:n?{backgroundColor:n}:{},onKeyDown:this.onKeyDown}))))}}var Ba=Object(c.f)(ja),Va=a("nGeh"),Fa=a.n(Va);function Ha(e,t,a,n){var i;const r=(null==n?void 0:n.formatMessage({id:a}))||l.a.formatMessage(a),s=null===(i=null==e?void 0:e.find(e=>e.value===t))||void 0===i?void 0:i.label;return s?`${s}, ${r}`:r}class Ua extends n.Component{render(){const{id:e,defaultValue:t,depth:a,hasDepth:n,value:r,defaultDepth:s,colorModes:o,intl:l,onChange:d,onEncodingChange:u,titleClassName:h,analytics:p}=this.props,m=o&&o.map(e=>({label:l.formatMessage({id:"newdoc_details_colormode_"+e.mode}),value:e.mode})),g=o&&o.find(e=>e.mode===r);let f=[];g&&g.values&&(f=g.values.map(e=>({label:e+" bit",value:e})));const v=[Fa.a["cmdn-ColorModePanel-mode"]];n&&v.push(Fa.a["cmdn-ColorModePanel-hasEncoding"]);const y=Ha(m,r,"newdoc_details_label_colormode",l);return i.a.createElement($e,{title:i.a.createElement(c.b,{id:"newdoc_details_label_colormode"}),titleClassName:h,className:Fa.a["cmdn-ColorModePanel"]},i.a.createElement(ce,{id:e},i.a.createElement("div",{className:U()(v)},i.a.createElement(Da.a,{id:"cmdn-sidebar-ColorModePanel-mode",value:r,defaultValue:t,options:m,onOpen:()=>p.logPresetDetailsInteraction("color-mode"),onChange:e=>d(o&&o.find(t=>t.mode===e)),placeholder:l.formatMessage({id:"select_placeholder"}),"aria-label":y,role:"combobox"})),n&&i.a.createElement("div",{className:Fa.a["cmdn-ColorModePanel-encoding"]},i.a.createElement(Da.a,{id:"cmdn-sidebar-ColorModePanel-depth",value:a,defaultValue:s,options:f,onOpen:()=>p.logPresetDetailsInteraction("color-mode-bits"),onChange:e=>u(e),placeholder:l.formatMessage({id:"select_placeholder"}),role:"combobox"}))))}}var Ga=Object(c.f)(Ua),Wa=a("QvCo"),qa=a.n(Wa);class $a extends n.Component{render(){const{values:e,value:t,defaultValue:a,intl:n,onChange:r,analytics:s}=this.props,o=e&&e.reduce((e,t)=>e.concat(t.map(e=>{let t=e,a=e;switch("object"==typeof e&&null!==e&&(t=e.label||e.value,a=e.value),t){case"none":return{value:a,label:n.formatMessage({id:"newdoc_details_label_noColorManage"})};case"default":return{value:a,label:n.formatMessage({id:"newdoc_details_label_workingProfile"})};default:return{value:a,label:t}}})),[]);return i.a.createElement($e,{title:i.a.createElement(c.b,{id:"newdoc_details_label_colorProfile"})},i.a.createElement(Da.a,{id:"cmdn-sidebar-ColorProfile",value:t,defaultValue:a,options:o,onOpen:()=>s.logPresetDetailsInteraction("color-profile"),onChange:r,className:qa.a["cmdn-colorSelect"],placeholder:n.formatMessage({id:"select_placeholder"}),role:"combobox"}))}}var Ka,Ja=Object(c.f)($a),Xa=a("x1bj"),Ya=a("Cv/Q"),Qa=a.n(Ya),Za=a("WgUl"),en=a.n(Za),tn=a("VDrw"),an=a.n(tn),nn=a("KHxb"),rn=a.n(nn),sn=a("kgO+"),on=a.n(sn),ln=(a("/+xs"),a("AGvf")),cn=a("8A1o"),dn=a.n(cn);!function(e){e[e.NORMAL=0]="NORMAL",e[e.FAST=1]="FAST",e[e.SLOW=2]="SLOW"}(Ka||(Ka={}));const un=new RegExp("[^0-9.,()*/+-]","g"),hn=new RegExp('[^0-9.,*/+\\--"\\s]',"g");class pn{constructor(e,t,a){this._text=e,this._value=a?a(e):t?Object(ln.c)(Object(Ye.k)(e)):Object(ln.c)(e)}get text(){return this._text}get value(){return this._value}}class mn extends n.Component{constructor(e){super(e),this._lastBlurTimestamp=0;const{id:t,validationRegex:a,allowSpecialCharacters:n}=e;this.state={inputId:t||Te()(),focused:!1},this._regex=a||(n?hn:un),this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleInputKeyDown=this.handleInputKeyDown.bind(this),this.handleInputScrollWheel=this.handleInputScrollWheel.bind(this),this.handleDecrementButtonClick=this.handleDecrementButtonClick.bind(this),this.handleIncrementButtonClick=this.handleIncrementButtonClick.bind(this)}componentDidMount(){const e=s.a.findDOMNode(this._textfield);e&&e.addEventListener("wheel",this.handleInputScrollWheel,{passive:!1})}componentWillUnmount(){const e=s.a.findDOMNode(this._textfield);e&&e.removeEventListener("wheel",this.handleInputScrollWheel)}get fastStepMultiplier(){const{fastStepMultiplier:e}=this.props;return e&&window.isFinite(e)&&e>0?e:1}get slowStepMultiplier(){const{slowStepMultiplier:e}=this.props;return e&&window.isFinite(e)&&e>0?e:1}get step(){const{step:e}=this.props;return e&&window.isFinite(e)&&e>0?e:1}selectStep(e){const{step:t,fastStepMultiplier:a,slowStepMultiplier:n}=this;switch(e){case Ka.FAST:return t*a;case Ka.SLOW:return t*n;case Ka.NORMAL:default:return t}}validateInput(e){return null===e.match(this._regex)}getPropsValue(){const{value:e,defaultValue:t}=this.props;return e&&window.isFinite(e)?e:t&&window.isFinite(t)?t:0}getStepMode(e){return e.shiftKey?Ka.FAST:e.metaKey?Ka.SLOW:Ka.NORMAL}snapToStep(e){return e.shiftKey||!e.altKey}getLocalizedValue(){const{userLocaleDecimal:e,valueFormatFn:t}=this.props,a=t?t(this.getPropsValue()):this.getPropsValue().toString();return e?a.replace(".",e):a}sanitizeValue(e){const{min:t,max:a}=this.props,n="number"==typeof t&&window.isFinite(t)?t:Number.NEGATIVE_INFINITY,i="number"==typeof a&&window.isFinite(a)?a:Number.POSITIVE_INFINITY;return Object(Xa.clamp)(e,n,i)}commitNewValue(e){const{onChange:t}=this.props;"function"==typeof t&&t(this.sanitizeValue(e)),this.clearBuffer()}get valueAsNumber(){const{editBuffer:e}=this.state;return e?e.value:this.getPropsValue()}get valueAsString(){const{editBuffer:e}=this.state;return e?e.text:this.getLocalizedValue()}flushBuffer(){const{editBuffer:e}=this.state;e&&window.isFinite(e.value)&&this.commitNewValue(e.value),this.clearBuffer()}clearBuffer(){this.setState({editBuffer:void 0})}handleFocus(){this.setState({focused:!0}),this.logFocusAnalytics()}logFocusAnalytics(){const{logAnalytics:e}=this.props;Date.now()-this._lastBlurTimestamp<150||null==e||e()}handleBlur(){this.setState({focused:!1}),this.flushBuffer(),this._lastBlurTimestamp=Date.now()}handleInputKeyDown(e){if(this.isInactive())return;const t=!window.isFinite(this.valueAsNumber),a=this.getStepMode(e),n=this.snapToStep(e);switch(e.key){case"ArrowUp":case"PageUp":if(t)break;e.preventDefault(),this.stepUp(a,n);break;case"ArrowDown":case"PageDown":if(t)break;e.preventDefault(),this.stepDown(a,n);break;case"End":if(t)break;e.preventDefault(),this.decrementToMinValue();break;case"Home":if(t)break;e.preventDefault(),this.incrementToMaxValue();break;case"Escape":this.clearBuffer(),this.handleBlur();break;case"Enter":this.handleBlur()}}handleInputScrollWheel(e){if(this.isInactive())return;const t=e;t.preventDefault();const a=this.getStepMode(t);t.deltaY<0?this.stepUp(a):this.stepDown(a)}onScrubbyValue(e,t,a){const{disabled:n,readOnly:i}=this.props;if(n||i)return;const r=t?Ka.FAST:a?Ka.SLOW:Ka.NORMAL;e>0?this.stepUp(r):this.stepDown(r)}handleInputChange(e,t){t.stopPropagation(),this.validateInput(e)&&this.setState({editBuffer:new pn(e,this.props.allowSpecialCharacters,this.props.evaluateExpressionFn)})}isInactive(){const{disabled:e,readOnly:t}=this.props,{focused:a}=this.state;return e||t||!a}needsSnapToStep(e,t){const a=Object(ln.f)(e%t,this.props.decimalsUsedForSnaping||0),n=Object(ln.f)(t,this.props.decimalsUsedForSnaping||0);return 0!==a&&a!==n}stepUp(e=Ka.NORMAL,t){const a=this.valueAsNumber;if(!window.isFinite(a))return;const n=this.selectStep(e);let i=a+n;const{needsSnapToStep:r}=this.props;t&&r&&this.needsSnapToStep(a,n)&&(i=this.ceilValueToStep(a,n)),this.needsCapToMaxValue(i)?this.incrementToMaxValue():this.commitNewValue(i)}ceilValueToStep(e,t){return Math.ceil(e/t)*t}needsCapToMaxValue(e){const{max:t}=this.props;return"number"==typeof t&&window.isFinite(t)&&e>t}incrementToMaxValue(){const{max:e}=this.props;"number"==typeof e&&window.isFinite(e)&&this.commitNewValue(e)}stepDown(e=Ka.NORMAL,t){const a=this.valueAsNumber;if(!window.isFinite(a))return;const n=this.selectStep(e);let i=a-n;const{needsSnapToStep:r}=this.props;t&&r&&this.needsSnapToStep(a,n)&&(i=this.floorValueToStep(a,n)),this.needsCapToMinValue(i)?this.decrementToMinValue():this.commitNewValue(i)}floorValueToStep(e,t){return Math.floor(e/t)*t}needsCapToMinValue(e){const{min:t}=this.props;return"number"==typeof t&&window.isFinite(t)&&e<t}decrementToMinValue(){const{min:e}=this.props;"number"==typeof e&&window.isFinite(e)&&this.commitNewValue(e)}handleDecrementButtonClick(e){e.preventDefault(),this.stepDown(this.getStepMode(e),this.snapToStep(e))}handleIncrementButtonClick(e){e.preventDefault(),this.stepUp(this.getStepMode(e),this.snapToStep(e))}validateNumericValue(e){const{min:t,max:a}=this.props;return window.isFinite(e)&&Object(ln.e)(e,t,a)}render(){const{id:e,defaultValue:t,min:a,max:n,step:r,invalid:s,disabled:o,quiet:c,className:d,readOnly:u,"aria-label":h,"aria-labelledby":p,useSimpleInvalidIndicator:m,wide:g,hasArrows:f,...v}=this.props,{focused:y,inputId:b}=this.state,E=this.valueAsNumber,_=this.valueAsString,w=this.validateNumericValue(E),I=s||!w,x=[d,{[dn.a["cmdn-NumberInput--narrowPadding"]]:g,[dn.a["cmdn-NumberInput-forceFocus"]]:y&&!I,[dn.a["cmdn-NumberInput-simpleInvalidIndicator"]]:m,"spectrum-Stepper-input":f}],S=i.a.createElement(en.a,Object.assign({},Qa()(v),{focused:y,ref:e=>this._textfield=e,className:U()(x),id:b,value:_,role:"spinbutton",type:"text",autoComplete:"off","aria-label":h||null,"aria-labelledby":p||null,"aria-valuetext":w?E:null,"aria-valuemin":a,"aria-valuemax":n,validationState:I?"invalid":void 0,disabled:o,readOnly:u,quiet:c,onKeyDown:this.handleInputKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleInputChange})),O=o||"number"==typeof n&&E>=n||u,C=o||"number"==typeof a&&E<=a||u,P=l.a.formatMessageWithPlaceholders("accessibility_aria_label_increase_button",[{placeholder:"{PLACEHOLDER_FOR_INCREMENT}",value:this.props.labelId||this.props["aria-label"]}]),N=l.a.formatMessageWithPlaceholders("accessibility_aria_label_decrease_button",[{placeholder:"{PLACEHOLDER_FOR_DECREMENT}",value:this.props.labelId||this.props["aria-label"]}]);return f?i.a.createElement(an.a,{focused:y,invalid:I,quiet:c,disabled:o,className:U()("spectrum-Stepper","react-spectrum-Stepper",{"spectrum-Stepper--quiet":c},d),role:"group","aria-label":h||null},S,i.a.createElement("span",{className:"spectrum-Stepper-buttons"},i.a.createElement(ie.a,{className:U()({[dn.a["cmdn-NumberInput-forceFocus"]]:y&&!I},"spectrum-Stepper-stepUp",dn.a["cmdn-NumberInput-Arrows"]),type:"button",tabIndex:"-1","aria-controls":b,variant:"action",quiet:c,onFocus:this.handleFocus,onBlur:this.handleBlur,disabled:O,onClick:this.handleIncrementButtonClick,"aria-label":P},i.a.createElement(on.a,{size:null,className:"spectrum-Stepper-stepUpIcon"})),i.a.createElement(ie.a,{className:U()({[dn.a["cmdn-NumberInput-forceFocus"]]:y&&!I},"spectrum-Stepper-stepDown",dn.a["cmdn-NumberInput-Arrows"]),type:"button",tabIndex:"-1","aria-controls":b,variant:"action",quiet:c,onFocus:this.handleFocus,onBlur:this.handleBlur,disabled:C,onClick:this.handleDecrementButtonClick,"aria-label":N},i.a.createElement(rn.a,{size:null,className:"spectrum-Stepper-stepDownIcon"})))):S}}mn.defaultProps={quiet:!1,invalid:!1,disabled:!1,readOnly:!1,userLocaleDecimal:".",useSimpleInvalidIndicator:!1,hasArrows:!1,allowSpecialCharacters:!1};var gn=a("VPZk"),fn=a.n(gn),vn=a("BwkI");const yn="[0-9.]+",bn="[a-zA-Z\"'--.]+",En=e=>new RegExp(`^${e}$`),_n=En(yn),wn=En(`${yn}${bn}`),In=En(`${bn}${yn}`),xn=En(`(${yn})?${bn}${yn}`),Sn=En(`${yn}${bn}${yn}${bn}`),On=En(`(${yn}|${bn})+`);class Cn extends n.Component{constructor(e){super(e),this.applyOperator=this.applyOperator.bind(this),this.getNumberExtent=this.getNumberExtent.bind(this),this.validateUnit=this.validateUnit.bind(this),this.getPossibleUnits=this.getPossibleUnits.bind(this),this.precedence=this.precedence.bind(this),this.isHigherPrecedent=this.isHigherPrecedent.bind(this),this.evaluateExpression=this.evaluateExpression.bind(this)}applyOperator(e,t){let a,n,i,r,s=!1;if(n=e.pop(),a=e.pop(),void 0===a||void 0===n)return!1;{switch(i=t.pop(),i){case"+":r=a.value+n.value;break;case"-":r=a.value-n.value;break;case"*":a.explicitUnit&&n.explicitUnit&&(s=!0),r=a.value*n.value;break;case"/":a.explicitUnit&&n.explicitUnit||0===n.value?s=!0:r=a.value/n.value}if(!0===s)return!1;const o=a.explicitUnit||n.explicitUnit;return e.push({value:r,unit:this.props.unitsValue,explicitUnit:o}),!0}}getNumberExtent(e,t){let a=!1,n=t;for(;e[n]>="0"&&e[n]<="9"||"."===e[n];){if("."===e[n]){if(!1!==a)return;a=!0}n+=1}return n}getUnitExtent(e,t){const a=this.getPossibleUnits(),n=e.length;let i,r=t;do{const n=r-t;let s;for(i=!1,s=a.length-1;s>=0;s--)a[s][n]!==e[r]&&a.splice(s,1);if(0===a.length){i=!0;break}r+=1}while(!i&&r<=n);return r}validateUnit(e){const t=this.props.unitInfo;let a,n;if(a=this.props.unitsValue===vt.p.FEET_INCHES?vt.p.FEET:this.props.unitsValue,t[a])for(n=0;n<t[a].unitStrings.length;++n)if(e===t[a].unitStrings[n].toLowerCase())return a;for(a in t)if(t[a]&&a!==this.props.unitsValue)for(n=0;n<t[a].unitStrings.length;++n)if(e===t[a].unitStrings[n].toLowerCase())return a}getPossibleUnits(){const e=this.props.unitInfo;let t,a;const n=[];for(t in e)if(e[t])for(a=0;a<e[t].unitStrings.length;++a)n.push(e[t].unitStrings[a].toLowerCase());return n}getUnitShortToNameMap(){const e=this.props.unitInfo;let t;const a={};for(t in e)if(e[t]){const n=e[t].representation.replace(/\s+/g,"");if(-1===n.indexOf("^2")||n.endsWith("^2")){const e=n.replace("^1","").replace("^2",""),i=n.split(/\^1|\^2/).filter(e=>e);a[e]||1!==i.length||(a[e]=t)}}return a}getSpecialUnitsList(){const e=this.getUnitShortToNameMap(),t=this.props.unitInfo;let a;const n=[];for(a in t)if(t[a]){const i=t[a].representation.replace(/\s+/g,"");if(-1!==i.indexOf("^2")){const t=i.split(/\^1|\^2/).filter(e=>e),a=e[t[0]],r=e[t[1]];n.push({unit1:a,unit2:r})}}return n}precedence(e){return"*"===e||"/"===e?2:1}isHigherPrecedent(e,t){let a,n;return a=this.precedence(e),n=this.precedence(t),a>n}getNumberFromIndex(e,t){const a=this.getNumberExtent(e,t);if(void 0===a)return;return{value:Number(e.substring(t,a)),nextIndex:a}}getUnitFromIndex(e,t){const a=this.getUnitExtent(e,t),n=e.substring(t,a),i=this.validateUnit(n);if(void 0!==i)return{unit:i,nextIndex:a}}evaluateOperand(e){let t,a,n,i;const r=this.getSpecialUnitsList();if(e.match(_n)){if(t=this.getNumberFromIndex(e,0),void 0===t)return;return n=t.value,i=this.props.unitsValue,{value:n,unit:this.props.unitsValue,explicitUnit:!1}}if(e.match(wn)){if(t=this.getNumberFromIndex(e,0),void 0===t)return;if(n=t.value,a=this.getUnitFromIndex(e,t.nextIndex),void 0===a||a.nextIndex!==e.length+1)return;return i=a.unit,{value:n,unit:i,explicitUnit:!0}}if(e.match(xn)){if(e.match(In)&&(e="0"+e),t=this.getNumberFromIndex(e,0),void 0===t)return;if(n=t.value,a=this.getUnitFromIndex(e,t.nextIndex),void 0===a)return;let s;i=a.unit;for(let e=0;e<r.length;e++)r[e].unit1!==i||r[e].unit2||(s=r[e]);if(!s)return;if(t=this.getNumberFromIndex(e,a.nextIndex),void 0===t)return;return n+=t.value/12,{value:n,unit:i,explicitUnit:!0}}if(e.match(Sn)){let i,s,o;if(t=this.getNumberFromIndex(e,0),void 0===t)return;if(n=t.value,a=this.getUnitFromIndex(e,t.nextIndex),void 0===a)return;if(i=a.unit,t=this.getNumberFromIndex(e,a.nextIndex),void 0===t)return;if(n+=t.value/12,a=this.getUnitFromIndex(e,t.nextIndex),void 0===a||a.nextIndex!==e.length+1)return;s=a.unit;for(let e=0;e<r.length;e++)r[e].unit1===i&&r[e].unit2===s&&(o=r[e]);if(!o)return;return{value:n,unit:i,explicitUnit:!0}}}evaluateExpression(e){let t=Object(Ye.k)(e);const a=[],n=[];let i,r=0;("+"===t[0]||t[0]<="-")&&(t="0"+t);const s=t.split(/(\+|-|\*|\/)/).filter(e=>e);for(r=0;r<s.length;r++)if(r%2==0){if(!s[r].match(On))return;const e=this.evaluateOperand(s[r]);if(!e)return;this.props.unitsValue&&e.unit!==this.props.unitsValue&&(e.value=Object(vt.r)(e.value,vt.q[e.unit],vt.q[this.props.unitsValue],this.props.unitConvertConfig),e.unit=this.props.unitsValue),a.push(e)}else{for(i=n.length;0!==i&&!this.isHigherPrecedent(s[r],n[i-1]);){if(!1===this.applyOperator(a,n))return;i-=1}n.push(s[r])}for(i=n.length;0!==i;){if(!1===this.applyOperator(a,n))return;i-=1}if(1===a.length)return a[0].value}render(){const{unitInfo:e,unitsValue:t}=this.props,a=e&&e[t]&&e[t].representation,{forwardedRef:n,...r}=this.props;return i.a.createElement(mn,Object.assign({decimalsUsedForSnaping:Number(vn.d[t])},r,{ref:n,needsSnapToStep:t!==vt.p.YARDS,valueFormatFn:e=>function(e,t,a){let n=t;if(!n||!a)return"";let i=n.indexOf("^2");if(-1!==i){let t=e%1;e=Math.floor(e),t*=12,t=Object(ln.f)(t,Number(vn.d[a])),12===t&&(t=0,e+=1);const i=Number(t).toString();n=n.replace("^2",i)}else e=Object(ln.f)(e,Number(vn.d[a]));if(i=n.indexOf("^1"),-1!==i){const t=Number(e).toString();n=n.replace("^1",t)}return n}(e,a,t),evaluateExpressionFn:this.evaluateExpression,validationRegex:vn.c,"aria-label":this.props["aria-label"],labelId:this.props.labelId}))}}var Pn=i.a.forwardRef((e,t)=>i.a.createElement(Cn,Object.assign({},e,{forwardedRef:t})));class Nn extends n.Component{constructor(e){super(e),this.numberInput=i.a.createRef(),this.onScrubbyValue=this.onScrubbyValue.bind(this)}onScrubbyValue(e,t,a){const n=this.numberInput.current;n&&n.onScrubbyValue(e,t,a)}render(){const{id:e,value:t,min:a,max:n,step:r,fastStepMultiplier:s,slowStepMultiplier:o,userLocaleDecimal:d,defaultValue:u,onChange:h,wideNumberInputs:p,unitsValue:m,unitInfo:g,unitConvertConfig:f,hasArrows:v,className:y,analytics:b}=this.props,E={[fn.a["cmdn-HeightPanel--wide"]]:p};return i.a.createElement($e,{title:i.a.createElement(c.b,{id:"newdoc_details_label_height"}),"aria-label":l.a.formatMessage("newdoc_details_label_height"),onScrubbyValue:this.onScrubbyValue,logScrubbyValueAnalytics:()=>b.logPresetDetailsInteraction("height"),className:U()([fn.a["cmdn-HeightPanel"],E,y])},void 0!==g&&void 0!==m&&i.a.createElement(Pn,{id:e,className:fn.a["cmdn-HeightPanel-field"],ref:this.numberInput,value:t,min:a,max:n,step:r,fastStepMultiplier:s,slowStepMultiplier:o,userLocaleDecimal:d,defaultValue:u,wide:p,onChange:h,useSimpleInvalidIndicator:!0,unitsValue:m,unitInfo:g,unitConvertConfig:f,hasArrows:v,logAnalytics:()=>b.logPresetDetailsInteraction("height"),"aria-label":l.a.formatMessage("newdoc_details_label_height"),labelId:"newdoc_details_label_height"}),(void 0===g||void 0===m)&&i.a.createElement(mn,{id:e,className:fn.a["cmdn-HeightPanel-field"],ref:this.numberInput,value:t,min:a,max:n,step:r,hasArrows:v,fastStepMultiplier:s,slowStepMultiplier:o,userLocaleDecimal:d,defaultValue:u,wide:p,onChange:h,useSimpleInvalidIndicator:!0,logAnalytics:()=>b.logPresetDetailsInteraction("height"),"aria-label":l.a.formatMessage("newdoc_details_label_height"),labelId:"newdoc_details_label_height"}))}}class An extends n.Component{render(){const{condition:e,onTrue:t,onFalse:a,children:n}=this.props;return e?t(n):a?a(n):n}}var Tn=a("BqDQ"),Mn=a.n(Tn),Ln=a("g8b5"),Rn=a.n(Ln),Dn=a("6Y0M"),zn=a.n(Dn);class kn extends n.Component{constructor(e){super(e),this.numberInput=i.a.createRef(),this.onScrubbyValue=this.onScrubbyValue.bind(this)}onScrubbyValue(e,t,a){const n=this.numberInput.current;n&&n.onScrubbyValue(e,t,a)}get dimensionComponent(){const{widthInput:e,analytics:t}=this.props,{id:a,value:n,min:r,max:s,step:o,fastStepMultiplier:l,slowStepMultiplier:c,userLocaleDecimal:d,defaultValue:u,unitsValue:h,onChange:p,unitInfo:m,hasArrows:g,wideNumberInputs:f,unitConvertConfig:v}=e;return i.a.createElement(i.a.Fragment,null,void 0!==m&&void 0!==h&&i.a.createElement(Pn,{id:a,ref:this.numberInput,className:Rn.a["cmdn-UnitPanel-field"],value:n,min:r,max:s,step:o,fastStepMultiplier:l,slowStepMultiplier:c,userLocaleDecimal:d,defaultValue:u,wide:f,onChange:p,useSimpleInvalidIndicator:!0,unitsValue:h,unitInfo:m,hasArrows:g,unitConvertConfig:v,logAnalytics:()=>t.logPresetDetailsInteraction("width")}),(void 0===m||void 0===h)&&i.a.createElement(mn,{id:a,ref:this.numberInput,className:Rn.a["cmdn-UnitPanel-field"],value:n,min:r,hasArrows:g,max:s,step:o,fastStepMultiplier:l,slowStepMultiplier:c,userLocaleDecimal:d,defaultValue:u,wide:f,onChange:p,useSimpleInvalidIndicator:!0,logAnalytics:()=>t.logPresetDetailsInteraction("width")}))}render(){const{widthInput:e,heightInput:t,analytics:a}=this.props;return i.a.createElement(ce,{className:Mn.a["cmdn-DimensionsBlock-WidthHeight"]},i.a.createElement(An,{condition:e.unitsTitle,onTrue:e=>i.a.createElement($e,null,e),onFalse:t=>i.a.createElement($e,{title:e.title,onScrubbyValue:this.onScrubbyValue,logScrubbyValueAnalytics:()=>a.logPresetDetailsInteraction("width")},t)},i.a.createElement(pe,{className:U()([Rn.a["cmdn-UnitPanel-value"],{[Rn.a["cmdn-UnitPanel-value--wide"]]:e.wideNumberInputs},e.className])},i.a.createElement(An,{condition:e.unitsTitle,onTrue:t=>i.a.createElement($e,{title:e.title,className:Rn.a["cmdn-UnitPanel-options"],onScrubbyValue:this.onScrubbyValue,logScrubbyValueAnalytics:()=>a.logPresetDetailsInteraction("width")},t)},this.dimensionComponent))),i.a.createElement($e,{className:zn.a["cmdn-HeightRowPanel"]},i.a.createElement(ce,null,i.a.createElement(pe,{className:zn.a["cmdn-HeightItem"]},i.a.createElement(Nn,{id:t.id,value:t.value,min:t.min,max:t.max,className:t.className,step:t.step,fastStepMultiplier:t.fastStepMultiplier,slowStepMultiplier:t.slowStepMultiplier,defaultValue:t.defaultValue,unitsValue:t.unitsValue,hasArrows:t.hasArrows,unitInfo:t.unitInfo,unitConvertConfig:t.unitConvertConfig,onChange:t.onChange,wideNumberInputs:t.wideNumberInputs,userLocaleDecimal:t.userLocaleDecimal,analytics:a})))))}}var jn=Object(c.f)(kn),Bn=a("Z7ej"),Vn=a.n(Bn),Fn=a("FocD"),Hn=a.n(Fn),Un=a("CQbc"),Gn=a("x04s"),Wn=a.n(Gn);class qn extends n.Component{constructor(){super(...arguments),this.handleClick=(e,t)=>{const{onChange:a,logAnalytics:n}=this.props;null==a||a(t),e!==t&&(null==n||n())}}render(){const{title:e,value:t,defaultValue:a,options:n,style:r,className:s}=this.props,o=t||a;return i.a.createElement($e,{title:e,style:r,className:s},i.a.createElement("div",{className:Wn.a["cmdn-RadioButtonsPanel-buttonsContainer"]},n.map(e=>{const t=o===e.value,a=i.a.createElement(ie.a,{id:e.id,className:U()(Wn.a["cmdn-RadioButtonsPanel-button"],e.tooltip&&t?"btn-selected":""),variant:"tool",value:e.value,"aria-label":e.ariaLabel||e.value,selected:!e.tooltip&&t,onClick:()=>this.handleClick(o,e.value),icon:e.icon,"aria-selected":t});return e.tooltip?i.a.createElement(Ne.a,{key:e.id,placement:"bottom",trigger:"hover",delayShow:800},a,i.a.createElement(Ce.a,{variant:"inspect"},e.tooltip)):a})))}}var $n=Object(c.f)(qn),Kn=a("S9f8"),Jn=a.n(Kn);class Xn extends n.Component{constructor(){super(...arguments),this.optionAriaLabel=e=>`${l.a.formatMessage(e)}, ${l.a.formatMessage("newdoc_details_label_orientation")}`}render(){const{portraitTooltip:e,landscapeTooltip:t,analytics:a,...n}=this.props,r=[{id:"cmdn-sidebar-OrientationPanel-portrait",value:Un.c.PORTRAIT,icon:i.a.createElement(Vn.a,{className:e&&Jn.a["cmdn-OrientationPanel-portraitIcon-withTooltip"],size:"L"}),tooltip:e,ariaLabel:this.optionAriaLabel("accessibility_aria_label_orientation_portrait")},{id:"cmdn-sidebar-OrientationPanel-landscape",value:Un.c.LANDSCAPE,icon:i.a.createElement(Hn.a,{className:U()(Jn.a["cmdn-OrientationPanel-landscapeIcon"],t&&Jn.a["cmdn-OrientationPanel-landscapeIcon-withTooltip"]),size:"L"}),tooltip:t,ariaLabel:this.optionAriaLabel("accessibility_aria_label_orientation_landscape")}];return i.a.createElement($n,Object.assign({title:i.a.createElement(c.b,{id:"newdoc_details_label_orientation"}),options:r,logAnalytics:()=>a.logPresetDetailsInteraction("orientation")},n))}}var Yn=Object(c.f)(Xn),Qn=a("jv0R"),Zn=a.n(Qn);class ei extends n.Component{onChange(e){const{onChange:t}=this.props;t&&"function"==typeof t&&t(e)}render(){const{id:e,value:t,min:a,max:n,wideNumberInputs:r,fastStepMultiplier:s,analytics:o}=this.props,d="newdoc_details_label_artboards";return i.a.createElement($e,{className:U()(Zn.a["cmdn-ArtboardsNumberPanel"]),title:i.a.createElement(c.b,{id:d}),titleClassName:Zn.a["cmdn-ArtboardsNumberPanel-title"]},i.a.createElement(mn,{id:e,className:Zn.a["cmdn-ArtboardsNumberPanel-field"],value:t,min:a,useSimpleInvalidIndicator:!0,max:n,step:1,fastStepMultiplier:s,needsSnapToStep:!0,wide:r,onChange:e=>this.onChange(e),logAnalytics:()=>o.logPresetDetailsInteraction("artboards"),hasArrows:!0,"aria-label":l.a.formatMessage(d),labelId:d}))}}var ti=a("/kzR"),ai=a.n(ti);const ni=U()("spectrum-Icon spectrum-Icon--sizeL",ai.a["cmdn-BindingIcon-leftToRight-withTooltip"]),ii=U()("spectrum-Icon spectrum-Icon--sizeL",ai.a["cmdn-BindingIcon-rightToLeft-withTooltip"]),ri=i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-50 -200 1200 1200",focusable:"false","aria-hidden":"true",role:"img",className:ni},i.a.createElement("g",{transform:"translate(0,850) scale(1,-1)"},i.a.createElement("path",{d:"M454.26 638.654l-4.028-10.761-71.144-175.864 132.912-29.547-55.034 209.439-2.706 6.734zM930.877 963.54h-773.311c-17.795 0-32.221-14.426-32.221-32.221v-843.554c0-0.002 0-0.005 0-0.007 0-15.515 10.964-28.468 25.567-31.533l580.193-116.034c1.937-0.413 4.163-0.651 6.444-0.651 17.795 0 32.221 14.426 32.221 32.221 0 0.002 0 0.005 0 0.007v89.575h161.106c17.795 0 32.221 14.426 32.221 32.221v837.754c0 17.795-14.426 32.221-32.221 32.221zM642.271 183.786c-3.354-3.574-8.107-5.8-13.38-5.8-0.008 0-0.017 0-0.025 0-0.019 0-0.043 0-0.067 0-1.471 0-2.904 0.164-4.282 0.476l-33.22 7.45c-8.499 2.374-15.017 9.042-17.138 17.457l-46.047 153.348-171.836 36.249-50.717-125.051c-2.693-7.269-9.566-12.355-17.628-12.355-1.473 0-2.906 0.17-4.281 0.49l-29.646 5.614c-6.793 1.748-12.27 6.339-15.18 12.396-1.967 3.686-3.086 7.901-3.086 12.377 0 3.592 0.722 7.016 2.028 10.135l183.308 426.501c3.052 8.14 10.767 13.83 19.811 13.83 1.705 0 3.362-0.202 4.949-0.583l37.877-8.541c9.867-2.824 17.432-10.562 19.965-20.327l143.653-500.306c0.685-2.148 1.081-4.617 1.081-7.18 0-6.22-2.328-11.896-6.161-16.206zM898.655 125.788h-128.885v697.075c0 0.002 0 0.005 0 0.007 0 15.515-10.964 28.468-25.567 31.533l-338.308 44.696h492.76v-773.311z"}))),si=i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-50 -200 1200 1200",focusable:"false","aria-hidden":"true",role:"img",className:ii},i.a.createElement("g",{transform:"translate(0,850) scale(1,-1)"},i.a.createElement("path",{d:"M569.74 638.654l4.028-10.761 71.144-175.864-132.913-29.547 55.034 209.439 2.706 6.734zM60.901 931.321v-837.756c0-17.795 14.426-32.221 32.221-32.221h161.107v-89.576c0-0.002 0-0.005 0-0.007 0-17.795 14.426-32.221 32.221-32.221 2.281 0 4.507 0.237 6.654 0.688l579.775 115.96c14.812 3.103 25.778 16.056 25.778 31.571 0 0.002 0 0.005 0 0.007v843.555c0 17.795-14.426 32.221-32.221 32.221h-773.313c-17.795 0-32.221-14.426-32.221-32.221zM376.67 207.146l143.642 500.14c2.577 9.964 10.143 17.701 19.808 20.475l38.223 8.62c1.443 0.352 3.102 0.554 4.805 0.554 9.044 0 16.76-5.689 19.764-13.684l183.42-426.821c1.242-2.945 1.963-6.37 1.963-9.962 0-4.477-1.12-8.691-3.095-12.379-2.901-6.055-8.378-10.645-15.012-12.359l-29.933-5.674c-1.248-0.296-2.681-0.466-4.154-0.466-8.062 0-14.935 5.087-17.585 12.226l-50.759 125.18-171.869-36.281-46.012-153.277c-2.157-8.583-8.675-15.251-17.003-17.584l-33.52-7.516c-1.248-0.287-2.681-0.451-4.153-0.451-0.024 0-0.049 0-0.072 0-0.003 0-0.011 0-0.020 0-5.273 0-10.026 2.226-13.371 5.79-3.833 4.298-6.17 9.983-6.17 16.216 0 2.588 0.403 5.084 1.151 7.424zM125.344 899.099h492.761l-338.099-44.627c-14.812-3.103-25.778-16.056-25.778-31.571 0-0.002 0-0.005 0-0.007v-697.109h-128.886v773.313z"}))),oi=i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-50 -200 1200 1200",focusable:"false","aria-hidden":"true",role:"img",className:ni},i.a.createElement("g",{transform:"translate(70,850) scale(1,-1)"},i.a.createElement("path",{d:"M866.435 963.541h-773.312c-17.795 0-32.221-14.426-32.221-32.221v-837.755c0-17.795 14.426-32.221 32.221-32.221h161.106v-89.576c0-0.002 0-0.005 0-0.007 0-17.795 14.426-32.221 32.221-32.221 2.281 0 4.507 0.237 6.654 0.688l579.774 115.959c14.812 3.103 25.778 16.056 25.778 31.571 0 0.002 0 0.005 0 0.007v843.554c0 17.795-14.426 32.221-32.221 32.221zM280.006 854.472c-14.812-3.103-25.778-16.056-25.778-31.571 0-0.002 0-0.005 0-0.007v-697.108h-128.886v773.312h492.761zM801.992 308.385l-161.106 139.615v-128.886l64.443 11.503v-64.443l-64.443-11.503v-64.443l-64.443-9.215v73.658l-64.443-11.503v64.443l64.443 11.503v128.886l-179.505-165.715-18.818 75.172 198.323 182.695v19.526l-193.328-47.237v64.443l193.328 49.492v79.393l-52.939-5.768 40.051 70.21h77.332v-132.333l156.499 11.503-1.16-59.835-155.339-17.27v-23.103l179.891-170.999z"})));class li extends n.Component{render(){const{leftToRightTooltip:e,rightToLeftTooltip:t,isJapaneseEnabled:a,...n}=this.props,r=[{id:"cmdn-sidebar-BindingPanel-leftToRight",value:"0",icon:ri,tooltip:e},{id:"cmdn-sidebar-BindingPanel-rightToLeft",value:"1",icon:a?oi:si,tooltip:t}];return i.a.createElement($n,Object.assign({options:r},n))}}var ci=Object(c.f)(li);class di extends n.Component{get unitsComponent(){const{intl:e,optionsInput:t,analytics:a}=this.props,{id:n,defaultUnitsValue:r,onUnitChange:s,units:o,unitsValue:l}=t,c=null==o?void 0:o.map(t=>({label:e.formatMessage({id:"newdoc_details_"+t}),value:t}));return i.a.createElement(Da.a,{id:n+"-units-value",value:l||r,defaultValue:r,options:c,onOpen:()=>a.logPresetDetailsInteraction("dimensions-unit"),onChange:s,placeholder:e.formatMessage({id:"select_placeholder"}),role:"combobox"})}render(){const{optionsInput:e,orientationInputs:t,artboard:a,analytics:n}=this.props,{unitsTitle:r}=e,{isBindingEnabled:s,bindingTitle:o,binding:l,orientation:d,defaultOrientation:u,onOrientationChange:h,orientationPortraitTooltip:p,orientationLandscapeTooltip:m,defaultBinding:g,onBindingChange:f,isJapaneseEnabled:v,bindLeftToRight:y,bindRightToLeft:b}=t,{artboardsCount:E,minArtboards:_,maxArtboards:w,stepArtboards:I,shiftMultiplierArtboards:x,defaultArtboardsCount:S,wideNumberInputs:O,onArtboardsChange:C,hasArtboards:P,defaultHasArtboards:N,hasLiveCoediting:A}=a;return i.a.createElement(ce,{className:U()(Mn.a["cmdn-DimensionsBlock-OptionsOrientationArtboards"])},i.a.createElement(pe,{className:Rn.a["cmdn-UnitPanel-options"]},i.a.createElement(An,{condition:r,onTrue:e=>i.a.createElement($e,{title:r,className:Rn.a["cmdn-UnitPanel-options"]},e)},this.unitsComponent)),i.a.createElement(ce,{className:U()(zn.a["cmdn-HeightRowPanel"],Mn.a["cmdn-DimensionsBlock-OrientationArtboards"])},!s&&i.a.createElement(pe,{className:zn.a["cmdn-OrientationItem"]},i.a.createElement(Yn,{value:d,defaultValue:u,onChange:h,portraitTooltip:p,landscapeTooltip:m,className:Mn.a["cmdn-DimensionsBlock-OptionsOrientationArtboards--Panel"],analytics:n})),i.a.createElement(pe,{className:U()(zn.a["cmdn-ArtboardsItem"],Mn.a["cmdn-DimensionsBlock-OptionsOrientationArtboards--ArtboardsItem"])},void 0!==E&&i.a.createElement(ei,{id:"cmdn-sidebar-ArtboardsNumberPanel",value:E,min:_,max:w,step:I,fastStepMultiplier:x,defaultValue:S,wideNumberInputs:O,onChange:C,analytics:n}),void 0!==P&&i.a.createElement(Xe,{id:"cmdn-sidebar-ArtboardsCheckboxPanel",title:i.a.createElement(c.b,{id:"newdoc_details_label_artboards"}),value:P,defaultValue:N,onChange:C,className:Mn.a["cmdn-DimensionsBlock-OptionsOrientationArtboards--Panel"],style:{marginBottom:"7px",marginTop:"6px"},disabled:A,warningText:i.a.createElement(c.b,{id:"lce_artboards_warning_label"})}))),s&&i.a.createElement(ce,null,i.a.createElement(pe,{className:zn.a["cmdn-OrientationItem--withBinding"]},i.a.createElement(Yn,{value:d,defaultValue:u,onChange:h,portraitTooltip:p,landscapeTooltip:m,analytics:n})),i.a.createElement(pe,{className:zn.a["cmdn-OrientationItem"]},i.a.createElement(ci,{title:o,value:l,defaultValue:g,onChange:f,isJapaneseEnabled:v,leftToRightTooltip:y,rightToLeftTooltip:b}))))}}var ui=Object(c.f)(di),hi=a("Ar3P"),pi=a.n(hi);class mi extends n.Component{render(){const{values:e,value:t,defaultValue:a,onChange:n,intl:r,analytics:s}=this.props;return i.a.createElement($e,{title:i.a.createElement(c.b,{id:"newdoc_details_label_pixelScale"})},i.a.createElement(Da.a,{id:"cmdn-sidebar-PixelScale",value:t,defaultValue:a,options:e,onOpen:()=>s.logPresetDetailsInteraction("pixel-aspect-ratio"),onChange:n,className:pi.a.pixelAspectRatioSelect,placeholder:r.formatMessage({id:"select_placeholder"}),role:"combobox"}))}}var gi=Object(c.f)(mi);class fi extends n.Component{constructor(e){super(e),this.numberInput=i.a.createRef(),this.onScrubbyValue=this.onScrubbyValue.bind(this)}onScrubbyValue(e,t,a){const n=this.numberInput.current;n&&n.onScrubbyValue(e,t,a)}get unitsComponent(){var e;const{logUnitsSelectAnalytics:t,intl:a,unitsTitle:n}=this.props,r=(null===(e=null==n?void 0:n.props)||void 0===e?void 0:e.id)&&Ha(this.props.options,this.props.unitsValue,n.props.id,a);return i.a.createElement(Da.a,{id:(this.props.dimensionsId||this.props.id)+"-units-value",value:this.props.unitsValue||this.props.defaultUnitsValue,defaultValue:this.props.defaultUnitsValue,options:this.props.options,onOpen:t,onChange:this.props.onUnitChange,placeholder:a.formatMessage({id:"select_placeholder"}),"aria-label":r,"aria-haspopup":"listbox",role:"combobox"})}get dimensionComponent(){const{id:e,defaultValue:t,max:a,min:n,step:r,fastStepMultiplier:s,slowStepMultiplier:o,onChange:l,unitsValue:c,unitInfo:d,unitConvertConfig:u,userLocaleDecimal:h,value:p,wideNumberInputs:m,hasArrows:g,logNumberInputAnalytics:f}=this.props;return i.a.createElement(i.a.Fragment,null,void 0!==d&&void 0!==c&&i.a.createElement(Pn,{id:e,ref:this.numberInput,className:Rn.a["cmdn-UnitPanel-field"],value:p,min:n,max:a,step:r,fastStepMultiplier:s,slowStepMultiplier:o,userLocaleDecimal:h,defaultValue:t,wide:m,onChange:l,useSimpleInvalidIndicator:!0,unitsValue:c,unitInfo:d,hasArrows:g,unitConvertConfig:u,logAnalytics:f,"aria-label":this.props["aria-label"],labelId:this.props.labelId}),(void 0===d||void 0===c)&&i.a.createElement(mn,{id:e,ref:this.numberInput,className:Rn.a["cmdn-UnitPanel-field"],value:p,min:n,hasArrows:g,max:a,step:r,fastStepMultiplier:s,slowStepMultiplier:o,userLocaleDecimal:h,defaultValue:t,wide:m,onChange:l,useSimpleInvalidIndicator:!0,logAnalytics:f,"aria-label":this.props["aria-label"],labelId:this.props.labelId}))}render(){const{title:e,unitsTitle:t,wideNumberInputs:a,dimensionClassName:n,logNumberInputAnalytics:r}=this.props;return i.a.createElement(An,{condition:t,onTrue:e=>i.a.createElement($e,null,e),onFalse:t=>i.a.createElement($e,{title:e,onScrubbyValue:this.onScrubbyValue,logScrubbyValueAnalytics:r},t)},i.a.createElement(ce,null,i.a.createElement(pe,{className:U()([Rn.a["cmdn-UnitPanel-value"],{[Rn.a["cmdn-UnitPanel-value--wide"]]:a},n])},i.a.createElement(An,{condition:t,onTrue:t=>i.a.createElement($e,{title:e,className:Rn.a["cmdn-UnitPanel-options"],onScrubbyValue:this.onScrubbyValue,logScrubbyValueAnalytics:r},t)},this.dimensionComponent)),i.a.createElement(pe,{className:Rn.a["cmdn-UnitPanel-options"]},i.a.createElement(An,{condition:t,onTrue:e=>i.a.createElement($e,{title:t,className:Rn.a["cmdn-UnitPanel-options"]},e)},this.unitsComponent))))}}var vi=Object(c.f)(fi);class yi extends n.Component{render(){const{id:e,defaultUnitsValue:t,defaultValue:a,intl:n,max:r,min:s,onChange:o,onUnitChange:l,step:d,fastStepMultiplier:u,units:h,userLocaleDecimal:p,unitsValue:m,value:g,analytics:f}=this.props,v=h&&h.map(e=>({label:n.formatMessage({id:"newdoc_details_resolution_"+e}),value:e}));return i.a.createElement(vi,{id:e,title:i.a.createElement(c.b,{id:"newdoc_details_label_resolution"}),value:g,min:s,max:r,defaultValue:a,unitsValue:m,defaultUnitsValue:t,step:d,fastStepMultiplier:u,options:v,userLocaleDecimal:p,onUnitChange:l,onChange:o,logNumberInputAnalytics:()=>f.logPresetDetailsInteraction("resolution"),logUnitsSelectAnalytics:()=>f.logPresetDetailsInteraction("resolution-unit")})}}var bi=Object(c.f)(yi),Ei=a("+DHQ"),_i=a("lrN5"),wi=a.n(_i);class Ii extends n.Component{constructor(e){super(e),this._textfieldRef=i.a.createRef(),this.onValueChange=this.onValueChange.bind(this),this.onInputValidation=this.onInputValidation.bind(this),this.onKeyDownActionButtons=this.onKeyDownActionButtons.bind(this),this.state={value:this.props.value||this.getDefaultPresetName(),isPresetNameInvalid:!1},this.onKeyDown=this.onKeyDown.bind(this),this.onSave=this.onSave.bind(this),this.onCancel=this.onCancel.bind(this)}componentDidMount(){Object(me.f)()?this._textfieldRef.current&&this._textfieldRef.current.inputContainer.focus():this._textfieldRef.current&&this._textfieldRef.current.focus()}getDefaultPresetName(){const e=this.props.intl.formatMessage({id:"newdoc_filter_saved"});return Ei.a.generateNewPresetName(e,this.props.savedPresets)}onSave(){this.savePreset(this.state.value)}onCancel(){this.props.handleCancelAction&&this.props.handleCancelAction()}savePreset(e){Ei.a.isPresetNameInvalid(e,this.props.savedPresets)||this.props.handleSaveAction&&this.props.handleSaveAction(e)}onValueChange(e){this.setState({value:e})}onInputValidation(e){const t=this.props.savedPresets;this.setState({isPresetNameInvalid:Ei.a.isPresetNameInvalid(e,t)})}onKeyDown(e){switch(e.key){case"Enter":Ue(e),this.onSave();break;case"Escape":Ue(e),this.onCancel()}}onKeyDownActionButtons(e){switch(e.key){case"Enter":Ue(e)}}render(){const{shouldReverseButtons:e}=this.props,{isPresetNameInvalid:t,value:a}=this.state,n=[wi.a["cmdn-PresetSaveForm"]];let r="";return t&&(r=void 0===a||""===a.trim()?"new_preset_details_empty_title":"new_preset_details_collision_title"),i.a.createElement($e,{className:U()(n),onKeyDown:this.onKeyDown},i.a.createElement(ce,null,i.a.createElement(pe,{className:wi.a["cmdn-PresetSaveForm-container"]},i.a.createElement(en.a,{id:"cmdn-preset-save-textfield",ref:this._textfieldRef,defaultpreventedkeys:["Escape"],className:wi.a["cmdn-PresetSaveForm-field"],value:a,onChange:this.onValueChange,onInput:e=>this.onInputValidation(e.target.value),validationState:t?"invalid":null,quiet:!0}),i.a.createElement("div",{className:wi.a["cmdn-PresetSaveForm-errorMessage"]},t&&i.a.createElement(c.b,{id:r})))),i.a.createElement(ce,null,i.a.createElement(pe,{onKeyDown:this.onKeyDownActionButtons,className:wi.a["cmdn-PresetSaveForm-buttonContainer"]},Object(Ye.l)(e,[i.a.createElement(ie.a,{className:wi.a["cmdn-PresetSaveForm-button"],defaultpreventedkeys:["Escape"],key:"cancel",id:"cmdn-preset-cancel-save-button",variant:"primary",onClick:this.onCancel},i.a.createElement(c.b,{id:"cancel"})),i.a.createElement(ie.a,{className:wi.a["cmdn-PresetSaveForm-button"],defaultpreventedkeys:["Escape"],key:"save",variant:"cta",id:"cmdn-preset-save-button",disabled:t,onClick:this.onSave},i.a.createElement(c.b,{id:"newdoc_details_label_save_preset"}))]))))}}var xi=Object(c.f)(Ii),Si=a("ztOJ"),Oi=a.n(Si);var Ci=a("NXik"),Pi=a.n(Ci);class Ni extends n.Component{constructor(e){super(e),this.onValueChange=this.onValueChange.bind(this),this.savePresetBtnRef=i.a.createRef(),this.onKeyDownActionButtons=this.onKeyDownActionButtons.bind(this)}onKeyDownActionButtons(e){Ue(e)}onValueChange(e,t){"function"==typeof this.props.onChange&&this.props.onChange(e,t)}componentDidMount(){this.props.focusSavePresetButton&&this.savePresetBtnRef.current&&this.savePresetBtnRef.current.focus()}render(){const{handleAction:e,value:t,savePresetButtonTooltip:a,analytics:n}=this.props,r=i.a.createElement(ie.a,{ref:this.savePresetBtnRef,className:Pi.a["cmdn-DocumentNameForm-button"],variant:"tool",id:"cmdn-preset-save-icon",icon:i.a.createElement(Oi.a,{size:"M",className:a&&Pi.a["cmdn-DocumentNameForm-button-withTooltip"]}),onClick:()=>{null==e||e(),n.logPresetDetailsInteraction("save-icon-button")},quiet:!0,"aria-label":l.a.formatMessage("new_preset_details_label_title"),role:"button"});return i.a.createElement($e,{className:Pi.a["cmdn-DocumentNameForm"]},i.a.createElement(ce,null,i.a.createElement(pe,{className:Pi.a["cmdn-DocumentNameForm-titleContainer"]},i.a.createElement(en.a,{id:"cmdn-preset-name-textfield",className:Pi.a["cmdn-DocumentNameForm-field"],value:t,onFocus:()=>n.logPresetDetailsInteraction("name"),onChange:this.onValueChange,"aria-label":l.a.formatMessage(this.props.title),quiet:!0})),e&&i.a.createElement(pe,{onKeyDown:this.onKeyDownActionButtons,className:Pi.a["cmdn-DocumentNameForm-buttonContainer"]},a?i.a.createElement(Ne.a,{placement:"top",crossOffset:-40,trigger:["hover","focus"],delayShow:800},r,i.a.createElement(Ce.a,{variant:"inspect"},a)):r)))}}var Ai=a("c8hs"),Ti=a.n(Ai),Mi=a("0j7k"),Li=a.n(Mi);class Ri extends n.Component{constructor(e){super(e),this.focusSavePresetButton=!1,this.toggleSavePreset=this.toggleSavePreset.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onCreate=this.onCreate.bind(this),this.onClose=this.onClose.bind(this)}toggleSavePreset(e){const{store:t}=this.props;t.saveFormVisible=e||!t.saveFormVisible,this.focusSavePresetButton=!e}get panelGroupTitle(){const{store:e}=this.props;return e.saveFormVisible?"new_preset_details_label_title":"newdoc_details_label_title"}async onCreate(e){const{store:t,onCreate:a}=this.props;a&&await a(e),await Object(Et.a)(t,Object(Et.b)(t))}onClose(){this.props.store.closeApp(wt.a.CLOSE)}async handleSaveAction(e){const{store:t}=this.props,{analytics:a}=t,n=JSON.parse(JSON.stringify(t.activeDocumentTemplate&&t.activeDocumentTemplate.toJSON&&t.activeDocumentTemplate.toJSON()));n[this.props.presetNameField]=e;const i={settings:{}};Object.assign(i,t.originalPreset),Object.assign(i.settings,n),a.logFNFTActionClickedEvent("preset-save",i),a.flushEvent(),await t.createPreset(JSON.stringify(n)),await t.updatePresetCategory(Z.default.SAVED),t.switchToSavedView(e)}onKeyDown(e){switch(e.key){case"Enter":Ue(e),this.onCreate()}}render(){const{store:e,id:t,content:a,footerWarning:n,hasSavePreset:r,docPresetTooltip:s,savePresetButtonTooltip:o,previewModeEnabled:l,previewLabel:d,previewChangeHandler:u,documentNameChangeHandler:h,hasSecondAction:p,highlightSecondAction:m,actionLabel:g,secondActionLabel:f,smallActionFont:v}=this.props,{activeDocumentTemplate:y,isWindowsOS:b,documentName:E,saveFormVisible:_,analytics:w}=e;let I=[];let x={analytics:w,value:E,onChange:h||(t=>{e.documentName=Object(me.i)(t)}),title:this.panelGroupTitle};r&&(I=e.getPresetsByCategoryType(Z.default.SAVED),x={...x,handleAction:e=>{this.toggleSavePreset(!0)},focusSavePresetButton:this.focusSavePresetButton,savePresetButtonTooltip:o});const S=[Ti.a["cmdn-PropertiesPanel-Title"],{[Ti.a["cmdn-PropertiesPanel-Title-Save-visible"]]:_}],O=[Ti.a["cmdn-PresetSavePanel-panelGroup"],{[Ti.a["is-visible"]]:_}],C=[Ti.a["cmdn-PropertiesPanel"],{[Ti.a["cmdn-PropertiesPanel-Save-visible"]]:_}],P=U()(Ti.a["cmdn-PropertiesPanel-FlexContainer"],{[Li.a.hidden]:this.props.store.isWarningOverlayVisible});return i.a.createElement(ce,{id:t,onKeyDown:this.onKeyDown,className:P},y&&i.a.createElement(i.a.Fragment,null,i.a.createElement(pe,null,i.a.createElement(gt,{headerId:"cmdn-sidebar-PanelTitle",titleTooltip:s,title:i.a.createElement(ft,{id:this.panelGroupTitle}),titleClassName:U()(S),className:U()(O)},r&&_&&i.a.createElement(xi,{handleSaveAction:e=>{this.toggleSavePreset(),this.focusSavePresetButton=!1,this.handleSaveAction(e)},savedPresets:I,handleCancelAction:()=>this.toggleSavePreset(),shouldReverseButtons:b}))),i.a.createElement(pe,{className:Ti.a["cmdn-PropertiesPanel-FlexItem-PresetDetails"]},i.a.createElement(gt,{className:U()(C)},(!r||r&&!_)&&i.a.createElement(Ni,Object.assign({},x)),a))),!y&&i.a.createElement(pe,{className:Ti.a["cmdn-PropertiesPanel-FlexItem--empty"]}),i.a.createElement(pe,{className:U()({"cmdn-u-hidden":_})},i.a.createElement(ct,{actionLabel:g||i.a.createElement(c.b,{id:"create"}),closeLabel:i.a.createElement(c.b,{id:"close"}),disableAction:!y,shouldReverseButtons:b&&!p,onClose:this.onClose,onAction:this.onCreate,warning:n,previewLabel:d,previewModeEnabled:l,previewChangeHandler:u,hasSecondAction:p,highlightSecondAction:m,secondActionLabel:f,smallActionFont:v})))}}Ri.defaultProps={presetNameField:"name"};const Di=Object(ae.n)(Ri,{}),zi=Object(c.f)(Object(X.c)(Object(F.a)(Di)));a("yix/");var ki=a("tr1J"),ji=a("4cb6"),Bi=(a("mNvP"),function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s}),Vi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Fi=class{constructor(){this._advancedSettingsCollapsed=!1,this._marginsCollapsed=!1,this._bleedAndSlugCollapsed=!1,this._appStorageController=Y.a.appStorageController,this._advancedSettingsCollapsed=this._appStorageController.getCollapsedValue(ki.a.ADVANCED_SETTINGS_COLLAPSED),this._marginsCollapsed=this._appStorageController.getCollapsedValue(ki.a.MARGINS_COLLAPSED),this._bleedAndSlugCollapsed=this._appStorageController.getCollapsedValue(ki.a.BLEED_AND_SLUG_COLLAPSED)}get advancedSettingsCollapsed(){return this._advancedSettingsCollapsed}set advancedSettingsCollapsed(e){this._appStorageController&&this._appStorageController.setCollapsedValue(ki.a.ADVANCED_SETTINGS_COLLAPSED,e),this._advancedSettingsCollapsed=e}get marginsCollapsed(){return this._marginsCollapsed}set marginsCollapsed(e){this._appStorageController&&this._appStorageController.setCollapsedValue(ki.a.MARGINS_COLLAPSED,e),this._marginsCollapsed=e}get bleedAndSlugCollapsed(){return this._bleedAndSlugCollapsed}set bleedAndSlugCollapsed(e){this._appStorageController&&this._appStorageController.setCollapsedValue(ki.a.BLEED_AND_SLUG_COLLAPSED,e),this._bleedAndSlugCollapsed=e}};Bi([ae.x,Vi("design:type",Boolean)],Fi.prototype,"_advancedSettingsCollapsed",void 0),Bi([ae.x,Vi("design:type",Boolean)],Fi.prototype,"_marginsCollapsed",void 0),Bi([ae.x,Vi("design:type",Boolean)],Fi.prototype,"_bleedAndSlugCollapsed",void 0),Fi=Bi([Object(ji.injectable)(),Vi("design:paramtypes",[])],Fi);var Hi=Fi,Ui=a("v7z/"),Gi=a.n(Ui),Wi=a("lAWh"),qi=a.n(Wi),$i=a("Ammc"),Ki=a("DkXl");const Ji={ja_JP:"jp",ko_KR:"kr",zh_TW:"tw",zh_CN:"cn",cs_CZ:"cz",da_DK:"dk",sv_SE:"se",uk_UA:"ua",nb_NO:"no",id_ID:"id_id",th_TH:"th_th",vi_VN:"vn_vi"},Xi=()=>{const e=Y.a.language;return Object.keys(Ji).includes(e)?Ji[e]:e.split("_")[0]},Yi={STAGE:`https://helpx.stage.adobe.com/${Xi()}/photoshop/using/live-coediting.html`,PROD:`https://helpx.adobe.com/${Xi()}/photoshop/using/live-coediting.html`},Qi=()=>!Y.a.isProductionEnv()?Yi.STAGE:Yi.PROD;class Zi extends n.Component{handleLearnMoreLink(e){const{analytics:t}=this.props;if(e.preventDefault(),e.stopPropagation(),"Enter"===e.key||" "===e.key||"click"===e.type){const e=Qi();Object($i.a)(e),t.logFNFTActionClickedEvent(Ki.a.LIVE_COEDITING_LEARN_MORE,{actionURL:e})}}onCheckboxChange(e){const{onChange:t}=this.props;"function"==typeof t&&((null==e?void 0:e.target)?t(e.target.checked):t(e))}render(){const{hasArtboards:e,hasLiveCoediting:t,intl:a}=this.props;return i.a.createElement("div",{className:qi.a.lcePanel},i.a.createElement("div",{className:qi.a["lcePanel-title"]},i.a.createElement("img",{src:"cmdn-assets/images/icons/S_IlluPsDesktop_EnableLiveCoEditing_35x50 2.svg",className:qi.a["lcePanel-icon"]}),i.a.createElement(c.b,{id:"lce_title"})),i.a.createElement("div",{className:qi.a["lcePanel-description"]},i.a.createElement(c.b,{id:"lce_description"}),i.a.createElement(Gi.a,{href:Qi(),target:"_blank",className:qi.a["lcePanel-link"],onClick:e=>this.handleLearnMoreLink(e),onKeyDown:e=>this.handleLearnMoreLink(e),"data-testid":"learn-more-link"},i.a.createElement(c.b,{id:"lce_learn_more_link"}))),e?i.a.createElement("div",{className:qi.a["lcePanel-artboards-warning"]},i.a.createElement(c.b,{id:"lce_warning_label"})):i.a.createElement("div",{className:qi.a["lcePanel-checkbox-container"]},i.a.createElement(Se.a,{label:a.formatMessage({id:"lce_checkbox_label"}),checked:t,onChange:e=>this.onCheckboxChange(e),labelClassName:qi.a["lcePanel-checkbox-label"],"data-testid":"lce-checkbox",role:"checkbox","aria-label":a.formatMessage({id:"lce_checkbox_label"}),"aria-checked":t})))}}var er=Object(c.f)(Zi);class tr extends n.Component{constructor(e){super(e),this.focusSavePresetButton=!1,this._collapsibleController=new Hi,this.toggleAdvancedSettings=this.toggleAdvancedSettings.bind(this)}componentDidUpdate(){this._collapsibleController.advancedSettingsCollapsed=Y.a.appStorageController.getCollapsedValue(ki.a.ADVANCED_SETTINGS_COLLAPSED)}toggleAdvancedSettings(){const{store:e}=this.props;this._collapsibleController.advancedSettingsCollapsed=!this._collapsibleController.advancedSettingsCollapsed;const{analytics:t}=e,a=e.originalPreset||{},n=Object(o.f)(e.activeDocumentTemplate)?Object(o.e)(e.activeDocumentTemplate):e.activeDocumentTemplate,i={advancedSettingsCollapsed:this._collapsibleController.advancedSettingsCollapsed,settings:{}};Object.assign(i,a),Object.assign(i.settings,n),t.logFNFTActionClickedEvent("more-options",i)}get content(){var e;const{store:t}=this.props,{activeDocumentTemplate:a,defaultSettings:n,openColorPicker:r,analytics:s}=t,o=(null==n?void 0:n.userLocaleDecimal)||".",{displayWidth:l,displayHeight:d,displayMaxDocWidth:u,displayMaxDocHeight:h,displayMinDocWidth:p,displayMinDocHeight:m,displayResolution:g,displayMaxResolution:f,displayMinResolution:v,docStep:y,fastStepMultiplier:b,slowStepMultiplier:E,units:_,resolutionUnits:w,displayBackgroundValues:I,displayColorMode:x,displayColorDepth:S,displayColorProfileLists:O,profile:C,scale:P,orientation:N,hasArtboards:A,hasLiveCoediting:T,updateDimensionUnit:M,updateWidth:L,updateHeight:R,updateResolution:D,toggleOrientation:z,updateArtboards:k,setLiveCoediting:j,updateResolutionUnit:B,updateColorMode:V,updateEncoding:F,updateColorProfile:H,updateAspectRatio:U,updateFill:G,displayBackground:W,defaultCustomColor:q,displayCustomColor:$,displayCustomColorRgbString:K,displayColorModes:J}=a||{},X=null==n?void 0:n.defaultPresetSettings,Q=i.a.createElement(c.b,{id:"newdoc_details_label_width"}),Z=null===(e=null==n?void 0:n.units)||void 0===e?void 0:e.filter(e=>"columnsUnit"!==e);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ce,{className:Mn.a["cmdn-DimensionsBlock"]},i.a.createElement(jn,{widthInput:{id:"cmdn-sidebar-WidthPanel",title:Q,value:l,min:p,max:u,step:y,fastStepMultiplier:b,slowStepMultiplier:E,userLocaleDecimal:o,defaultValue:null==X?void 0:X.width,unitsValue:_,units:Z,defaultUnitsValue:null==n?void 0:n.defaultUnits,onUnitChange:e=>M(e),onChange:e=>L(e)},heightInput:{id:"cmdn-sidebar-HeightRowPanel",value:d,min:m,max:h,step:y,fastStepMultiplier:b,slowStepMultiplier:E,userLocaleDecimal:o,defaultValue:null==X?void 0:X.height,unitsValue:_,units:Z,onUnitChange:e=>M(e),onChange:e=>R(e)},analytics:s}),i.a.createElement(ui,{optionsInput:{id:"cmdn-sidebar-dimensions",defaultUnitsValue:null==n?void 0:n.defaultUnits,defaultValue:null==X?void 0:X.width,onUnitChange:e=>M(e),onChange:e=>L(e),unitsValue:_,units:Z},orientationInputs:{orientation:N,defaultOrientation:null==X?void 0:X.orientation,onOrientationChange:e=>z(e)},artboard:{hasArtboards:A,defaultHasArtboards:!!(null==X?void 0:X.artboards),onArtboardsChange:e=>{k(e),s.logPresetDetailsInteraction("artboards")},hasLiveCoediting:T},analytics:s})),i.a.createElement(bi,{id:"cmdn-sidebar-ResolutionPanel",value:g,step:.1,fastStepMultiplier:10,min:v,max:f,userLocaleDecimal:o,defaultValue:null==X?void 0:X.resolution,unitsValue:w,units:null==n?void 0:n.resolutionUnits,defaultUnitsValue:null==n?void 0:n.defaultResolutionUnits,onUnitChange:e=>B(e),onChange:e=>D(e),analytics:s}),i.a.createElement(Ga,{value:x,defaultValue:null==X?void 0:X.mode,hasDepth:!0,depth:S,defaultDepth:null==X?void 0:X.depth,onChange:e=>V(e),onEncodingChange:e=>F(e),colorModes:J,analytics:s}),i.a.createElement(Ba,{value:W,defaultValue:q,values:I,customColor:$,customColorRgbString:K,onOpenPicker:r,onFillChange:e=>G(e,null==n?void 0:n.backgroundColor),analytics:s}),i.a.createElement($e,{title:i.a.createElement(c.b,{id:"newdoc_button_customize"}),headerId:"cmdn-sidebar-AdvancedSettings",collapsible:!0,open:!this._collapsibleController.advancedSettingsCollapsed,onToggle:this.toggleAdvancedSettings},i.a.createElement(Ja,{values:O,value:C,onChange:e=>H(e),analytics:s}),i.a.createElement(gi,{values:null==n?void 0:n.pixelAspectRatios,value:P,onChange:e=>U(e),analytics:s})),Y.a.isLiveCoeditingEnabled&&i.a.createElement(er,{hasArtboards:A,hasLiveCoediting:T,onChange:e=>{j(e),s.logPresetDetailsInteraction("live-coediting")},analytics:s}))}render(){return i.a.createElement(zi,Object.assign({},this.props,{content:this.content,hasSavePreset:!0}))}}const ar=Object(ae.n)(tr,{}),nr=Object(c.f)(Object(X.c)(Object(F.a)(ar)));var ir=a("QsLt"),rr=a.n(ir),sr=a("nvTU"),or=a.n(sr),lr=a("AYj6"),cr=a.n(lr),dr=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},ur=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let hr=class extends n.Component{constructor(e){super(e),this.topLeftNumberInput=i.a.createRef(),this.topRightNumberInput=i.a.createRef(),this.bottomLeftNumberInput=i.a.createRef(),this.bottomRightNumberInput=i.a.createRef(),this.lastTouched=1,this.updateValues=this.updateValues.bind(this),this.toggleLock=this.toggleLock.bind(this)}getScrubbyFn(e){return(t,a,n)=>{const i=e.current;i&&i.onScrubbyValue(t,a,n)}}updateValues(e,t){const{values:a,onUpdate:n,lock:i}=this.props,[r,s,o,l]=a;if(this.lastTouched=e,i)return"function"==typeof n&&n([t,t,t,t]);const c=[r,s,o,l];c[e]=t,"function"==typeof n&&n(c)}toggleLock(){const{values:e,onUpdate:t,onLockClick:a,lock:n}=this.props,[i,r,s,o]=e,l=!n;if(l){const e=[i,r,s,o][this.lastTouched];"function"==typeof t&&t([e,e,e,e])}"function"==typeof a&&a(l)}render(){const{id:e,title:t,panelGroupTitleTooltip:a,linkButtonTooltip:n,labelTopLeft:r,labelTopRight:s,labelBottomLeft:o,labelBottomRight:c,values:d,lock:u,userLocaleDecimal:h,step:p,min:m,max:g,fastStepMultiplier:f,slowStepMultiplier:v,wideNumberInputs:y,unitsValue:b,unitInfo:E,unitConvertConfig:_,numberInputClassName:w,logNumberInputAnalytics:I,logLinkInputsButtonAnalytics:x}=this.props,[S,O,C,P]=d,N={[cr.a["cmdn-LinkedNumberInputs-itemInputs--wide"]]:y};let A;e&&nt[e]&&(A=l.a.formatMessageWithPlaceholders("accessibility_aria_label_link_button",[{placeholder:"{PLACEHOLDER_LINK_SETTING}",value:null==nt?void 0:nt[e]}]));const T=i.a.createElement(ie.a,{id:this.props.id+"-link-button",className:U()(cr.a["cmdn-LinkedNumberInputs-linkedButton"],{"btn-selected":u}),selected:u,variant:"action",onClick:()=>{var e;null===(e=this.toggleLock)||void 0===e||e.call(this),null==x||x()},"aria-selected":u,"aria-label":A,"aria-pressed":u,icon:u?i.a.createElement(rr.a,{size:"S"}):i.a.createElement(or.a,{size:"S"})});return i.a.createElement(gt,{titleTooltip:a,title:t,className:cr.a["cmdn-LinkedNumberInputs-panelGroup"],titleClassName:cr.a["cmdn-LinkedNumberInputs-title"]},i.a.createElement(ce,null,i.a.createElement(pe,{className:U()([N,cr.a["cmdn-LinkedNumberInputs-itemInputs"]])},i.a.createElement(ce,null,i.a.createElement(pe,{className:U()([cr.a["cmdn-LinkedNumberInputs-item"],cr.a["cmdn-LinkedNumberInputs-firstItem"]])},i.a.createElement($e,{title:r,onScrubbyValue:this.getScrubbyFn(this.topLeftNumberInput),logScrubbyValueAnalytics:I,className:cr.a["cmdn-LinkedNumberInputs-panel"],titleClassName:cr.a["cmdn-LinkedNumberInputs-panelTitle"],headerId:e&&tt(e,et.TOP)},i.a.createElement(Pn,{id:e&&at(e,et.TOP),className:U()(cr.a["cmdn-LinkedNumberInputs-input"],w),ref:this.topLeftNumberInput,value:O,min:m,max:g,step:p,fastStepMultiplier:f,slowStepMultiplier:v,userLocaleDecimal:h,wide:y,onChange:e=>this.updateValues(1,e),useSimpleInvalidIndicator:!0,unitsValue:b,unitInfo:E,unitConvertConfig:_,hasArrows:!0,logAnalytics:I,"aria-label":this.props.ariaTopLeft}))),i.a.createElement(pe,{className:U()(cr.a["cmdn-LinkedNumberInputs-item"],cr.a["cmdn-LinkedNumberInputs-secondItem"])},i.a.createElement($e,{title:s,onScrubbyValue:this.getScrubbyFn(this.topRightNumberInput),logScrubbyValueAnalytics:I,className:cr.a["cmdn-LinkedNumberInputs-panel"],titleClassName:cr.a["cmdn-LinkedNumberInputs-panelTitle"],headerId:e&&tt(e,et.BOTTOM)},i.a.createElement(Pn,{id:e&&at(e,et.BOTTOM),className:U()(cr.a["cmdn-LinkedNumberInputs-input"],w),ref:this.topRightNumberInput,value:P,min:m,max:g,step:p,fastStepMultiplier:f,slowStepMultiplier:v,userLocaleDecimal:h,wide:y,onChange:e=>this.updateValues(3,e),useSimpleInvalidIndicator:!0,unitsValue:b,unitInfo:E,unitConvertConfig:_,hasArrows:!0,logAnalytics:I,"aria-label":this.props.ariaTopRight})))),i.a.createElement(ce,{className:cr.a["cmdn-LinkedNumberInputs-second-container"]},i.a.createElement(pe,{className:U()([cr.a["cmdn-LinkedNumberInputs-item"],cr.a["cmdn-LinkedNumberInputs-firstItem"]])},i.a.createElement($e,{title:o,onScrubbyValue:this.getScrubbyFn(this.bottomLeftNumberInput),logScrubbyValueAnalytics:I,className:cr.a["cmdn-LinkedNumberInputs-panel"],titleClassName:cr.a["cmdn-LinkedNumberInputs-panelTitle"],headerId:e&&tt(e,et.LEFT)},i.a.createElement(Pn,{id:e&&at(e,et.LEFT),className:U()(cr.a["cmdn-LinkedNumberInputs-input"],w),ref:this.bottomLeftNumberInput,value:S,min:m,max:g,step:p,fastStepMultiplier:f,slowStepMultiplier:v,userLocaleDecimal:h,wide:y,onChange:e=>this.updateValues(0,e),useSimpleInvalidIndicator:!0,unitsValue:b,unitInfo:E,unitConvertConfig:_,hasArrows:!0,logAnalytics:I,"aria-label":this.props.ariaBottomLeft}))),i.a.createElement(pe,{className:U()(cr.a["cmdn-LinkedNumberInputs-item"],cr.a["cmdn-LinkedNumberInputs-secondItem"])},i.a.createElement($e,{title:c,onScrubbyValue:this.getScrubbyFn(this.bottomRightNumberInput),logScrubbyValueAnalytics:I,className:cr.a["cmdn-LinkedNumberInputs-panel"],titleClassName:cr.a["cmdn-LinkedNumberInputs-panelTitle"],headerId:e&&tt(e,et.RIGHT)},i.a.createElement(Pn,{id:e&&at(e,et.RIGHT),className:U()(cr.a["cmdn-LinkedNumberInputs-input"],w),ref:this.bottomRightNumberInput,value:C,min:m,max:g,step:p,fastStepMultiplier:f,slowStepMultiplier:v,userLocaleDecimal:h,wide:y,onChange:e=>this.updateValues(2,e),useSimpleInvalidIndicator:!0,unitsValue:b,unitInfo:E,unitConvertConfig:_,hasArrows:!0,logAnalytics:I,"aria-label":this.props.ariaBottomRight}))))),i.a.createElement(pe,null,i.a.createElement(ce,{className:cr.a["cmdn-LinkedNumberInputs-containerLink"]},i.a.createElement(pe,{className:cr.a["cmdn-LinkedNumberInputs-linkIcon"]},n?i.a.createElement(Ne.a,{placement:"left",trigger:["hover","focus"],delayShow:800},T,i.a.createElement(Ce.a,{variant:"inspect"},n)):T)))))}};hr.defaultProps={values:[0,0,0,0],lock:!0},hr=dr([F.a,ur("design:paramtypes",[Object])],hr);var pr=hr,mr=a("2KrX"),gr=a.n(mr);class fr extends n.Component{render(){const{defaultValue:e,value:t,optionsData:a,label:n,titleLabel:r,onChange:s,intl:o,className:l,id:d,logAnalytics:u}=this.props,h=a&&a.map(e=>({label:o.formatMessage({id:`${n}_${e.mode}`}),value:e.value})),p=[gr.a["cmdn-SelectOptionPanel"],l],m=Ha(h,t,r,o);return i.a.createElement($e,{title:i.a.createElement(c.b,{id:r}),className:U()(p)},i.a.createElement(Da.a,{id:d,value:t,defaultValue:e,options:h,onChange:e=>{s(a&&a.find(t=>t.value===e))},onOpen:u,placeholder:o.formatMessage({id:"select_placeholder"}),"aria-label":m,role:"combobox"}))}}var vr=Object(c.f)(fr);class yr extends n.Component{render(){const{id:e,value:t,min:a,max:n,step:r,fastStepMultiplier:s,slowStepMultiplier:o,shiftMultiplierArtboards:l,defaultValue:d,orientation:u,defaultOrientation:h,artboardsCount:p,hasArtboards:m,defaultHasArtboards:g,minArtboards:f,maxArtboards:v,stepArtboards:y,defaultArtboardsCount:b,onOrientationChange:E,onArtboardsChange:_,onChange:w,userLocaleDecimal:I,wideNumberInputs:x,unitsValue:S,heightClassName:O,unitInfo:C,unitConvertConfig:P,hasArrows:N,isBindingEnabled:A,isJapaneseEnabled:T,bindingTitle:M,binding:L,defaultBinding:R,onBindingChange:D,orientationLandscapeTooltip:z,orientationPortraitTooltip:k,bindLeftToRight:j,bindRightToLeft:B,analytics:V}=this.props;return i.a.createElement($e,{className:zn.a["cmdn-HeightRowPanel"]},i.a.createElement(ce,null,i.a.createElement(pe,{className:zn.a["cmdn-HeightItem"]},i.a.createElement(Nn,{id:e,value:t,min:a,max:n,className:O,step:r,fastStepMultiplier:s,slowStepMultiplier:o,defaultValue:d,unitsValue:S,hasArrows:N,unitInfo:C,unitConvertConfig:P,onChange:w,wideNumberInputs:x,userLocaleDecimal:I,analytics:V})),!A&&i.a.createElement(pe,{className:zn.a["cmdn-OrientationItem"]},i.a.createElement(Yn,{value:u,defaultValue:h,onChange:E,portraitTooltip:k,landscapeTooltip:z,analytics:V})),i.a.createElement(pe,{className:zn.a["cmdn-ArtboardsItem"]},void 0!==p&&i.a.createElement(ei,{id:"cmdn-sidebar-ArtboardsNumberPanel",value:p,min:f,max:v,step:y,fastStepMultiplier:l,defaultValue:b,wideNumberInputs:x,onChange:_,analytics:V}),void 0!==m&&i.a.createElement(Xe,{id:"cmdn-sidebar-ArtboardsCheckboxPanel",title:i.a.createElement(c.b,{id:"newdoc_details_label_artboards"}),value:m,defaultValue:g,onChange:_}))),A&&i.a.createElement(ce,null,i.a.createElement(pe,{className:zn.a["cmdn-OrientationItem--withBinding"]},i.a.createElement(Yn,{value:u,defaultValue:h,onChange:E,portraitTooltip:k,landscapeTooltip:z,analytics:V})),i.a.createElement(pe,{className:zn.a["cmdn-OrientationItem"]},i.a.createElement(ci,{title:M,value:L,defaultValue:R,onChange:D,isJapaneseEnabled:T,leftToRightTooltip:j,rightToLeftTooltip:B}))))}}class br extends n.Component{render(){const{id:e,dimensionsId:t,defaultUnitsValue:a,defaultValue:n,intl:r,max:s,min:o,onChange:d,onUnitChange:u,step:h,fastStepMultiplier:p,slowStepMultiplier:m,units:g,unitsValue:f,userLocaleDecimal:v,wideNumberInputs:y,value:b,unitInfo:E,widthClassName:_,unitsTitle:w,unitConvertConfig:I,hasArrows:x,analytics:S}=this.props,{formatMessage:O}=r,C=g&&g.map(e=>({label:O({id:"newdoc_details_"+e}),value:e}));return i.a.createElement(vi,{id:e,dimensionsId:t,title:i.a.createElement(c.b,{id:"newdoc_details_label_width"}),"aria-label":l.a.formatMessage("newdoc_details_label_width"),labelId:"newdoc_details_label_width",value:b,min:o,max:s,step:h,fastStepMultiplier:p,slowStepMultiplier:m,defaultValue:n,unitsValue:f,defaultUnitsValue:a,options:C,dimensionClassName:_,unitsTitle:w,userLocaleDecimal:v,wideNumberInputs:y,onUnitChange:u,onChange:d,unitInfo:E,unitConvertConfig:I,hasArrows:x,logNumberInputAnalytics:()=>S.logPresetDetailsInteraction("width"),logUnitsSelectAnalytics:()=>S.logPresetDetailsInteraction("dimensions-unit")})}}var Er=Object(c.f)(br),_r=a("ylvC"),wr=a.n(_r),Ir=a("VFTl"),xr=a("0mF0");const Sr=i.a.createElement("svg",{width:"100%",height:"100%"},i.a.createElement("line",{x1:"100%",y1:"0",x2:"0",y2:"100%",stroke:"red",strokeWidth:"3"})),Or=Object.values(xr.a);class Cr extends n.Component{constructor(){super(...arguments),this.openPicker=async()=>{this.props.analytics.logPresetDetailsInteraction("background-contents-color-picker");const e=await this.props.onOpenPicker();e&&this.onFillChange(e)},this.onFillChange=e=>{e===xr.a.CUSTOM?this.openPicker():this.props.onFillChange(e)},this.onKeyDown=e=>{" "===e.key&&this.openPicker()}}render(){const{value:e,intl:t,analytics:a}=this.props,n="object"==typeof e?xr.a.CUSTOM:e,r=Or.map(e=>({label:t.formatMessage({id:"newdoc_artboards_background_color_"+e}),value:e}));return i.a.createElement($e,{title:i.a.createElement(c.b,{id:"newdoc_details_label_background"})},i.a.createElement(ce,null,i.a.createElement(pe,{className:ka.a["cmdn-BackgroundContents-color"]},i.a.createElement(Da.a,{id:"cmdn-sidebar-BackgroundContents-dropdown",className:ka.a["cmdn-BackgroundContents-dropdown"],value:n,options:r,onOpen:()=>a.logPresetDetailsInteraction("background-contents-select"),onChange:this.onFillChange,placeholder:t.formatMessage({id:"select_placeholder"}),role:"combobox","data-testid":"cmdn-sidebar-BackgroundContents-dropdown"})),i.a.createElement(pe,{className:ka.a["cmdn-BackgroundContents-pickerItem"]},i.a.createElement("div",{id:"cmdn-sidebar-BackgroundContents-colorPicker",tabIndex:0,className:ka.a["cmdn-BackgroundContents-colorPicker"],onClick:()=>this.openPicker(),style:{backgroundColor:Object(xr.b)(e)},onKeyDown:this.onKeyDown,"data-testid":"cmdn-sidebar-BackgroundContents-colorPicker"},e===xr.a.TRANSPARENT&&i.a.createElement("div",{className:ka.a["cmdn-BackgroundContents-diagonalLine"]},Sr)))))}}var Pr,Nr=Object(c.f)(Cr);!function(e){e.SPACE=" "}(Pr||(Pr={}));class Ar extends n.Component{constructor(e){super(e),this._collapsibleController=new Hi,this.state={warningTooltipOpen:!1},this.toggleAdvancedSettings=this.toggleAdvancedSettings.bind(this),this.openMoreSettings=this.openMoreSettings.bind(this),this.warningTooltipOnKeyDown=this.warningTooltipOnKeyDown.bind(this)}toggleAdvancedSettings(){const{store:e}=this.props;this._collapsibleController.advancedSettingsCollapsed=!this._collapsibleController.advancedSettingsCollapsed;const{analytics:t}=e,a=e.originalPreset||{},n=Object(o.f)(e.activeDocumentTemplate)?Object(o.e)(e.activeDocumentTemplate):e.activeDocumentTemplate,i={advancedSettingsCollapsed:this._collapsibleController.advancedSettingsCollapsed,settings:{}};Object.assign(i,a),Object.assign(i.settings,n),t.logFNFTActionClickedEvent("more-options",i)}onKeyDownMoreSettings(e){switch(e.key){case"Enter":Ue(e),this.openMoreSettings()}}warningTooltipOnKeyDown(e){"Escape"===e.key&&(this.state.warningTooltipOpen?Ue(e):this.props.store.closeApp("close"))}async openMoreSettings(){const{store:e}=this.props;e.activeDocumentTemplate&&await Object(Et.a)(e,Object(Et.b)(e),!0)}get content(){const{store:e}=this.props,{activeDocumentTemplate:t,defaultSettings:a,analytics:n,openColorPicker:r}=e,s=a&&a.userLocaleDecimal?a.userLocaleDecimal:".",{width:o,height:d,displayMaxDocWidth:u,displayMaxDocHeight:h,displayMinDocWidth:p,displayMinDocHeight:m,displayRasterEffectList:g,displayPreviewModes:f,docStep:v,fastStepMultiplier:y,slowStepMultiplier:b,units:E,unitInfo:_,displayColorMode:w,displaycolorModeWarning:I,displayRasterEffect:x,displayPreviewMode:S,displayColorDepth:O,orientation:C,numArtboards:P,minArtboards:N,maxArtboards:A,updateDimensionUnit:T,updateWidth:M,updateHeight:L,toggleOrientation:R,updateArtboards:D,updateColorMode:z,updateEncoding:k,displayColorModes:j,bleedValues:B,lockBleed:V,updateBleedValues:F,updateBleedLock:H,updateRasterEffects:G,updatePreviewModes:W,minBleed:q,maxBleed:$,stepBleed:K,shiftMultiplierBleed:J,shiftMultiplierArtboards:X,secondaryMultiplierBleed:Q,pointsPerInch:Z,picasPerInch:ee,artboardsBackgroundValue:te,setArtboardsBackground:ae,presetJSON:ne}=t||{},re=[{[wr.a["cmdn-AiPropertiesPanel-advancedOptionsPanel"]]:!this._collapsibleController.advancedSettingsCollapsed}],se=wr.a["cmdn-AiPropertiesPanel-advancedOptionsSummary"],oe=wr.a["cmdn-AiPropertiesPanel-advancedOptionsSummary-span"],le=wr.a["cmdn-AiPropertiesPanel-moreSettingsPanel"],de=wr.a["cmdn-AiPropertiesPanel-moreSettingsPanel-button"],ue=a&&a.defaultPresetSettings||{},he={pointsPerInch:Z,picasPerInch:ee},me=l.a.formatMessage("newdoc_details_label_bleed"),ge=`${me} ${l.a.formatMessage("newdoc_details_label_top")}`,fe=`${me} ${l.a.formatMessage("newdoc_details_label_bottom")}`,ve=`${me} ${l.a.formatMessage("newdoc_details_label_left")}`,ye=`${me} ${l.a.formatMessage("newdoc_details_label_right")}`;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Er,{id:"cmdn-sidebar-WidthPanel",dimensionsId:"cmdn-sidebar-dimensions",value:o,min:p,max:u,step:v,fastStepMultiplier:y,slowStepMultiplier:b,userLocaleDecimal:s,defaultValue:ue.width,unitsValue:E,units:a&&a.units&&a.units.filter(e=>"columnsUnit"!==e),unitInfo:_,unitConvertConfig:he,wideNumberInputs:!0,defaultUnitsValue:a&&a.defaultUnits,onUnitChange:e=>T(e),onChange:e=>M(e),analytics:n}),i.a.createElement(yr,{id:"cmdn-sidebar-HeightRowPanel",value:d,min:m,max:h,step:v,fastStepMultiplier:y,slowStepMultiplier:b,userLocaleDecimal:s,defaultValue:ue.height,orientation:C,defaultOrientation:ue.orientation,artboardsCount:P,minArtboards:N,maxArtboards:A,stepArtboards:1,shiftMultiplierArtboards:X,defaultArtboardsCount:1,wideNumberInputs:!0,unitsValue:E,unitInfo:_,unitConvertConfig:he,onOrientationChange:e=>R(e),onArtboardsChange:e=>D(e),onChange:e=>L(e),analytics:n}),i.a.createElement(pr,{id:"cmdn-sidebar-BleedPanel",title:i.a.createElement(c.b,{id:"newdoc_details_label_bleed"}),labelTopLeft:i.a.createElement(c.b,{id:"newdoc_details_label_top"}),labelTopRight:i.a.createElement(c.b,{id:"newdoc_details_label_bottom"}),labelBottomLeft:i.a.createElement(c.b,{id:"newdoc_details_label_left"}),labelBottomRight:i.a.createElement(c.b,{id:"newdoc_details_label_right"}),ariaTopLeft:ge,ariaTopRight:fe,ariaBottomLeft:ve,ariaBottomRight:ye,lock:V,values:B,unitsValue:E,unitInfo:_,unitConvertConfig:he,min:q,max:$,step:K,fastStepMultiplier:J,slowStepMultiplier:Q,wideNumberInputs:!0,onUpdate:F,onLockClick:H,logNumberInputAnalytics:()=>n.logPresetDetailsInteraction("bleed"),logLinkInputsButtonAnalytics:()=>n.logPresetDetailsInteraction("bleed-link-inputs")}),Y.a.isArtboardsBackgroundEnabled&&i.a.createElement(Nr,{value:te,onOpenPicker:()=>r(ne),onFillChange:e=>ae(e),analytics:n}),i.a.createElement($e,{title:i.a.createElement(c.b,{id:"newdoc_button_customize"}),headerId:"cmdn-sidebar-AdvancedSettings",titleClassName:wr.a["cmdn-AiPropertiesPanel-advancedOptionsPanel-title"],collapsible:!0,open:!this._collapsibleController.advancedSettingsCollapsed,onToggle:this.toggleAdvancedSettings,className:U()(re)},i.a.createElement(pe,{className:wr.a["cmdn-AiPropertiesPanel-advancedOptionsPanel-ColorModePanel-container"]},i.a.createElement("div",{className:wr.a["cmdn-AiPropertiesPanel-FlexItem-ColorModePanel-component"]},i.a.createElement(Ga,{value:w,defaultValue:ue.mode,hasDepth:!1,titleClassName:wr.a["cmdn-AiPropertiesPanel-FlexItem-ColorModePanel-title"],depth:O,defaultDepth:ue.depth,onChange:e=>{z(e.mode)},onEncodingChange:e=>k(e),colorModes:j,analytics:n})),I&&i.a.createElement(Ne.a,{trigger:["hover","focus"],placement:"left",delayShow:800,onShow:()=>this.setState({warningTooltipOpen:!0}),onHide:()=>this.setState({warningTooltipOpen:!1})},i.a.createElement("div",{className:wr.a["cmdn-AiPropertiesPanel-FlexItem-ColorModelPanel-warning-wrapper"],tabIndex:0,onKeyDown:this.warningTooltipOnKeyDown,defaultpreventedkeys:["Escape"]},i.a.createElement(Ie.a,{"aria-label":l.a.formatMessage("newdoc_ai_colormode_warning"),id:"cmdn-sidebar-ColorModeWarning"})),i.a.createElement(Ce.a,{variant:"inspect"},i.a.createElement(c.b,{id:"newdoc_ai_colormode_warning"})))),i.a.createElement(vr,{id:"cmdn-sidebar-RasterEffectsPanel",value:x,defaultValue:ue.rasterEffectSettings,label:"newdoc_details_rastermode",className:wr.a["cmdn-AiPropertiesPanel-advancedOptionsPanel-item"],titleLabel:"newdoc_details_label_rasterEffects",onChange:e=>G(e.value),optionsData:g,logAnalytics:()=>n.logPresetDetailsInteraction("raster-effects")}),i.a.createElement(vr,{id:"cmdn-sidebar-PreviewMode",value:S,defaultValue:ue.previewMode,label:"newdoc_details_previewmode",titleLabel:"newdoc_details_label_previewMode",className:wr.a["cmdn-AiPropertiesPanel-advancedOptionsPanel-item"],onChange:e=>W(e.value),optionsData:f,logAnalytics:()=>n.logPresetDetailsInteraction("preview-mode")})),this._collapsibleController.advancedSettingsCollapsed&&i.a.createElement($e,{className:U()(se)},i.a.createElement(ce,null,i.a.createElement(c.b,{id:"newdoc_details_label_colormode"}),":",i.a.createElement("span",{className:U()(oe)},w,","),i.a.createElement(c.b,{id:"newdoc_details_label_ppi"}),i.a.createElement("span",{className:U()(oe)},x))),i.a.createElement($e,{className:U()(le),onKeyDown:this.onKeyDownMoreSettings},i.a.createElement(ie.a,{id:"cmdn-sidebar-MoreSettingsButton",className:U()(de),key:"more",variant:"action",onClick:this.openMoreSettings},i.a.createElement(c.b,{id:"newdoc_button_customize_ai"}))))}onKeyDownLearnMoreLink(e,t){e.key===Pr.SPACE&&(e.preventDefault(),Object(Ir.a)().shell.openExternal(t))}setupLearnMoreLinkLocale(e){const t=e.substring(0,2);return-1!==["en","fi","nb"].indexOf(t)?"":-1!==["es","fr"].indexOf(t)?"_"+t:"_"+e.substring(3,5).toLowerCase()}get footerWarning(){const{store:e}=this.props,{activeDocumentTemplate:t,language:a}=e,{fittingIsValid:n}=t||{};let r,s="newdoc_ai_largecanvas_warning";const o="https://adobe.com/go/ai_learn_more_large_canvas"+this.setupLearnMoreLinkLocale(a);if(!n){const{layoutChangeCouldMakeFittingValid:e}=t||{};e&&(s="newdoc_ai_layoutchange_warning")}return t&&!n&&(r=i.a.createElement(ce,{className:wr.a["cmdn-AiPropertiesPanel-FlexItem-LargeCanvas-Text"]},i.a.createElement("span",null,i.a.createElement(c.b,{id:s})),i.a.createElement("span",null,i.a.createElement(Gi.a,{href:o,target:"_blank",variant:"quiet",className:wr.a["cmdn-AiPropertiesPanel-warning-learnmore-link"],onKeyDown:e=>this.onKeyDownLearnMoreLink(e,o)},i.a.createElement(c.b,{id:"newdoc_ai_largecanvas_learn_more"}))))),r}render(){return i.a.createElement(zi,Object.assign({},this.props,{content:this.content,hasSavePreset:Y.a.savePresetFeatureFlag,footerWarning:this.footerWarning}))}}const Tr=Object(ae.n)(Ar,{}),Mr=Object(c.f)(Object(X.c)(Object(F.a)(Tr)));var Lr=a("jjTx"),Rr=a.n(Lr);class Dr extends n.Component{render(){return i.a.createElement($e,{className:Rr.a["cmdn-Separator-Panel"]},i.a.createElement("div",{className:Rr.a["cmdn-Separator-line"]}))}}var zr=Dr,kr=a("bJhz"),jr=a.n(kr);class Br extends n.Component{constructor(e){super(e),this._collapsibleController=new Hi,this.pagesNumberInput=i.a.createRef(),this.startNumberInput=i.a.createRef(),this.columnsInput=i.a.createRef(),this.columnGutterInput=i.a.createRef(),this.toggleBleedAndSlug=this.toggleBleedAndSlug.bind(this),this.togglePreviewModeFlag=this.togglePreviewModeFlag.bind(this),this.toggleMargins=this.toggleMargins.bind(this),this.onScrubbyValuesStart=this.onScrubbyValuesStart.bind(this),this.onScrubbyValuePages=this.onScrubbyValuePages.bind(this),this.onScrubbyValuesColumns=this.onScrubbyValuesColumns.bind(this),this.onScrubbyValuesColumnGutter=this.onScrubbyValuesColumnGutter.bind(this),this.onCreate=this.onCreate.bind(this),this.updatePreviewDoc=this.updatePreviewDoc.bind(this),this.updateDocumentName=this.updateDocumentName.bind(this)}onScrubbyValuePages(e,t,a){this.pagesNumberInput.current&&this.pagesNumberInput.current.onScrubbyValue(e,t,a)}onScrubbyValuesStart(e,t,a){this.startNumberInput.current&&this.startNumberInput.current.onScrubbyValue(e,t,a)}onScrubbyValuesColumns(e,t,a){this.columnsInput.current&&this.columnsInput.current.onScrubbyValue(e,t,a)}onScrubbyValuesColumnGutter(e,t,a){this.columnGutterInput.current&&this.columnGutterInput.current.onScrubbyValue(e,t,a)}async togglePreviewModeFlag(){const{store:e}=this.props,{analytics:t,previewModeEnabled:a,activeDocumentTemplate:n}=e,i=!a;e.updatePreviewModeEnabled(i),await Y.a.updateIsPreviewEnabled(i),await e.getPreviewModeEnabledFromHost(),n&&n.updatePreviewModeEnabled(i);const r={previewModeEnabled:i,settings:{}};t.logFNFTActionClickedEvent("preview-mode-flag",r)}toggleBleedAndSlug(){const{store:e}=this.props,{analytics:t}=e;this._collapsibleController&&(this._collapsibleController.bleedAndSlugCollapsed=!this._collapsibleController.bleedAndSlugCollapsed);const a=e.originalPreset||{},n=Object(o.f)(e.activeDocumentTemplate)?Object(o.e)(e.activeDocumentTemplate):e.activeDocumentTemplate;if(this._collapsibleController){const e={bleedAndSlugCollapsed:this._collapsibleController.bleedAndSlugCollapsed,settings:{}};Object.assign(e,a),Object.assign(e.settings,n),t.logFNFTActionClickedEvent("bleed-and-slug",e)}}toggleMargins(){const{store:e}=this.props,{analytics:t}=e;this._collapsibleController&&(this._collapsibleController.marginsCollapsed=!this._collapsibleController.marginsCollapsed);const a=e.originalPreset||{},n=Object(o.f)(e.activeDocumentTemplate)?Object(o.e)(e.activeDocumentTemplate):e.activeDocumentTemplate;if(this._collapsibleController){const e={marginsCollapsed:this._collapsibleController.marginsCollapsed,settings:{}};Object.assign(e,a),Object.assign(e.settings,n),t.logFNFTActionClickedEvent("margins",e)}}updateDocumentName(e){const{store:t}=this.props;t.documentName=Object(me.i)(e)}async updatePreviewDoc(){const{store:e}=this.props,{previewModeEnabled:t}=e;t&&await e.updatePreviewDocSettings()}updatePreviewableProperty(e){const{store:t}=this.props;return async(...a)=>{await e(...a);const{previewModeEnabled:n}=t;n&&await this.updatePreviewDoc()}}get content(){const{store:e}=this.props,{activeDocumentTemplate:t,defaultSettings:a,isJapaneseEnabled:n,isBindingEnabled:r,analytics:s}=e,o=a&&a.userLocaleDecimal?a.userLocaleDecimal:".",{width:d,height:u,displayMaxDocWidth:h,displayMaxDocHeight:p,displayMinDocWidth:m,displayMinDocHeight:g,docStep:f,fastStepMultiplier:v,slowStepMultiplier:y,units:b,unitInfo:E,orientation:_,updateWidth:w,updateHeight:I,updateDimensionUnit:x,toggleOrientation:S,bleedValues:O,slugValues:C,lockBleed:P,lockSlug:N,updateBleedValues:A,updateSlugValues:T,updateBleedLock:M,updateSlugLock:L,minBleed:R,minSlug:D,maxBleed:z,maxSlug:k,pointsPerInch:j,picasPerInch:B,lockMargins:V,marginsValues:F,updateMarginsLock:H,updateMarginsValues:G,minMargins:W,maxMargins:q,facingPages:$,pageCount:K,numPagesBoundMin:J,numPagesBoundMax:X,updateNumPages:Y,updateFacingPages:Q,columns:Z,colNumBoundMin:ee,colNumBoundMax:te,updateColumns:ae,gutter:ne,minColGutter:ie,colGutterBoundMax:re,updateGutter:se,startPageNum:oe,startPageBoundMin:le,startPageBoundMax:de,updateStartPageNum:ue,autoTextFrame:he,updateAutoTextFrame:me,pageBinding:ge,updatePageBinding:fe,dialogToolTips:ve}=t||{},{tipChainValues:ye,tipBleed:be,tipSlug:Ee,bindingText:_e,tipLandscape:we,tipPotrait:Ie,tipLeftToRight:xe,tipRightToLeft:Se}=ve||{},Oe=a&&a.defaultPresetSettings||{},Ce={pointsPerInch:j,picasPerInch:B},Pe=$?"newdoc_details_label_inside":"newdoc_details_label_left",Ne=$?"newdoc_details_label_outside":"newdoc_details_label_right",Ae=l.a.formatMessage("newdoc_details_label_top"),Te=l.a.formatMessage("newdoc_details_label_bottom"),Me=l.a.formatMessage(Pe),Le=l.a.formatMessage(Ne),Re=l.a.formatMessage("newdoc_details_label_Margins"),De=`${Re} ${Ae}`,ze=`${Re} ${Te}`,ke=`${Re} ${Me}`,je=`${Re} ${Le}`,Be=l.a.formatMessage("newdoc_details_label_bleed"),Ve=`${Be} ${Ae}`,Fe=`${Be} ${Te}`,He=`${Be} ${Me}`,Ue=`${Be} ${Le}`,Ge=l.a.formatMessage("newdoc_details_label_slug"),We=`${Ge} ${Ae}`,qe=`${Ge} ${Te}`,Ke=`${Ge} ${Me}`,Je=`${Ge} ${Le}`;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Er,{id:"cmdn-sidebar-WidthPanel",dimensionsId:"cmdn-sidebar-dimensions",value:d,min:m,max:h,step:f,fastStepMultiplier:v,slowStepMultiplier:y,userLocaleDecimal:o,defaultValue:Oe.width,unitsValue:b,units:a&&a.units&&a.units.filter(e=>"columnsUnit"!==e),unitInfo:E,unitConvertConfig:Ce,wideNumberInputs:!0,defaultUnitsValue:a&&a.defaultUnits,onUnitChange:e=>this.updatePreviewableProperty(x)(e),onChange:e=>this.updatePreviewableProperty(w)(e),hasArrows:!0,unitsTitle:i.a.createElement(c.b,{id:"newdoc_details_label_unit"}),widthClassName:jr.a["cmdn-IdPropertiesPanel-WidthPanel-dimension"],analytics:s}),i.a.createElement(yr,{id:"cmdn-sidebar-HeightRowPanel",value:u,min:g,max:p,step:f,heightClassName:jr.a["cmdn-IdPropertiesPanel-HeightPanel-dimension"],fastStepMultiplier:v,slowStepMultiplier:y,userLocaleDecimal:o,defaultValue:Oe.height,orientation:_,defaultOrientation:Oe.orientation,stepArtboards:1,wideNumberInputs:!0,unitsValue:b,unitInfo:E,unitConvertConfig:Ce,isBindingEnabled:r,isJapaneseEnabled:n,binding:ge,bindingTitle:_e,onBindingChange:fe,onOrientationChange:e=>this.updatePreviewableProperty(S)(e),onChange:e=>this.updatePreviewableProperty(I)(e),orientationLandscapeTooltip:we,orientationPortraitTooltip:Ie,bindLeftToRight:xe,bindRightToLeft:Se,hasArrows:!0,analytics:s}),i.a.createElement($e,null,i.a.createElement(ce,null,i.a.createElement(pe,{className:U()(jr.a["cmdn-IdPropertiesPanel-FlexItem-first"],jr.a["cmdn-IdPropertiesPanel-HeightPanel-dimension"],jr.a["cmdn-IdPropertiesPanel-justifyEnd"])},i.a.createElement($e,{title:i.a.createElement(c.b,{id:"newdoc_details_label_pages"}),titleClassName:jr.a["cmdn-IdPropertiesPanel-firstColumnTitle"],onScrubbyValue:this.onScrubbyValuePages,logScrubbyValueAnalytics:()=>s.logPresetDetailsInteraction("pages")},i.a.createElement(mn,{id:"cmdn-sidebar-Pages",ref:this.pagesNumberInput,className:jr.a["cmdn-IdPropertiesPanel-NumberInput"],value:K,min:J,max:X,step:1,fastStepMultiplier:10,needsSnapToStep:!0,userLocaleDecimal:o,defaultValue:J,onChange:e=>this.updatePreviewableProperty(Y)(e),wide:!0,useSimpleInvalidIndicator:!0,allowSpecialCharacters:!0,logAnalytics:()=>s.logPresetDetailsInteraction("pages"),"aria-label":l.a.formatMessage("newdoc_details_label_pages")}))),i.a.createElement(pe,{className:U()(jr.a["cmdn-IdPropertiesPanel-HeightPanel-dimension"],jr.a["cmdn-IdPropertiesPanel-justifyEnd"])},i.a.createElement(Xe,{id:"cmdn-sidebar-FacingPagesCheckboxPanel",value:$,title:i.a.createElement(c.b,{id:"newdoc_details_label_Facing"}),defaultValue:!1,titleClassName:jr.a["cmdn-IdPropertiesPanel-secondColumnTitle"],onChange:(...e)=>{this.updatePreviewableProperty(Q)(...e),s.logPresetDetailsInteraction("facing-pages")},ariaLabel:l.a.formatMessage("newdoc_details_label_Facing")})))),i.a.createElement($e,null,i.a.createElement(ce,null,i.a.createElement(pe,{className:U()(jr.a["cmdn-IdPropertiesPanel-FlexItem-first"],jr.a["cmdn-IdPropertiesPanel-HeightPanel-dimension"],jr.a["cmdn-IdPropertiesPanel-justifyEnd"])},i.a.createElement($e,{title:i.a.createElement(c.b,{id:"newdoc_details_label_StartPage"}),titleClassName:jr.a["cmdn-IdPropertiesPanel-firstColumnTitle"],onScrubbyValue:this.onScrubbyValuesStart,logScrubbyValueAnalytics:()=>s.logPresetDetailsInteraction("start-page")},i.a.createElement(mn,{id:"cmdn-sidebar-Start",ref:this.startNumberInput,className:jr.a["cmdn-IdPropertiesPanel-NumberInput"],value:oe,min:le,max:de,step:1,fastStepMultiplier:10,needsSnapToStep:!0,userLocaleDecimal:o,defaultValue:le,onChange:e=>this.updatePreviewableProperty(ue)(e),wide:!0,useSimpleInvalidIndicator:!0,allowSpecialCharacters:!0,logAnalytics:()=>s.logPresetDetailsInteraction("start-page"),"aria-label":l.a.formatMessage("newdoc_details_label_StartPage")}))),i.a.createElement(pe,{className:U()(jr.a["cmdn-IdPropertiesPanel-HeightPanel-dimension"],jr.a["cmdn-IdPropertiesPanel-justifyEnd"])},i.a.createElement(Xe,{value:he,title:i.a.createElement(c.b,{id:"newdoc_details_label_TextFrame"}),defaultValue:!1,titleClassName:jr.a["cmdn-IdPropertiesPanel-secondColumnTitle"],onChange:(...e)=>{this.updatePreviewableProperty(me)(...e),s.logPresetDetailsInteraction("primary-text-frame")},ariaLabel:l.a.formatMessage("newdoc_details_label_TextFrame")})))),!n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(zr,null),i.a.createElement($e,null,i.a.createElement(ce,null,i.a.createElement(pe,{className:U()(jr.a["cmdn-IdPropertiesPanel-FlexItem-first"],jr.a["cmdn-IdPropertiesPanel-HeightPanel-dimension"],jr.a["cmdn-IdPropertiesPanel-justifyEnd"])},i.a.createElement($e,{title:i.a.createElement(c.b,{id:"newdoc_details_label_ColNumber"}),titleClassName:jr.a["cmdn-IdPropertiesPanel-firstColumnTitle"],onScrubbyValue:this.onScrubbyValuesColumns,logScrubbyValueAnalytics:()=>s.logPresetDetailsInteraction("columns")},i.a.createElement(mn,{id:"cmdn-sidebar-ColumnsPanel",ref:this.columnsInput,className:jr.a["cmdn-IdPropertiesPanel-NumberInput"],value:Z,min:ee,max:te,step:1,fastStepMultiplier:4,userLocaleDecimal:o,defaultValue:ee,onChange:e=>this.updatePreviewableProperty(ae)(e),wide:!0,useSimpleInvalidIndicator:!0,hasArrows:!0,allowSpecialCharacters:!0,logAnalytics:()=>s.logPresetDetailsInteraction("columns"),"aria-label":l.a.formatMessage("newdoc_details_label_ColNumber"),labelId:"newdoc_details_label_ColNumber"}))),i.a.createElement(pe,{className:U()(jr.a["cmdn-IdPropertiesPanel-HeightPanel-dimension"],jr.a["cmdn-IdPropertiesPanel-justifyEnd"])},i.a.createElement($e,{title:i.a.createElement(c.b,{id:"newdoc_details_label_ColGutter"}),titleClassName:jr.a["cmdn-IdPropertiesPanel-firstColumnTitle"],onScrubbyValue:this.onScrubbyValuesColumnGutter,logScrubbyValueAnalytics:()=>s.logPresetDetailsInteraction("column-gutter")},i.a.createElement(Pn,{id:"cmdn-sidebar-ColumnsGutterPanel",ref:this.columnGutterInput,className:jr.a["cmdn-IdPropertiesPanel-NumberInput"],value:ne,min:ie,max:re,step:f,fastStepMultiplier:v,slowStepMultiplier:y,needsSnapToStep:!0,userLocaleDecimal:o,defaultValue:ie,onChange:e=>this.updatePreviewableProperty(se)(e),wide:!0,useSimpleInvalidIndicator:!0,hasArrows:!0,unitsValue:b,unitInfo:E,unitConvertConfig:Ce,logAnalytics:()=>s.logPresetDetailsInteraction("column-gutter"),"aria-label":l.a.formatMessage("newdoc_details_label_ColGutter"),labelId:"newdoc_details_label_ColGutter"}))))),i.a.createElement(zr,null),i.a.createElement($e,{headerId:"cmdn-sidebar-Margins",className:jr.a["cmdn-IdPropertiesPanel-marginsPanel"],title:i.a.createElement(c.b,{id:"newdoc_details_label_Margins"}),titleClassName:jr.a["cmdn-IdPropertiesPanel-marginsPanel-title"],collapsible:!0,open:!!this._collapsibleController&&!this._collapsibleController.marginsCollapsed,onToggle:this.toggleMargins},i.a.createElement(pr,{id:"cmdn-sidebar-Margins",linkButtonTooltip:ye,labelTopLeft:i.a.createElement(c.b,{id:"newdoc_details_label_top"}),labelTopRight:i.a.createElement(c.b,{id:"newdoc_details_label_bottom"}),labelBottomLeft:i.a.createElement(c.b,{id:Pe}),labelBottomRight:i.a.createElement(c.b,{id:Ne}),ariaTopLeft:De,ariaTopRight:ze,ariaBottomLeft:ke,ariaBottomRight:je,lock:V,userLocaleDecimal:o,values:F,unitsValue:b,unitInfo:E,unitConvertConfig:Ce,min:W,max:q,step:f,fastStepMultiplier:v,slowStepMultiplier:y,wideNumberInputs:!0,onUpdate:this.updatePreviewableProperty(G),onLockClick:this.updatePreviewableProperty(H),numberInputClassName:jr.a["cmdn-IdPropertiesPanel-NumberInput"],logNumberInputAnalytics:()=>s.logPresetDetailsInteraction("margin"),logLinkInputsButtonAnalytics:()=>s.logPresetDetailsInteraction("margin-link-inputs")}))),i.a.createElement(zr,null),i.a.createElement($e,{headerId:"cmdn-sidebar-BleedAndSlug",className:U()([jr.a["cmdn-IdPropertiesPanel-bleedAndSlugPanel"],{[jr.a["cmdn-IdPropertiesPanel-bleedAndSlugPanel-japanese"]]:n}]),titleClassName:jr.a["cmdn-IdPropertiesPanel-bleedAndSlugPanel-title"],title:i.a.createElement(c.b,{id:"newdoc_button_customize_id"}),collapsible:!0,open:!!this._collapsibleController&&!this._collapsibleController.bleedAndSlugCollapsed,onToggle:this.toggleBleedAndSlug},i.a.createElement(pr,{id:"cmdn-sidebar-BleedPanel",title:i.a.createElement(c.b,{id:"newdoc_details_label_bleed"}),linkButtonTooltip:ye,panelGroupTitleTooltip:be,labelTopLeft:i.a.createElement(c.b,{id:"newdoc_details_label_top"}),labelTopRight:i.a.createElement(c.b,{id:"newdoc_details_label_bottom"}),labelBottomLeft:i.a.createElement(c.b,{id:Pe}),labelBottomRight:i.a.createElement(c.b,{id:Ne}),ariaTopLeft:Ve,ariaTopRight:Fe,ariaBottomLeft:He,ariaBottomRight:Ue,lock:P,userLocaleDecimal:o,values:O,unitsValue:b,unitInfo:E,unitConvertConfig:Ce,min:R,max:z,step:f,fastStepMultiplier:v,slowStepMultiplier:y,wideNumberInputs:!0,onUpdate:this.updatePreviewableProperty(A),onLockClick:this.updatePreviewableProperty(M),numberInputClassName:jr.a["cmdn-IdPropertiesPanel-NumberInput"],logNumberInputAnalytics:()=>s.logPresetDetailsInteraction("bleed"),logLinkInputsButtonAnalytics:()=>s.logPresetDetailsInteraction("bleed-link-inputs")}),i.a.createElement(pr,{id:"cmdn-sidebar-SlugPanel",title:i.a.createElement(c.b,{id:"newdoc_details_label_slug"}),ariaTopLeft:We,ariaTopRight:qe,ariaBottomLeft:Ke,ariaBottomRight:Je,linkButtonTooltip:ye,panelGroupTitleTooltip:Ee,labelTopLeft:i.a.createElement(c.b,{id:"newdoc_details_label_top"}),labelTopRight:i.a.createElement(c.b,{id:"newdoc_details_label_bottom"}),labelBottomLeft:i.a.createElement(c.b,{id:Pe}),labelBottomRight:i.a.createElement(c.b,{id:Ne}),lock:N,userLocaleDecimal:o,values:C,unitsValue:b,unitInfo:E,unitConvertConfig:Ce,min:D,max:k,step:f,fastStepMultiplier:v,slowStepMultiplier:y,wideNumberInputs:!0,onUpdate:this.updatePreviewableProperty(T),onLockClick:this.updatePreviewableProperty(L),numberInputClassName:jr.a["cmdn-IdPropertiesPanel-NumberInput"],logNumberInputAnalytics:()=>s.logPresetDetailsInteraction("slug"),logLinkInputsButtonAnalytics:()=>s.logPresetDetailsInteraction("slug-link-inputs")})))}get docPresetTooltip(){const{store:e}=this.props,{defaultSettings:t}=e,a=t&&t.dialogToolTips;return a&&a.tipDocPreset}get savePresetButtonTooltip(){const{store:e}=this.props,{defaultSettings:t}=e,a=t&&t.dialogToolTips;return a&&a.tipSavePreset}async onCreate(e){const{store:t}=this.props,{isJapaneseEnabled:a,activeDocumentTemplate:n}=t,i=n;a&&(e?i.updateJpDocType("margin"):i.updateJpDocType("layout"))}render(){const{store:e}=this.props,{previewModeEnabled:t,activeDocumentTemplate:a,isJapaneseEnabled:n,isWindowsOS:r,language:s}=e,{dialogToolTips:o,jpLastDocType:l}=a||{},{layoutGridBtnText:c,marginBtnText:d,previewText:u}=o||{},h=!n&&u&&u.replace(/\s/g,"").replace("&",""),p=r&&"ko-KR"===s;return i.a.createElement(zi,Object.assign({},this.props,{content:this.content,hasSavePreset:!0,savePresetButtonTooltip:this.savePresetButtonTooltip,presetNameField:"title",docPresetTooltip:this.docPresetTooltip,previewModeEnabled:t,previewLabel:h,previewChangeHandler:async()=>{await this.togglePreviewModeFlag(),await this.updatePreviewDoc()},documentNameChangeHandler:this.updatePreviewableProperty(this.updateDocumentName),hasSecondAction:n,highlightSecondAction:"margin"===l,actionLabel:n&&i.a.createElement("span",null,c),secondActionLabel:n&&i.a.createElement("span",null,d),smallActionFont:p,onCreate:this.onCreate}))}}const Vr=Object(ae.n)(Br,{}),Fr=Object(c.f)(Object(X.c)(Object(F.a)(Vr)));class Hr extends n.Component{render(){const{store:e}=this.props,{activeDocumentTemplate:t}=e,a=Object(me.d)(),n=a===Q.a.ILLUSTRATOR,r=a===Q.a.INDESIGN;return t&&t.kind===Ut.a.TEMPLATE?i.a.createElement(Ct,{id:"cmdn-sidebar-TemplateContainer"}):n?i.a.createElement(Mr,{id:"cmdn-sidebar-PropertiesContainer"}):r?i.a.createElement(Fr,{id:"cmdn-sidebar-PropertiesContainer"}):i.a.createElement(nr,{id:"cmdn-sidebar-PropertiesContainer"})}}const Ur=Object(ae.n)(Hr,{}),Gr=Object(X.c)(Object(F.a)(Ur));var Wr=a("Q5XD"),qr=a.n(Wr),$r=a("nguE"),Kr=a.n($r);class Jr extends n.Component{constructor(){super(...arguments),this._textfieldRef=i.a.createRef()}onSearch(e){this.props.onSearch&&this.props.onSearch(this.props.value)}onValueChange(e,t){"function"==typeof this.props.onChange&&this.props.onChange(e,t)}onKeyDown(e){"Enter"===e.key&&this.onSearch(e),"Escape"===e.key&&(Object(me.f)()?this._textfieldRef.current&&this._textfieldRef.current.inputContainer.blur():this._textfieldRef.current&&this._textfieldRef.current.blur())}render(){const{quiet:e,placeholder:t,label:a,value:n,disableNativeControls:r}=this.props,s=Object(me.d)()===Q.a.ILLUSTRATOR,o=qr.a,c=Object(me.g)()&&s,d=U()(Kr.a["cmdn-SearchField"],{[Kr.a["cmdn-SearchField-AsSpan"]]:r},{[Kr.a["cmdn-SearchField-AsSpan-wPlaceholder"]]:r&&!n}),u=U()(Kr.a["cmdn-SearchField"],{[Kr.a["cmdn-SearchField-font-size-editable"]]:c});return i.a.createElement(ce,{className:Kr.a["cmdn-SearchContainer"]},i.a.createElement(o,{size:"S",id:"cmdn-stock-icon"}),r?i.a.createElement("span",{className:d},n||t):i.a.createElement(en.a,{id:"cmdn-stock-input",ref:this._textfieldRef,className:u,defaultpreventedkeys:["Escape"],quiet:e,value:n,onKeyDown:e=>this.onKeyDown(e),onChange:(e,t)=>this.onValueChange(e,t),placeholder:t}),i.a.createElement(ie.a,{id:"cmdn-stock-button",className:Kr.a["cmdn-SearchAction"],onClick:e=>this.onSearch(e),"aria-label":l.a.formatMessage("accessibility_aria_label_go_button")},i.a.createElement("span",null,a)))}}var Xr=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},Yr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Qr=class extends n.Component{constructor(){super(...arguments),this.searchValue=""}async onSearch(){const{activeView:e,analytics:t,searchBoxText:a}=this.props.store,n={actionURL:await _t.b.openStockLink(Y.a.id,e,a,t),activeFilter:e,searchBoxText:a};t.logFNFTActionClickedEvent("stock-search",n)}render(){const{intl:e}=this.props,t=this.props.store.isWarningOverlayVisible;return i.a.createElement("div",{className:U()({[Li.a.hidden]:t})},i.a.createElement(Jr,{label:e.formatMessage({id:"go"}),quiet:!0,value:this.props.store.searchBoxText,onChange:e=>{this.props.store.searchBoxText=e},onSearch:()=>this.onSearch(),placeholder:e.formatMessage({id:"adobe_stock_find_more"}),disableNativeControls:this.props.store.disableNativeSearchBox}))}};Xr([ae.x,Yr("design:type",Object)],Qr.prototype,"searchValue",void 0),Qr=Xr([F.a],Qr);var Zr=Object(c.f)(Object(X.c)(Qr)),es=a("7cBP"),ts=a.n(es),as=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};let ns=class extends n.Component{render(){const{children:e,store:t,...a}=this.props,{activeModalView:n,isStockEnabled:r}=t,s=U()(ts.a["cmdn-MainViewContainer"],{[ts.a["cmdn-MainViewContainer--noOverflow"]]:n,[ts.a["cmdn-MainViewContainer--withSearch"]]:r});return i.a.createElement("div",Object.assign({className:ts.a["cmdn-MainViewWrapper"]},a),i.a.createElement("div",{className:U()([ts.a["cmdn-MainViewContent"]],{[ts.a["cmdn-MainViewContent-stockEnabled"]]:r}),ref:e=>this.props.store.boundariesElement=e},i.a.createElement("div",{className:s},e)),i.a.createElement("div",{className:ts.a["cmdn-MainViewSidebar"]},i.a.createElement(Gr,null)),i.a.createElement(La,{featureFlags:[Ma.b.STOCK]},i.a.createElement(Zr,null)))}};ns=as([F.a],ns);var is=a("wWOq"),rs=a.n(is),ss=a("eD7O"),os=a.n(ss),ls=a("8bOP"),cs=a.n(ls);var ds=a("kGiI"),us=a.n(ds);class hs extends n.Component{constructor(e){super(e),this.state={open:!!this.props.open}}close(){this.setState({open:!1}),this.props.onClose&&this.props.onClose()}render(){var e;if(!this.state.open)return null;const{title:t,children:a}=this.props,n=i.a.isValidElement(t)?l.a.formatMessageWithPlaceholders("accessibility_aria_label_banner_close_button",[{placeholder:"{BANNER_TITLE}",value:null===(e=t.props)||void 0===e?void 0:e.id}]):void 0;return i.a.createElement("div",{className:us.a["cmdn-MessageCard"],id:"cmdn-MessageCard"},i.a.createElement("div",{className:us.a["cmdn-MessageCard-Header"]},i.a.createElement(ie.a,{id:"cmdn-MessageCard-Close",className:us.a["cmdn-MessageCard-Close"],icon:i.a.createElement(os.a,{size:"S"}),quiet:!0,variant:"action",onClick:()=>this.close(),"aria-label":n})),i.a.createElement("div",{className:us.a["cmdn-MessageCard-Wrapper"]},i.a.createElement(cs.a,{className:us.a["cmdn-MessageCard-Title"],variant:"pageTitle"},t),i.a.createElement("div",{className:us.a["cmdn-MessageCard-Content"]},a)))}}class ps extends n.Component{constructor(e){super(e),this.handleAnchorKeyDown=this.handleAnchorKeyDown.bind(this)}handleAnchorClick(e){if(e.target&&"a"===e.target.nodeName.toLowerCase()&&e.target.hasAttribute("href")&&e.target.getAttribute("href").startsWith("#category=")){const t=parseInt(e.target.getAttribute("href").replace("#category=",""));t>=0&&Cs[t]&&(e.preventDefault(),e.stopPropagation(),this.props.onViewChange&&this.props.onViewChange(Cs[t]))}}handleAnchorKeyDown(e){" "!==e.key&&"Enter"!==e.key||this.handleAnchorClick(e)}render(){const{content:e,...t}=this.props,a=be()(e).replace(/<a(?![^>]*\brole=)/g,'<a role="link"');return i.a.createElement(hs,Object.assign({},t),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:a},onClick:e=>this.handleAnchorClick(e),onKeyDown:this.handleAnchorKeyDown}))}}var ms=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};let gs=class extends n.Component{componentDidMount(){const{store:e}=this.props;e.activeDocumentTemplate||e.setDefaultActiveDocumentTemplate()}get hasTemplates(){const{store:e,viewId:t}=this.props,a=e.getTemplatesByCategoryType(t);return a&&a.length>0}get recentsWelcome(){const e=this.hasTemplates?"newdoc_welcome_banner_content_recent_templates":"newdoc_welcome_banner_content_recent_no_templates";return i.a.createElement(ps,{title:i.a.createElement(c.b,{id:"newdoc_welcome_banner_recent_title"}),onClose:()=>this.props.store.closeRecentsWelcome(),onViewChange:e=>(this.props.store.activeView=e,this.props.store.forceFocus=!0),content:this.props.intl.formatMessage({id:e}),open:!0})}render(){const{store:e,viewId:t,splitView:a,defaultPresetsCount:n,defaultTabTitleId:r}=this.props,s=e.getPresetsByCategoryType(t),o=!this.hasTemplates&&s.length===n&&!!r,l=o?r:"newdoc_your_recent_items";return i.a.createElement(i.a.Fragment,null,e.shouldShowRecentsBanner&&this.recentsWelcome,!a&&i.a.createElement(Oa,{id:"cmdn-grid-mixed",collapsible:!1,containerSize:e.containerSize,elements:s,onItemDoubleClick:t=>{t.kind===Ut.a.TEMPLATE?Object(Et.j)(e,t):Object(Et.i)(e)},onItemSelected:t=>Object(Et.g)(e,t),selectedItem:e.activeDocumentTemplate,store:this.props.store,tallCards:!0,title:l,onlyTitle:o,forceFocus:e.forceFocus}),a&&i.a.createElement(Na,Object.assign({},this.props)))}};gs=ms([F.a],gs);var fs=Object(c.f)(gs,{withRef:!0}),vs=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};let ys=class extends n.Component{componentDidMount(){const{store:e}=this.props;e.activeDocumentTemplate||this.props.store.setDefaultActiveDocumentTemplate()}get hasTemplates(){const{store:e,viewId:t}=this.props,a=e.getTemplatesByCategoryType(t);return!!(a&&a.length>0)}get savedWelcome(){const e=this.hasTemplates?"newdoc_welcome_banner_content_saved_templates":"newdoc_welcome_banner_content_saved_no_templates";return i.a.createElement(ps,{title:i.a.createElement(c.b,{id:"newdoc_welcome_banner_saved_title"}),onClose:()=>this.props.store.closeSavedWelcome(),onViewChange:e=>(this.props.store.activeView=e,this.props.store.forceFocus=!0),content:this.props.intl.formatMessage({id:e}),open:!0})}render(){const{store:e}=this.props,t=e.activeView,a=e.getPresetsByCategoryType(t),n=e.getTemplatesByCategoryType(t),r=!!(n&&n.length>0),s=!!(a&&a.length>0),o=Y.a.userQuota>0;return i.a.createElement(i.a.Fragment,null,e.shouldShowSavedBanner&&!s&&!r&&this.savedWelcome,s&&i.a.createElement(Oa,{id:"cmdn-grid-presets",collapsed:!1,collapsible:r,containerSize:e.containerSize,deletableItems:!0,elements:a,onItemDeleted:t=>Object(Et.h)(e,t),onItemDoubleClick:t=>Object(Et.i)(e),onItemSelected:t=>Object(Et.g)(e,t),selectedItem:e.activeDocumentTemplate,jumpToNextGrid:()=>Object(Et.f)(e,t),store:this.props.store,tallCards:!1,title:"newdoc_saved_blank_documents",forceFocus:e.forceFocus}),r&&o&&i.a.createElement(Oa,{id:"cmdn-grid-templates",collapsible:!1,containerSize:e.containerSize,elements:n,onItemDoubleClick:t=>Object(Et.j)(e,t),onItemSelected:t=>Object(Et.g)(e,t),jumpToPreviousGrid:()=>Object(Et.d)(e,t),selectedItem:e.activeDocumentTemplate,store:this.props.store,tallCards:!0,title:"listview_template_tab_label",forceFocus:e.forceFocus}))}};ys=vs([F.a],ys);var bs=Object(c.f)(ys,{withRef:!0});const Es={[xa.a.PHXS]:[Z.default.RECENT,Z.default.SAVED,Z.default.PHOTO,Z.default.PRINT,Z.default.ART,Z.default.WEB,Z.default.MOBILE,Z.default.FILM],[xa.a.ILST]:[Z.default.RECENT,Z.default.SAVED,Z.default.MOBILE,Z.default.WEB,Z.default.PRINT,Z.default.BRANDING,Z.default.SOCIAL,Z.default.ART,Z.default.FILM,Z.default.TEMPLATES],[xa.a.IDSN]:[Z.default.RECENT,Z.default.SAVED,Z.default.PRINT,Z.default.WEB,Z.default.MOBILE]};var _s=a("F2DJ"),ws=a.n(_s),Is=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};let xs=class extends n.Component{componentDidMount(){const{store:e}=this.props;e.activeDocumentTemplate||this.props.store.setDefaultActiveDocumentTemplate()}getJumpNextGrid(e,t){if(e===t-1)return;const{store:a}=this.props;Object(Et.c)(a,e+1)}getJumpPreviousGrid(e){if(0===e)return;const{store:t}=this.props;Object(Et.e)(t,e-1)}render(){var e;const{store:t}=this.props,a=null===(e=t.templateCollections)||void 0===e?void 0:e.filter(e=>!e.tabs||e.tabs.includes(Z.default.FREE));return i.a.createElement(i.a.Fragment,null,(null==a?void 0:a.length)?a.map((e,n)=>{var r,s,o,l;return i.a.createElement(Oa,{key:n,id:"cmdn-grid-templates-"+n,collapsed:null===(r=t.gridViewConfig)||void 0===r?void 0:r.collapsibleFreeTemplates,collapsible:null===(s=t.gridViewConfig)||void 0===s?void 0:s.collapsibleFreeTemplates,collapseToggleTop:null===(o=t.gridViewConfig)||void 0===o?void 0:o.collapseToggleTop,collapsedRowsNo:null===(l=t.gridViewConfig)||void 0===l?void 0:l.collapsedRowsNo,containerSize:t.containerSize,elements:e.files,onItemDoubleClick:e=>Object(Et.j)(t,e),onItemSelected:e=>Object(Et.g)(t,e),selectedItem:t.activeDocumentTemplate,jumpToNextGrid:()=>this.getJumpNextGrid(n,a.length),jumpToPreviousGrid:()=>this.getJumpPreviousGrid(n),store:this.props.store,tallCards:!0,title:e.title,titleIsAlreadyTranslated:!0,forceFocus:t.forceFocus,limit:this.props.numberOfTemplatesLimit})}):i.a.createElement("div",{className:ws.a.statusContainer},i.a.createElement("div",{className:ws.a.statusTitle},i.a.createElement(c.b,{id:t._failedTemplateCollectionsFetching?"templates_fetch_error":"templates_fetch_loading"})),!t._failedTemplateCollectionsFetching&&i.a.createElement(_e.a,{size:"L"})),i.a.createElement(Rt,null))}};xs=Is([F.a],xs);var Ss=Object(c.f)(xs,{withRef:!0}),Os={items:{[Z.default.RECENT]:{label:"newdoc_filter_recent",icon:{icon:rs.a,size:"S"},splitView:Object(vn.e)(Y.a.id),defaultTabTitleId:vn.b[Y.a.id],defaultPresetsCount:vn.a[Y.a.id],component:fs},[Z.default.SAVED]:{label:"newdoc_filter_saved",component:bs},[Z.default.PHOTO]:{label:"newdoc_filter_photo",searchTemplatesBy:"photo"},[Z.default.PRINT]:{label:"newdoc_filter_print",searchTemplatesBy:"photo"},[Z.default.ART]:{label:"newdoc_filter_art"},[Z.default.WEB]:{label:"newdoc_filter_web"},[Z.default.MOBILE]:{label:"newdoc_filter_mobile",searchTemplatesBy:"mobile"},[Z.default.FILM]:{label:"newdoc_filter_film",searchTemplatesBy:"video"},[Z.default.SOCIAL]:{label:"newdoc_filter_social",searchTemplatesBy:"social"},[Z.default.BRANDING]:{label:"newdoc_filter_branding",searchTemplatesBy:"branding"},[Z.default.TEMPLATES]:{label:"newdoc_filter_templates",component:Ss,skipRender:e=>!e}}};const Cs=Es[Y.a.id]?Es[Y.a.id]:Es[xa.a.PHXS];class Ps extends n.Component{constructor(e){super(e),e.root&&e.intl&&e.root.open&&(e.root.title=e.intl.formatMessage({id:"ccx_fnft_dialog_name"})),this.onKeyDown=this.onKeyDown.bind(this),this.onClick=this.onClick.bind(this)}focusContent(){const{store:e}=this.props;e.forceFocus=!0}defocusContent(){const{store:e}=this.props;e.forceFocus=!1}onKeyDown(e){switch(e.key){case"Enter":this.focusContent();break;case"ArrowLeft":case"ArrowRight":this.defocusContent()}}onClick(e){this.focusContent()}getViewIcon(e){if(e&&e.icon){const{icon:t,...a}=e.icon,n=t;return i.a.createElement(n,Object.assign({},a))}return null}render(){const{selectedView:e,onSelect:t,className:a,intl:n,shouldDisplayTemplatesTab:r}=this.props,{formatMessage:s}=n,o=Cs.indexOf((e!==Z.default.TEMPLATES||r)&&e||Z.default.RECENT),l=Cs.filter(e=>{var t;if(!Object.prototype.hasOwnProperty.call(Os.items,e))return!1;if(e===Z.default.TEMPLATES&&!r)return!1;const a=Os.items[e];return!(null===(t=null==a?void 0:a.skipRender)||void 0===t?void 0:t.call(a,r))});return i.a.createElement(Vt.TabView,{className:a,onSelect:e=>t&&t(l[e]),selectedIndex:o},l.map((e,t)=>{const a=Os.items[e],{searchTemplatesBy:n,label:r,icon:o,component:c,splitView:d,defaultTabTitleId:u,defaultPresetsCount:h,data:p,...m}=a,g=c,f=Object(X.c)(g||Na),v=Object(X.c)(ns);return i.a.createElement(Vt.Tab,Object.assign({key:"tab_"+e,"data-qe-id":e,label:s({id:r}),icon:this.getViewIcon(a),onKeyDown:this.onKeyDown,onClick:this.onClick,onDoubleClick:this.onClick,"aria-posinset":t+1,"aria-setsize":l.length},m),i.a.createElement(v,null,i.a.createElement(f,Object.assign({viewId:e,splitView:d,defaultTabTitleId:u,defaultPresetsCount:h},p,{analytics:this.props.analytics}))))}))}}var Ns=Object(c.f)(Object(X.c)(Ps));class As extends n.Component{render(){const{store:e,className:t,root:a}=this.props;return i.a.createElement(Ns,{root:a,className:t,selectedView:e.activeView,shouldDisplayTemplatesTab:e.shouldDisplayTemplatesTab,onSelect:t=>e.activeView=t,analytics:e.analytics})}}const Ts=Object(ae.n)(As,{}),Ms=Object(X.c)(Object(F.a)(Ts));var Ls=a("tU+Q"),Rs=a.n(Ls),Ds=(a("5NxA"),a("COfk"),a("ajpD"),a("+Aem"),a("io8T")),zs=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},ks=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};W.a.useDefaults({defaultLevel:W.a.WARN,formatter:(e,t)=>{t.name&&e.unshift(`[${t.name}]`),e.unshift("[CMDN]"),e.unshift((new Date).toUTCString())}});let js=class extends n.Component{constructor(e){super(e),this.handleOnlineStatusChange=e=>{Y.a.isOnline="online"===e.type},this.windowResizeHandler=this.windowResizeHandler.bind(this),this.resizeHandlerRef=$()(this.windowResizeHandler,60),this.store=new X.a(this.props.userInfo,this.props.onClose),this.store.containerSize=this.getContainerSize(this.props.root),this.router=i.a.createRef(),this.onShow=Object(te.c)(this.onShow,te.a.CMDN_REFRESHING,te.b.ENFORCE_LOCK,60)}componentDidMount(){window.addEventListener("resize",this.resizeHandlerRef),document.addEventListener("online",this.handleOnlineStatusChange),document.addEventListener("offline",this.handleOnlineStatusChange)}componentWillUnmount(){window.removeEventListener("resize",this.resizeHandlerRef),Ds.d.removeAllListeners(),document.removeEventListener("online",this.handleOnlineStatusChange),document.removeEventListener("offline",this.handleOnlineStatusChange)}afterCloseApp(e){this.store.afterCloseApp(e),this.router.current&&this.router.current.history.replace("/")}windowResizeHandler(){const{containerSize:e}=this.store,t=this.getContainerSize(this.props.root);t.width===e.width&&t.height===e.height||(this.store.containerSize=t)}getContainerSize(e){return{width:e?e.offsetWidth:document.documentElement.clientWidth,height:e?e.offsetHeight:document.documentElement.clientHeight}}async beforeShow(e){this.store.resetUIState(e),e&&this.store.analytics.logFNFTActionClickedEvent("tab-selected",{activeFilter:e.view,subcategory:"HOME_SCREEN"}),this.router.current&&this.router.current.history.replace("/")}async onShow(e=!0,t=!1){ee.b.track(ee.a.LoadTime),ee.b.track(ee.a.DataTime),this.store.isInit=!1,Ds.d.initializeCCLibraries(this.store.analytics),e&&(ee.b.track(ee.a.HostData),await this.store.updateDefaultSettings(),ee.b.measure(ee.a.HostData),ee.b.track(ee.a.i18nJSON),ee.b.measure(ee.a.i18nJSON),ee.b.track(ee.a.HostPresetData),await this.store.updatePresetsAndTemplates(Z.default.ALL,!0,t),ee.b.measure(ee.a.HostPresetData),ee.b.track(ee.a.IngestConfig),ee.b.measure(ee.a.IngestConfig)),requestAnimationFrame(()=>{this.store.setDefaultActiveDocumentTemplate(),this.store.disableNativeSearchBox=!!this.store.activeModalView,this.store.isDialogVisible=!0}),this.store.analytics.logItemOpenedEvent({eventAction:"render",openType:"new",fileType:"",sectionView:"createNew",ucAction:"fnft",activeFilter:this.store.activeView}),this.store.openWelcomeBanner(),ee.b.setMeasurement(ee.a.RiotMountApp,0),this.store.isStockEnabled||(ee.b.measure(ee.a.DataTime),ee.b.measure(ee.a.LoadTime),Y.a.reportPerformance(ee.b.uniqueMeasurements),ee.b.clearMeasurements())}render(){if(this.store.ready){const{root:e}=this.props,t=()=>e||void 0,a=Y.a.name===Q.a.ILLUSTRATOR;return i.a.createElement(X.b.Provider,{value:this.store},i.a.createElement(Ta,{values:this.store.featureFlags},i.a.createElement(J.a,{theme:this.store.theme,productId:Y.a.name===Q.a.PHOTOSHOP||Y.a.name===Q.a.ILLUSTRATOR?Y.a.id:void 0,boundariesElement:t,className:U()(Rs.a["cmdn-AppContainer"],U()(Rs.a["theme-"+this.store.theme]))},i.a.createElement(c.d,{textComponent:i.a.Fragment,locale:this.store.language,messages:this.store.languageStrings},i.a.createElement(A,{ref:this.router},i.a.createElement(R,{path:"/",exact:!0,render:()=>i.a.createElement(Ms,{root:e,className:U()(Rs.a["cmdn-AppNavigation"],{[Rs.a["cmdn-AppNavigation--truncatedText"]]:a})})}),i.a.createElement(R,{path:"/template-preview",component:Bt}))))))}return null}};js=zs([F.a,ks("design:paramtypes",[Object])],js);var Bs=js;let Vs;ee.b.markStart=performance.now();const Fs=n.createRef();var Hs;!function(e){e.NONE="none",e.BOTH="both",e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(Hs||(Hs={}));const Us={resize:Hs.BOTH,size:{width:1080,height:690},minSize:{width:900,height:500}};function Gs(e){Fs.current&&Fs.current.afterCloseApp(e.target.returnValue||wt.a.CLOSE)}function Ws(e){Vs=document.createElement("dialog"),Vs.id="cmdn-dialog",Vs.addEventListener("close",Gs),document.body.appendChild(Vs),r.render(n.createElement(Bs,{root:Vs,ref:Fs,onClose:e=>{Vs.close(e)},userInfo:Object(o.f)(e)&&Object(o.e)(e)}),Vs)}async function qs(e){void 0===Vs&&Ws(e)}async function $s(e,t){if(ee.b.track(ee.a.InteractiveTime),Vs)Fs.current&&await Fs.current.beforeShow(t);else{Ws();const e=Fs&&Fs.current&&Fs.current.store;if(e){const t=l.a.getLanguage(Y.a.language),a=await e.getLanguageStrings(t);l.a.setLocaleAndStrings(t,a)}}const a=!!t;if(Fs.current&&Fs.current.onShow(!0,a),Vs.showModal({...Us,title:l.a.formatMessage("ccx_fnft_dialog_name")}),ee.b.measure(ee.a.InteractiveTime),window.e2eTestMode){const e=window;let t;const a=ee.b.getLatestMeasurement(ee.a.InteractiveTime);if(-1!==a){if(e.startupData){const n=e.startupData.avg,i=e.startupData.count;t={avg:(n*i+a)/(i+1),count:i+1}}else t={avg:a,count:1};e.startupData=t}}}},"78VC":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=function(e){return function(t){return function(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];return a.forEach((function(a){return e.bind(a).toService(t)}))}}}},"8jRI":function(e,t,a){"use strict";var n=new RegExp("(%[a-f0-9]{2})|([^%]+?)","gi"),i=new RegExp("(%[a-f0-9]{2})+","gi");function r(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var a=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],r(a),r(n))}function s(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(n)||[],a=1;a<t.length;a++)t=(e=r(t,a).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},a=i.exec(e);a;){try{t[a[0]]=decodeURIComponent(a[0])}catch(e){var n=s(a[0]);n!==a[0]&&(t[a[0]]=n)}a=i.exec(e)}t["%C2"]="";for(var r=Object.keys(t),o=0;o<r.length;o++){var l=r[o];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},"8s79":function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));a("QLQ8");var n=a("/Z0y"),i=a("fEyC"),r=a("ZTwm"),s=a("1BVQ"),o=a("lWS7"),l=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};const c=[e=>{e.createObjectStore("libraries",{keyPath:"id"})}];function d(e){return function(t,a,n){const i=n.value;n.value=async function(...t){return await this.connect(),this.supported?i.apply(this,t):(o.a.info(`IndexedDB not supported. Cannot complete ${a} request`),e)}}}class u{constructor(e){this._databaseName=e}get supported(){if(void 0!==this._supported)return this._supported;"undefined"!=typeof window&&window.indexedDB||(this._supported=!1);try{const e=window.indexedDB.open("cclibs_indexeddb_test",1);e.onsuccess=()=>e.result.close(),this._supported=!0}catch(e){this._supported=!1}return this._supported||o.a.info("IndexedDB not supported."),this._supported}connect(){if(this._database||!this.supported)return Promise.resolve(this);const e=window.indexedDB.open(this._databaseName,c.length);return new Promise((t,a)=>{e.onerror=()=>{a(new s.b("CONNECTION_FAILED","Unable to connect to IndexedDB database"))},e.onupgradeneeded=t=>{this._database=e.result,this._createSchema(t.oldVersion)},e.onsuccess=()=>{this._database=e.result,t(this)}})}get(e){return this.transaction("readonly",t=>new Promise(a=>{const n=t.get(e);n.onsuccess=()=>{a(n.result)}}))}getAll(){return this.transaction("readonly",e=>new Promise(t=>{const a=e.getAll();a.onsuccess=()=>t(a.result)}))}async set(...e){await this.transaction("readwrite",t=>{e.forEach(e=>t.put(e))})}async delete(e){await this.transaction("readwrite",t=>{t.delete(e)})}async deleteAll(){await this.transaction("readwrite",e=>{e.clear()})}_createSchema(e){c.slice(e).forEach(e=>e(this._database))}transaction(e,t){return new Promise((a,n)=>{var i;const r=null===(i=this._database)||void 0===i?void 0:i.transaction("libraries",e),s=r.objectStore("libraries"),o=t(s);r.onerror=()=>{n(r.error)},r.oncomplete=()=>{a(o||void 0)}})}}l([d()],u.prototype,"get",null),l([d([])],u.prototype,"getAll",null),l([d()],u.prototype,"set",null),l([d()],u.prototype,"delete",null),l([d()],u.prototype,"deleteAll",null);var h=a("lpQH"),p=a("+qR3");var m=a("FpIF"),g=function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s};class f{constructor(e,t,a){this._fs=e,this._path=t,this._getData=a}get supported(){return!0}connect(){return Promise.resolve(this)}get(e){return Promise.reject("not implemented")}async getAll(){try{const e=await this._fs.readFile(this._path,{encoding:"utf8"});if("string"!=typeof e)throw new Error("expected a string, got something else: "+typeof e);return JSON.parse(e)}catch(e){return o.a.warn("Unable to read cache file: "+e),[]}}set(...e){return this._debouncedWriteFile()}delete(e){return this._debouncedWriteFile()}deleteAll(){return this._debouncedWriteFile()}async _debouncedWriteFile(){return this._writeFile()}async _writeFile(){try{const e=JSON.stringify(this._getData());await this._fs.writeFile(this._path,e,{encoding:"utf8"})}catch(e){o.a.warn("Unable to write cache file: "+e)}}}g([Object(m.a)(1e3)],f.prototype,"_debouncedWriteFile",null);class v extends h.a{constructor(e,t){var a;super(e,(a=t,class extends a{update(e,t=!0){var a;const n=super.update(e,t);return null===(a=this._modelCache)||void 0===a||a.persistUpdate(n),n}})),this.waitForHydrate()}async init(e,t=!0,a){this.db||(this.db=new u(e),!this.db.supported&&a&&await this._createFileSystemCache(e,a),t&&this.hydrate())}async _createFileSystemCache(e,t){const{fs:a,dir:n}=t;let i=!1;try{await a.lstat(n)&&(i=!0)}catch(e){}if(!i)try{await a.mkdir(n,{recursive:!0}),i=!0}catch(e){o.a.warn("Unable to create cache directory: "+e)}if(!i)return;const r=n+e;this.db=new f(a,r,()=>this.all().map(e=>e.data))}async hydrate(){var e;if(this.db){if(this.db.supported){const e=await this.db.getAll();e.length&&!this.length&&(o.a.info(`Loaded ${e.length} libraries from local cache.`),this._bookmarkMigration(e),super._replace(...e))}null===(e=this._resolveWaitForCacheRestore)||void 0===e||e.call(this),this.emit("hydrate")}}waitForHydrate(){return this._cacheRestorePromise||(this._cacheRestorePromise=new Promise(e=>{this._resolveWaitForCacheRestore=e})),this._cacheRestorePromise}persistUpdate(e){var t;(null===(t=this.db)||void 0===t?void 0:t.supported)&&(o.a.info(`Library ${e.id} updated. Updating database entry`),this.driver.addWatchedLibrary(e),this.db.set(e))}_add(e,t=!1){var a;const n=super._add(e,t);return(null===(a=this.db)||void 0===a?void 0:a.supported)&&!Object(p.d)(n.id)&&(o.a.info(`New library ${e.id} found. Adding database entry`),this.driver.addWatchedLibrary(n.data),this.db.set(e)),n}_remove(e){var t;const a="string"==typeof e?this.get(e):e;if(super._remove(e),null===(t=this.db)||void 0===t?void 0:t.supported){const t="string"==typeof e?e:e.id;a&&this.driver.removeWatchedLibrary(a.data),o.a.info(`Library ${t} deleted. Deleting database entry`),this.db.delete(t)}}_replace(...e){var t;super._replace(...e),(null===(t=this.db)||void 0===t?void 0:t.supported)&&(o.a.info(`Replacing Stored Libraries with new ${e.length} libraries`),this.db.deleteAll(),this.db.set(...this.all().map(e=>e.data)))}_bookmarkMigration(e){e.map(e=>{(function(e){return e.ownership&&e.details})(e)&&"public"===e.ownership&&e.bookmark&&e.bookmark.id!==e.id&&(e.id=e.bookmark.id)})}}var y=a("ttwd"),b=a("jVml"),E=a("loW4");a("swlI");class _ extends E.a{constructor(e,t){super(),this._driver=e,this._orchestrator=t,this._state="ok",this._syncErrors=new Map,this._progress=100,this._transientProgress=[],this._externalLinkDownloadProgress={},this._handleLocalUpdate=this._handleUpdate.bind(this,"local"),this._handleRemoteUpdate=this._handleUpdate.bind(this,"remote")}init(){this._driver.setSyncStateListener(this._handleRemoteUpdate),this._orchestrator.on("syncChange",this._handleLocalUpdate),this._orchestrator.on("change",this._handleLocalUpdate)}halt(){this._driver.removeSyncStateListener(),this._orchestrator.off("syncChange",this._handleLocalUpdate),this._orchestrator.off("change",this._handleLocalUpdate)}get status(){return this._state}get primaryError(){return this._primaryError}get transientProgress(){var e;return null!==(e=this._transientProgress)&&void 0!==e?e:[]}get progress(){return this._progress}get errors(){return[...this._syncErrors.values()].map(e=>e.error)}get errorMap(){return this._syncErrors}get commitError(){return this._commitError}get externalLinkDownloadProgress(){return this._externalLinkDownloadProgress}getExternalLinkDownloadProgressByKey(e){return this._externalLinkDownloadProgress[e]}sync(){this._orchestrator.doOperations()}changeDriver(e){this._driver.removeSyncStateListener(),this._driver=e,this._driver.setSyncStateListener(this._handleRemoteUpdate)}_update(){const e=this._serialize();this._lastUpdate!==e&&(this._lastUpdate=e,o.a.info("SYNC STATUS UPDATE: "+this._lastUpdate),this.emit("change"))}_handleUpdate(e,t={}){var a,n,i,r,s,o,l;"local"===e?this._resolveLocalErrors(null===(a=t.details)||void 0===a?void 0:a.resolvedErrors):this._resolveRemoteErrors(null===(n=t.details)||void 0===n?void 0:n.errors),this._setErrors(null===(i=t.details)||void 0===i?void 0:i.errors,e),this._setPrimaryError(),this._setCommitError(t.commitError,e),this._setProgress(null===(r=t.details)||void 0===r?void 0:r.progress,null===(s=t.details)||void 0===s?void 0:s.operations,e),this._setState(t.state,e),this._setTransientProgress(null===(o=t.details)||void 0===o?void 0:o.newLibraryProgress,e),this._setExternalLinkDownloadProgress(null===(l=t.details)||void 0===l?void 0:l.externalLinkProgress,e),this._update()}_setState(e,t="local"){if(e&&"remote"==t)return void(this._state=e);if(this._driver.ignoreLocalSyncEvents())return;const a="object"==typeof window&&!window.navigator.onLine;this.errors.length||this.commitError||a?this._state="error":this._orchestrator.all().some(e=>!e.isDeletedLocally&&e.syncState)?this._state="syncing":this._state=null!=e?e:"ok"}_setPrimaryError(){this._primaryError=this.errors.reduce((e,t)=>!e||s.a.indexOf(t.code)>s.a.indexOf(e.code)?t:e,void 0)}_setCommitError(e,t="local"){"remote"===t&&(this._commitError=e?new s.b(e):void 0)}_resolveLocalErrors(e={}){Object.keys(e).forEach(e=>{const t=this._syncErrors.get(e);t&&"local"===t.source&&this._syncErrors.delete(e)})}_resolveRemoteErrors(e={}){this._syncErrors.forEach(({source:t},a)=>{"remote"!==t||e[a]||this._syncErrors.delete(a)})}_setErrors(e,t="local"){e&&Object.entries(e).forEach(([e,a])=>{const n=this._syncErrors.get(e);if("local"===(null==n?void 0:n.source)&&"remote"===t)return;const i=this._orchestrator.get(e);i&&(i.syncStatus={syncState:void 0}),this._syncErrors.set(e,{error:new s.b(a),source:t})})}_setProgress(e=100,t,a="local"){this._orchestrator.all().filter(e=>!e.isDeletedLocally).map(e=>("remote"===a&&e.syncProgress&&(e.syncStatus={syncState:void 0}),e)).map(e=>{const a=null==t?void 0:t[e.id];a&&(a.type="unknown"===a.type?void 0:a.type,e.syncStatus={syncState:a.type,syncProgress:a.progress})}),"remote"===a&&(this._progress=e)}_setTransientProgress(e,t="local"){"remote"===t&&(this._transientProgress=e)}_setExternalLinkDownloadProgress(e,t="local"){"remote"===t&&(this._externalLinkDownloadProgress=null!=e?e:{})}_serialize(){const{status:e,progress:t,commitError:a,primaryError:n,errors:i,transientProgress:r,externalLinkDownloadProgress:s}=this;return JSON.stringify({status:e,progress:t,commitError:a,primaryError:n,errors:i,transientProgress:r,externalLinkDownloadProgress:s})}}var w=a("yROt"),I=a("sGTX"),x=a("3mQf"),S=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,a=e[Symbol.asyncIterator];return a?a.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=e[a]&&function(t){return new Promise((function(n,i){(function(e,t,a,n){Promise.resolve(n).then((function(t){e({value:t,done:a})}),t)})(n,i,(t=e[a](t)).done,t.value)}))}}};class O extends v{constructor(e,t,a={}){super(e,i.a),this._driver=t,this._options=a,this._isPaused=!1,this._initialLibrariesLoaded=!1,this._isLoaded=!1,this._isLoading=!0,this._quietPeriodDuration=b.n,this._libraryPullLockCount=0,this._libraryRequestRetryMap=new Map,this._lockedLibraryPullCallbacks=[],this._isSyncGroupChangeInProgress=!1,this._hasUnhandledSyncGroupNotification=!1,this._loadedLibraryLists=new Map,this._inFlightOperations={},this._halt=()=>{this._isLoaded=!1,this._isLoading=!0,this._initialLibrariesLoaded=!1,this._driver.removeLibraryChangeListener(),this._driver.removeFontDataChangeListeners(),this.syncStatus.halt(),this.syncStatus.DANGEROUS.removeAllListeners(),this._driver.removeLibrariesSyncGroupListener(),this._driver.off("localChange",this._setLocalLibraryChangeListener),this.isPaused&&this._setDriverConnectionListeners("off")},this._handleLibraryChange=(e,t)=>{this.emit("syncChange",{state:"syncing"}),e.forEach(e=>{var a;const n=this.getByIndex(t||"id",e),i=t=>{t.then(()=>this.emit("syncChange",{details:{resolvedErrors:{[e]:{code:"REQUEST_FAILED"}}}})).catch(t=>this.emit("syncChange",{state:"error",details:{errors:{[e]:{code:"REQUEST_FAILED",message:"Failed to fetch library",libraryId:e,underlyingError:t}}}}))},r=null!==(a=null==n?void 0:n.load(void 0,"notification"))&&void 0!==a?a:(()=>{if(!(this._libraryPullLockCount>0))return this._driver.getLibraryById(e,{optimisticFetch:!1}).then(e=>this.upsert(e));this._lockedLibraryPullCallbacks.push(()=>i(this.lockedNewLibraryUpdate(e)))})();r&&i(r)})},this._handleRenditionChange=async e=>{var t;if(!e.elementRef)return;const{libraryId:a,elementId:n}=Object(w.a)(e.elementRef)||{};if(!a||!n)return;const i=this.get(a);if(!(null==i?void 0:i.locallyManaged))return;const r=[...null!==(t=i.data.elements)&&void 0!==t?t:[]],s=null==r?void 0:r.findIndex(e=>e.id===n);s>-1?r[s]=e:r.push(e),i.update({elements:r}),i.update({renditionGrid:Object(I.b)(i)})},this._setRenditionCacheChangeListener=()=>{this._driver.setRenditionCacheChangeListener(this._handleRenditionChange)},this._setLibraryChangeListener=()=>{this._driver.setLibraryChangeListener([],this._handleLibraryChange),this._driver.off("localChange",this._setLocalLibraryChangeListener),this._driver.on("localChange",this._setLocalLibraryChangeListener)},this._setLocalLibraryChangeListener=e=>{const t=new Set;e.forEach(({mutation:e,source:a},n)=>{const i=this.get(n);i?("delete"===e?(this._driver.addWatchedLibrary(i.data),i.locallyManaged=!1):(this._driver.removeWatchedLibrary(i.data),i.locallyManaged=!0),("string"==typeof a&&i.etag!==a||"number"==typeof a&&i.modified<a||"object"==typeof a)&&t.add(n)):t.add(n)}),t.size&&this._handleLibraryChange(Array.from(t))},this.handleSyncGroupChange=async()=>{if(this._isSyncGroupChangeInProgress)this._hasUnhandledSyncGroupNotification=!0;else{this._isSyncGroupChangeInProgress=!0,this.emit("syncChange",{state:"syncing"});try{const e=this.all().map(e=>e.obtainLock());e.push(new Promise(e=>setTimeout(e,3e3))),await Promise.all(e);const t=await this._driver.getAllLibraries(),a=this._diffLibraries(t),{add:n,remove:i,promote:r}=a;if(n.length){this._cleanupRenditionElements(n).forEach(e=>this.add(e))}i.length&&i.forEach(e=>this.remove(e)),r.length&&r.forEach(e=>{const t=this.get(e.id);null==t||t.update(e)}),this.all().forEach(e=>{e.releaseLock()}),this._isSyncGroupChangeInProgress=!1,this.emit("syncChange",{state:"ok"}),this._hasUnhandledSyncGroupNotification&&(this._hasUnhandledSyncGroupNotification=!1,this.handleSyncGroupChange())}catch(e){throw this._isSyncGroupChangeInProgress=!1,this.emit("syncChange",{state:"error"}),e}}},this._diffLibraries=e=>{const t={add:[],promote:[],remove:[]},a={};return e.forEach(e=>{const n=this.get(e.id);n?e.assetId!==n.assetId&&t.promote.push(e):t.add.push(e),a[e.id]=e}),this.all().forEach(e=>{a[e.id]||Object(p.d)(e.id)||!Object(x.b)(e.data)||t.remove.push(e)}),t},this._handleConnect=async()=>{this.isPaused||(await this.init(Object(m.d)(this._driver.config.user,this._driver instanceof n.a?"cloud":"local"),!0,this._options.fileSystemCache),this.syncStatus.on("change",()=>this.emit("sync")),this.syncStatus.init(),this._setLibraryChangeListener(),this._driver.setFontDataChangeListener(()=>{this.emit("fontDataChange")}),this._setRenditionCacheChangeListener(),this._apiRoot.options.disablePreemptiveLibraryLoad||this.initialLibrariesLoad(),this.emit("connect"))},this._onSync=()=>this.emit("syncChange"),this._onAction=(...e)=>{this.emit("report",...e),this._doOperations()},this._apiRoot=e,this.syncStatus=new _(this._driver,this),this.registerIndex("assetId"),this._initializeDriver()}async changeDriver(e){await this.pause(!0,!0),this._driver=e,this.syncStatus.changeDriver(e),this._isPaused=!1,this._initialLibrariesLoaded=!1,this._initializeDriver()}_initializeDriver(){this._loadedLibraryLists.clear(),this._driver.isConnected?(this._setDriverConnectionListeners("on"),this._handleConnect()):this._driver.init(this._options,this._handleConnect,this._halt)}_setDriverConnectionListeners(e="on"){"on"===e&&this._driver.listeners("connect").includes(this._handleConnect)||(this._driver[e]("connect",this._handleConnect),this._driver[e]("disconnect",this._halt))}lockedNewLibraryUpdate(e){const t=this.get(e);return t?t.load(void 0,"notification"):this._driver.getLibraryById(e,{optimisticFetch:!1}).then(e=>this.add(e))}_cleanupRenditionElements(e){for(const t of e){const e=this.get(t.id);(null==e?void 0:e.areElementsLoaded)&&delete t.elements}return e}async initialLibrariesLoad(){this._initialLibrariesLoaded||(this._initialLibrariesLoaded=!0,await this._loadLibraryList("default",()=>this._driver.getLibraries(void 0,!0)),this.driver.addLibrariesSyncGroupListener(this.handleSyncGroupChange),this._isLoaded=!0,this.emit("loaded"))}async _loadLibraryList(e,t){var a,n,i,r;this._isLoading=!0;const s=[];this.emit("syncChange",{state:"syncing"}),await this._driver.connect(),this._apiRoot.refreshProjects();try{try{for(var o,l=!0,c=S(t());!(a=(o=await c.next()).done);){r=o.value,l=!1;try{const e=r;this._cleanupRenditionElements(e),s.push(...e),this.upsert(...e)}finally{l=!0}}}catch(e){n={error:e}}finally{try{l||a||!(i=c.return)||await i.call(c)}finally{if(n)throw n.error}}const d=[],u=this._loadedLibraryLists.size?this._loadedLibraryLists.get(e)||[]:this.all().map(e=>e.id);for(const e of u)!e||Object(p.d)(e)||s.find(t=>t.id===e)||d.push(e);for(const e of d)this.remove(e);this._isLoading=!1,this.emit("syncChange",{state:"ok"})}catch(e){if(this._isLoading=!1,this.emit("syncChange",{state:"error"}),e.name!==b.a)throw e;return[]}return this._loadedLibraryLists.set(e,s.map(e=>e.id)),s}async loadList(e={}){e=Object.fromEntries(Object.entries(e).map(([e,t])=>Array.isArray(t)?[e,t.sort()]:[e,t]).sort());const t=JSON.stringify(e),a=await this._loadLibraryList(t,()=>this._driver.getLibrariesList(void 0,e));return a?a.map(e=>this.get(e.id)):[]}async loadPage(e={},t){e=Object.fromEntries(Object.entries(e).map(([e,t])=>Array.isArray(t)?[e,t.sort()]:[e,t]).sort());const a=JSON.stringify(e),n=await this._loadLibraryList(a,()=>this._driver.getLibrariesPage(t,e));return n?n.map(e=>this.get(e.id)):[]}get isLoading(){return this._isLoading}get isLoaded(){return this._isLoaded}get isPaused(){return this._isPaused}async pause(e=!1,t=!1){this._isPaused=!0,this._quietPeriodTimeoutId&&(clearTimeout(this._quietPeriodTimeoutId),delete this._quietPeriodTimeoutId);const a=Object.values(this._inFlightOperations).map(e=>e.deref()).filter(e=>!!e),n=Promise.all(a).then(()=>{});return e&&(t&&await n,this._driver.disconnect()),this.emit("syncChange"),n}async resume(){this._isPaused&&(this._isPaused=!1,this._setDriverConnectionListeners("on"),await this._driver.reconnect(),this.emit("syncChange"),this._doOperations())}async doOperations(){this._isPaused||(this.emit("syncChange"),this._doOperations())}get syncState(){return this.syncStatus.status}_doOperations(){this._quietPeriodTimeoutId?o.a.log("[ORCHESTRATOR] Operation requested in quiet period..."):this._quietPeriodTimeoutId=setTimeout(()=>{o.a.log("[ORCHESTRATOR] Performing operations..."),delete this._quietPeriodTimeoutId;for(const e of this.all()){if(!this._canDoOperation(e))continue;const t=e.obtainLock().then(()=>this._doOperation(e)).finally(()=>{e.releaseLock(),delete this._inFlightOperations[e.id]});this._inFlightOperations[e.id]=new WeakRef(t)}},this._quietPeriodDuration)}_canDoOperation(e){return!e.operation&&0!==e.actions.length&&!this._isPaused}_doOperation(e){if(!this._canDoOperation(e))return;o.a.log("[ORCHESTRATOR] Found pending actions for library: "+e.id);return e.actions[0].link?this._doLinkedAction(e):this._doIsolatedAction(e)}async _handleActionError(e,t,a=t){var n,i;const r=t===a;if(r||(null===(n=this._libraryRequestRetryMap.get(a))||void 0===n?void 0:n.inProgress)||a.releaseLock(),"AbortError"===e.name)return t.operation=void 0,void(a.operation=void 0);if(e instanceof y.a&&"PRECONDITION_FAILED"===e.code){if(o.a.log("[ORCHESTRATOR] Server conflict. Pulling library: "+a.id),t.operation=void 0,a.operation=void 0,this._isPaused)return;return await Promise.all([t._load(void 0,void 0,"action"),!r&&a._load(void 0,void 0,"action")]),this._doOperation(t)}if(!(e instanceof y.a)){if(e instanceof s.b){if(t.operation=void 0,a.operation=void 0,this._isPaused)return;return t.revert(),r||a.revert(),void this.emit("syncChange",{state:"error",details:{errors:{[t.id]:{code:e.code,message:e.message,libraryId:null!==(i=e.libraryId)&&void 0!==i?i:t.id,underlyingError:e.underlyingError}}}})}throw e}{if(t.operation=void 0,a.operation=void 0,this._isPaused)return;const n=this._libraryRequestRetryMap.get(t)||{retryCount:0},i=b.p[n.retryCount];if(n.retryCount++,this._libraryRequestRetryMap.set(t,n),n.retryCount<=b.o){this._libraryRequestRetryMap.set(t,Object.assign(Object.assign({},n),{inProgress:!0}));try{await this._driver.sleep(i)}catch(e){return void this._libraryRequestRetryMap.set(t,Object.assign(Object.assign({},n),{inProgress:!1}))}this._libraryRequestRetryMap.set(t,Object.assign(Object.assign({},n),{inProgress:!1})),await this._doOperation(t)}else t.revert(),r||a.revert(),this.emit("syncChange",{state:"error",details:{resolvedErrors:{[t.id]:{code:"REQUEST_FAILED"}},errors:{[t.id]:{code:"REQUEST_FAILED",message:"Action failed",libraryId:t.id,underlyingError:e}}}})}}async _doIsolatedAction(e){const t=this._driver.constructOperation(e);if(!t)return;e.operation=t,this.emit("report",...t.actions.map(e=>({type:"processing",action:e})));const a=t.actions.some(e=>{var t;return null===(t=e.flags)||void 0===t?void 0:t.lockNewLibraries});a&&this._libraryPullLockCount++;try{const{actions:n,etag:i}=await t.execute();await e.commit(n,i),e.operation=void 0,o.a.log(`[ORCHESTRATOR] Successfully completed ${n.length} actions for library: ${e.id}`),e.actions.length>0&&this._doOperations()}catch(t){await this._handleActionError(t,e)}finally{const t=this._libraryRequestRetryMap.get(e);if(t&&!t.inProgress&&this._libraryRequestRetryMap.delete(e),a&&this._libraryPullLockCount--,0===this._libraryPullLockCount)for(;this._lockedLibraryPullCallbacks[0];){const e=this._lockedLibraryPullCallbacks.shift();setTimeout(()=>e&&e())}}}_doLinkedAction(e){var t;const a=e.actions[0];if("dependent"===a.name)return;const n=null===(t=a.link)||void 0===t?void 0:t.library;if(!n)return;const i=n.actions[0],s=e===n;if(s&&n.actions[1]!==a.link)throw new Error("CATASTROPHIC");if(s||!(null==n?void 0:n.operation)&&i===a.link)return e.operation=r.b,n.operation=r.b,Promise.resolve(!s&&n.obtainLock()).then(()=>{o.a.log("[ORCHESTRATOR] Got lock on both libraries. Linked actions are ready to be executed.");const t=this._driver.constructOperation(e);if(t)return e.operation=t,n.operation=t,this.emit("report",...t.actions.map(e=>({type:"processing",action:e}))),t.execute().then(({actions:t,etag:a,linkedActions:i,linkedEtag:r})=>{e.operation=void 0,n.operation=void 0,e.commit(t,a),n.commit(i,r),s||n.releaseLock(),(e.actions.length>0||n.actions.length>0)&&this._doOperations()},async t=>this._handleActionError(t,e,n));n.releaseLock()});o.a.log("[ORCHESTRATOR] Action cannot be executed because linked action is not at head.")}_add(e,t=!1){const a=super._add(e,t);return a.on("action",this._onAction),a.on("sync",this._onSync),a}_remove(e){const t="string"==typeof e?this.get(e):e;t&&(t.off("action",this._onAction),t.off("sync",this._onSync)),super._remove(e)}}},"8yz6":function(e,t,a){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const a=e.indexOf(t);return-1===a?[e]:[e.slice(0,a),e.slice(a+t.length)]}},"9/5/":function(e,t,a){(function(t){var a=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,r=/^0o[0-7]+$/i,s=parseInt,o="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,c=o||l||Function("return this")(),d=Object.prototype.toString,u=Math.max,h=Math.min,p=function(){return c.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var o=i.test(e);return o||r.test(e)?s(e.slice(2),o?2:8):n.test(e)?NaN:+e}e.exports=function(e,t,a){var n,i,r,s,o,l,c=0,d=!1,f=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var a=n,r=i;return n=i=void 0,c=t,s=e.apply(r,a)}function b(e){return c=e,o=setTimeout(_,t),d?y(e):s}function E(e){var a=e-l;return void 0===l||a>=t||a<0||f&&e-c>=r}function _(){var e=p();if(E(e))return w(e);o=setTimeout(_,function(e){var a=t-(e-l);return f?h(a,r-(e-c)):a}(e))}function w(e){return o=void 0,v&&n?y(e):(n=i=void 0,s)}function I(){var e=p(),a=E(e);if(n=arguments,i=this,l=e,a){if(void 0===o)return b(l);if(f)return o=setTimeout(_,t),y(l)}return void 0===o&&(o=setTimeout(_,t)),s}return t=g(t)||0,m(a)&&(d=!!a.leading,r=(f="maxWait"in a)?u(g(a.maxWait)||0,t):r,v="trailing"in a?!!a.trailing:v),I.cancel=function(){void 0!==o&&clearTimeout(o),c=0,n=l=i=o=void 0},I.flush=function(){return void 0===o?s:w(p())},I}}).call(this,a("yLpj"))},"9Fde":function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function o(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){e.done?i(e.value):new a((function(t){t(e.value)})).then(s,o)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var a,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(i=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],n=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=a("LgvC"),s=a("MON2"),o=a("FV85"),l=a("xfSm"),c=a("wnjb"),d=a("h7MG"),u=a("aPG5"),h=a("gzZq"),p=a("d9O0"),m=a("ujMp"),g=a("HpQ9"),f=a("AwBQ"),v=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=o.BindingScopeEnum.Transient;else if(t.defaultScope!==o.BindingScopeEnum.Singleton&&t.defaultScope!==o.BindingScopeEnum.Transient&&t.defaultScope!==o.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new f.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new c.MetadataReader}return e.merge=function(t,a){var n=new e,i=d.getBindingDictionary(n),r=d.getBindingDictionary(t),s=d.getBindingDictionary(a);function o(e,t){e.traverse((function(e,a){a.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return o(r,i),o(s,i),n},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var a=this._getContainerModuleHelpersFactory(),n=0,i=e;n<i.length;n++){var r=i[n],s=a(r.id);r.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(this,void 0,void 0,(function(){var t,a,n,r,s;return i(this,(function(i){switch(i.label){case 0:t=this._getContainerModuleHelpersFactory(),a=0,n=e,i.label=1;case 1:return a<n.length?(r=n[a],s=t(r.id),[4,r.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return a++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=function(e){return function(t){return t.moduleId===e}};t.forEach((function(t){var a=n(t.id);e._bindingDictionary.removeByCondition(a)}))},e.prototype.bind=function(e){var t=this.options.defaultScope||o.BindingScopeEnum.Transient,a=new r.Binding(e,t);return this._bindingDictionary.add(e,a),new h.BindingToSyntax(a)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(s.CANNOT_UNBIND+" "+m.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new f.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,l.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,a){var n=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),r=d.createMockRequest(this,e,t,a);n=i.some((function(e){return e.constraint(r)}))}return!n&&this.parent&&(n=this.parent.isBoundTagged(e,t,a)),n},e.prototype.snapshot=function(){this._snapshots.push(g.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var a=new e(t||this.options);return a.parent=this,a},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),a)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,o.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,a){return this._get(!1,!1,o.TargetTypeEnum.Variable,e,t,a)},e.prototype.getNamed=function(e,t){return this.getTagged(e,l.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,o.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,a){return this._get(!1,!0,o.TargetTypeEnum.Variable,e,t,a)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,l.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.createChild();return t.bind(e).toSelf(),t.get(e)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},a=function(a){return function(n){var i=e.rebind.bind(e)(n);return t(i,a),i}};return function(n){return{bindFunction:(i=n,function(a){var n=e.bind.bind(e)(a);return t(n,i),n}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:a(n),unbindFunction:function(t){e.unbind.bind(e)(t)}};var i}},e.prototype._get=function(e,t,a,n,i,r){var o=null,l={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:i,serviceIdentifier:n,targetType:a,value:r};if(this._middleware){if(null==(o=this._middleware(l)))throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else o=this._planAndResolve()(l);return o},e.prototype._planAndResolve=function(){var e=this;return function(t){var a=d.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return a=t.contextInterceptor(a),u.resolve(a)}},e}();t.Container=v},"9y4U":function(e,t,a){"use strict";var n=a("EcEN");t.a=new class{constructor(){this._contexts=new Map}register(e,t){const a=Object(n.v4)();return this._contexts.set(a,{createAtom:e,transaction:t}),()=>this._contexts.delete(a)}transaction(e){return Array.from(this._contexts.values()).reduce((e,{transaction:t})=>()=>t(()=>e()),e)()}reportObserved(e,t){for(const[a,{createAtom:n}]of this._contexts){const i=`_atom_${a}_${t}`;let r=e[i];if(!r){const a=()=>r.reportChanged();r=n(`${e.constructor.name}${i}`,()=>e.on(t,a),()=>e.off(t,a)),e[i]=r}r.reportObserved()}}}},A8Ak:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return h})),a.d(t,"f",(function(){return p})),a.d(t,"e",(function(){return m}));var n,i=a("qPad"),r=a.n(i),s=a("sGTX");function o(e,t=e.manifest.data){var a,n,i,r,s,o,c;const d=null===(a=e.manifest)||void 0===a?void 0:a.etag,h=l(e,null===(n=t.children)||void 0===n?void 0:n.find(e=>"elements"===e.name)),p=l(e,null===(i=t.children)||void 0===i?void 0:i.find(e=>"removed_elements"===e.name)),m=l(e,null===(r=t.children)||void 0===r?void 0:r.find(e=>"documentation_elements"===e.name)),g=null===(s=t.children)||void 0===s?void 0:s.find(e=>"groups"===e.name),f=(null===(o=null==g?void 0:g.children)||void 0===o?void 0:o.map(e=>({id:e.id,name:e.name,classifier:e["library#classifier"],order:e["library#order"],parentId:e["library#parentId"],sourceRef:e["library#sourceRef"],customData:u(e)})))||[];return{id:t.id,name:t.name,etag:d,localizedNames:t["library#localizedName"],toolkitId:t["toolkit#id"],documentId:t["library#documentId"],documentType:t["library#documentType"],createdDate:t["library#created"],modifiedDate:t["library#modified"],roles:t["library#roles"],details:{elementCount:h.length,documentationElementCount:m.length,removedElementCount:p.length},groups:f,elements:h,documentationElements:m,removedElements:p,customData:u(t),isLibraryLoaded:!0,areElementsLoaded:!0,appMetadata:null===(c=e.appMetadata)||void 0===c?void 0:c.data}}function l(e,t){var a;return t&&(null===(a=t.children)||void 0===a?void 0:a.map(t=>{const a={id:t.id,name:t.name,isAutoNamed:t["library#autoName"],type:t.type,tags:t.tags||[],dependencyIds:t["library#dependencies"]||[],localizedNames:t["library#localizedName"],createdDate:t["library#created"],createdLocally:!1,createdContext:t["library#createdData"]||{},modifiedDate:t["library#modified"],modifiedLocally:!1,description:t["library#description"],descriptionModifiedLocally:!1,removedLocally:!1,representations:d(e,t),groups:t["library#groups"]?Object.entries(t["library#groups"]).map(([e,{order:t}])=>{const[a,n]=e.split("#");return{id:n,classifier:a,order:t}}):[],sourceRef:t["library#sourceRef"],roles:t["library#roles"],customData:u(t)};return function(e,t){var a;const i=e.links[n.RENDITION],r=null===(a=null==i?void 0:i[0])||void 0===a?void 0:a.href,o=Object(s.a)(t.representations);o&&(t.renditionUrl={template:r,substitutions:{fragment:"id="+o.id,size:200}})}(e,a),a}))||[]}function c(e,t){var a;const i=e.links[n.COMPONENT],s=null===(a=null==i?void 0:i[0])||void 0===a?void 0:a.href,o=s&&r()(s);return null==o?void 0:o.fill({revision:t.version,component_id:t.id})}function d(e,t){var a,n;return[...(null===(a=t.components)||void 0===a?void 0:a.map(t=>({id:t.id,type:t.type,relationship:t.rel,url:c(e,t),isFullSize:t["library#isFullSize"]||t["library#isfullSize"],isExternalLink:!1,width:t.width,height:t.height,contentLength:t.length,isPreferredThumbnail:t["library#isPreferredThumbnail"],customData:u(t)})))||[],...(null===(n=t.children)||void 0===n?void 0:n.map(e=>({id:e.id,type:e.type,linktype:e["library#linktype"],relationship:e["library#rel"],isFullSize:!1,isExternalLink:!1,customData:u(e)})))||[]]}function u(e){const t={};for(const[a,n]of Object.entries(e)){const[e,i]=a.split("#");"library"!==e&&i&&(t[a]=n)}return t}function h(e){return{size:e.size,type:e.type,url:e.href}}function p(e,t){var a;const i=null===(a=t.links)||void 0===a?void 0:a[n.MANIFEST].href,s=i?r()(i):void 0;return{id:t.versionId,assetId:e,createdDate:t.created.getTime(),createdBy:t.createdBy,manifestUrl:null==s?void 0:s.fill({})}}function m(e,t){return{id:t.collaboratorID,assetId:e,imsUserId:t.imsUserId,email:t.email,name:t.name,role:t.role,type:t.type,inheritances:t.inheritances,isDirect:t.isDirect,hasContributorRole:t.hasContributorRole,hasName:t.hasName,invited:t.invited,isAdmin:t.isAdmin}}!function(e){e.DOWNLOAD="http://ns.adobe.com/adobecloud/rel/download",e.MANIFEST="http://ns.adobe.com/adobecloud/rel/manifest",e.APPLICATION="http://ns.adobe.com/adobecloud/rel/metadata/application",e.EMBEDDED="http://ns.adobe.com/adobecloud/rel/metadata/embedded",e.REPOSITORY="http://ns.adobe.com/adobecloud/rel/metadata/repository",e.PRIMARY="http://ns.adobe.com/adobecloud/rel/primary",e.RENDITION="http://ns.adobe.com/adobecloud/rel/rendition",e.COMPONENT="http://ns.adobe.com/adobecloud/rel/component",e.RESOLVE="http://ns.adobe.com/adobecloud/rel/resolve/id",e.BLOCK_INIT="http://ns.adobe.com/adobecloud/rel/block/init",e.BLOCK_TRANSFER="http://ns.adobe.com/adobecloud/rel/block/transfer",e.BLOCK_FINALIZE="http://ns.adobe.com/adobecloud/rel/block/finalize"}(n||(n={}))},AGvf:function(e,t,a){"use strict";a.d(t,"f",(function(){return Se})),a.d(t,"a",(function(){return Oe})),a.d(t,"d",(function(){return Ce})),a.d(t,"b",(function(){return Pe})),a.d(t,"e",(function(){return Ne})),a.d(t,"c",(function(){return Ae}));var n="INUMBER",i="IVAR",r="IEXPR";function s(e,t){this.type=e,this.value=null!=t?t:0}function o(e){return new s("IOP1",e)}function l(e){return new s("IOP2",e)}function c(e){return new s("IOP3",e)}function d(e,t,a){var s,o,l,c,m,g,f=[];if(h(e))return p(e,a);for(var v=e.length,y=0;y<v;y++){var b=e[y],E=b.type;if(E===n||"IVARNAME"===E)f.push(b.value);else if("IOP2"===E)o=f.pop(),s=f.pop(),"and"===b.value?f.push(!!s&&!!d(o,t,a)):"or"===b.value?f.push(!!s||!!d(o,t,a)):"="===b.value?(c=t.binaryOps[b.value],f.push(c(s,d(o,t,a),a))):(c=t.binaryOps[b.value],f.push(c(p(s,a),p(o,a))));else if("IOP3"===E)l=f.pop(),o=f.pop(),s=f.pop(),"?"===b.value?f.push(d(s?o:l,t,a)):(c=t.ternaryOps[b.value],f.push(c(p(s,a),p(o,a),p(l,a))));else if(E===i)if(b.value in t.functions)f.push(t.functions[b.value]);else if(b.value in t.unaryOps&&t.parser.isOperatorEnabled(b.value))f.push(t.unaryOps[b.value]);else{var _=a[b.value];if(void 0===_)throw new Error("undefined variable: "+b.value);f.push(_)}else if("IOP1"===E)s=f.pop(),c=t.unaryOps[b.value],f.push(c(p(s,a)));else if("IFUNCALL"===E){for(g=b.value,m=[];g-- >0;)m.unshift(p(f.pop(),a));if(!(c=f.pop()).apply||!c.call)throw new Error(c+" is not a function");f.push(c.apply(void 0,m))}else if("IFUNDEF"===E)f.push(function(){for(var e=f.pop(),n=[],i=b.value;i-- >0;)n.unshift(f.pop());var r=f.pop(),s=function(){for(var i=Object.assign({},a),r=0,s=n.length;r<s;r++)i[n[r]]=arguments[r];return d(e,t,i)};return Object.defineProperty(s,"name",{value:r,writable:!1}),a[r]=s,s}());else if(E===r)f.push(u(b,t));else if("IEXPREVAL"===E)f.push(b);else if("IMEMBER"===E)s=f.pop(),f.push(s[b.value]);else if("IENDSTATEMENT"===E)f.pop();else{if("IARRAY"!==E)throw new Error("invalid Expression");for(g=b.value,m=[];g-- >0;)m.unshift(f.pop());f.push(m)}}if(f.length>1)throw new Error("invalid Expression (parity)");return 0===f[0]?0:p(f[0],a)}function u(e,t,a){return h(e)?e:{type:"IEXPREVAL",value:function(a){return d(e.value,t,a)}}}function h(e){return e&&"IEXPREVAL"===e.type}function p(e,t){return h(e)?e.value(t):e}function m(e,t){for(var a,s,o,l,c,d,u=[],h=0;h<e.length;h++){var p=e[h],f=p.type;if(f===n)"number"==typeof p.value&&p.value<0?u.push("("+p.value+")"):Array.isArray(p.value)?u.push("["+p.value.map(g).join(", ")+"]"):u.push(g(p.value));else if("IOP2"===f)s=u.pop(),a=u.pop(),l=p.value,t?"^"===l?u.push("Math.pow("+a+", "+s+")"):"and"===l?u.push("(!!"+a+" && !!"+s+")"):"or"===l?u.push("(!!"+a+" || !!"+s+")"):"||"===l?u.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+a+"),("+s+")))"):"=="===l?u.push("("+a+" === "+s+")"):"!="===l?u.push("("+a+" !== "+s+")"):"["===l?u.push(a+"[("+s+") | 0]"):u.push("("+a+" "+l+" "+s+")"):"["===l?u.push(a+"["+s+"]"):u.push("("+a+" "+l+" "+s+")");else if("IOP3"===f){if(o=u.pop(),s=u.pop(),a=u.pop(),"?"!==(l=p.value))throw new Error("invalid Expression");u.push("("+a+" ? "+s+" : "+o+")")}else if(f===i||"IVARNAME"===f)u.push(p.value);else if("IOP1"===f)a=u.pop(),"-"===(l=p.value)||"+"===l?u.push("("+l+a+")"):t?"not"===l?u.push("(!"+a+")"):"!"===l?u.push("fac("+a+")"):u.push(l+"("+a+")"):"!"===l?u.push("("+a+"!)"):u.push("("+l+" "+a+")");else if("IFUNCALL"===f){for(d=p.value,c=[];d-- >0;)c.unshift(u.pop());l=u.pop(),u.push(l+"("+c.join(", ")+")")}else if("IFUNDEF"===f){for(s=u.pop(),d=p.value,c=[];d-- >0;)c.unshift(u.pop());a=u.pop(),t?u.push("("+a+" = function("+c.join(", ")+") { return "+s+" })"):u.push("("+a+"("+c.join(", ")+") = "+s+")")}else if("IMEMBER"===f)a=u.pop(),u.push(a+"."+p.value);else if("IARRAY"===f){for(d=p.value,c=[];d-- >0;)c.unshift(u.pop());u.push("["+c.join(", ")+"]")}else if(f===r)u.push("("+m(p.value,t)+")");else if("IENDSTATEMENT"!==f)throw new Error("invalid Expression")}return u.length>1&&(u=t?[u.join(",")]:[u.join(";")]),String(u[0])}function g(e){return"string"==typeof e?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function f(e,t){for(var a=0;a<e.length;a++)if(e[a]===t)return!0;return!1}function v(e,t,a){for(var n=!!(a=a||{}).withMembers,s=null,o=0;o<e.length;o++){var l=e[o];l.type===i||"IVARNAME"===l.type?n||f(t,l.value)?null!==s?(f(t,s)||t.push(s),s=l.value):s=l.value:t.push(l.value):"IMEMBER"===l.type&&n&&null!==s?s+="."+l.value:l.type===r?v(l.value,t,a):null!==s&&(f(t,s)||t.push(s),s=null)}null===s||f(t,s)||t.push(s)}function y(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}s.prototype.toString=function(){switch(this.type){case n:case"IOP1":case"IOP2":case"IOP3":case i:case"IVARNAME":case"IENDSTATEMENT":return this.value;case"IFUNCALL":return"CALL "+this.value;case"IFUNDEF":return"DEF "+this.value;case"IARRAY":return"ARRAY "+this.value;case"IMEMBER":return"."+this.value;default:return"Invalid Instruction"}},y.prototype.simplify=function(e){return e=e||{},new y(function e(t,a,o,l,c){for(var d,u,h,p,m=[],g=[],f=0;f<t.length;f++){var v=t[f],y=v.type;if(y===n||"IVARNAME"===y)Array.isArray(v.value)?m.push.apply(m,e(v.value.map((function(e){return new s(n,e)})).concat(new s("IARRAY",v.value.length)),a,o,l,c)):m.push(v);else if(y===i&&c.hasOwnProperty(v.value))v=new s(n,c[v.value]),m.push(v);else if("IOP2"===y&&m.length>1)u=m.pop(),d=m.pop(),p=o[v.value],v=new s(n,p(d.value,u.value)),m.push(v);else if("IOP3"===y&&m.length>2)h=m.pop(),u=m.pop(),d=m.pop(),"?"===v.value?m.push(d.value?u.value:h.value):(p=l[v.value],v=new s(n,p(d.value,u.value,h.value)),m.push(v));else if("IOP1"===y&&m.length>0)d=m.pop(),p=a[v.value],v=new s(n,p(d.value)),m.push(v);else if(y===r){for(;m.length>0;)g.push(m.shift());g.push(new s(r,e(v.value,a,o,l,c)))}else if("IMEMBER"===y&&m.length>0)d=m.pop(),m.push(new s(n,d.value[v.value]));else{for(;m.length>0;)g.push(m.shift());g.push(v)}}for(;m.length>0;)g.push(m.shift());return g}(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)},y.prototype.substitute=function(e,t){return t instanceof y||(t=this.parser.parse(String(t))),new y(function e(t,a,n){for(var d=[],u=0;u<t.length;u++){var h=t[u],p=h.type;if(p===i&&h.value==